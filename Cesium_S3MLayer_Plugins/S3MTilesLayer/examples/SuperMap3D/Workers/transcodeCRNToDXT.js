import{a as Xn,d as jn}from"./chunk-UHIREIIH.js";if(typeof WebAssembly<"u"){let p=function(n){return t.locateFile?t.locateFile(n,g):g+n},c=function(n,r){n||x("Assertion failed: "+r)},s=function(n,r,e){for(var i=r+e,a=r;n[a]&&!(a>=i);)++a;if(a-r>16&&n.subarray&&cn)return cn.decode(n.subarray(r,a));for(var o="";r<a;){var f=n[r++];if(!(f&128)){o+=String.fromCharCode(f);continue}var l=n[r++]&63;if((f&224)==192){o+=String.fromCharCode((f&31)<<6|l);continue}var y=n[r++]&63;if((f&240)==224?f=(f&15)<<12|l<<6|y:f=(f&7)<<18|l<<12|y<<6|n[r++]&63,f<65536)o+=String.fromCharCode(f);else{var W=f-65536;o+=String.fromCharCode(55296|W>>10,56320|W&1023)}}return o},v=function(n,r){return n?s(B,n,r):""},u=function(n,r){return n%r>0&&(n+=r-n%r),n},h=function(n){Y=n,t.HEAP8=un=new Int8Array(n),t.HEAP16=Un=new Int16Array(n),t.HEAP32=Z=new Int32Array(n),t.HEAPU8=B=new Uint8Array(n),t.HEAPU16=Zn=new Uint16Array(n),t.HEAPU32=Fn=new Uint32Array(n),t.HEAPF32=Wn=new Float32Array(n),t.HEAPF64=kn=new Float64Array(n)},b=function(n){for(;n.length>0;){var r=n.shift();if(typeof r=="function"){r();continue}var e=r.func;typeof e=="number"?r.arg===void 0?t.dynCall_v(e):t.dynCall_vi(e,r.arg):e(r.arg===void 0?null:r.arg)}},w=function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)X(t.preRun.shift());b(pn)},F=function(){Yn=!0,b(ln)},P=function(){b(Rn)},H=function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)U(t.postRun.shift());b(hn)},X=function(n){pn.unshift(n)},U=function(n){hn.unshift(n)},S=function(n){J++,t.monitorRunDependencies&&t.monitorRunDependencies(J)},nn=function(n){if(J--,t.monitorRunDependencies&&t.monitorRunDependencies(J),J==0&&(N!==null&&(clearInterval(N),N=null),L)){var r=L;L=null,r()}},x=function(n){throw t.onAbort&&t.onAbort(n),n+="",fn(n),q(n),on=!0,Jn=1,n="abort("+n+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(n)},xn=function(n){return String.prototype.startsWith?n.startsWith(mn):n.indexOf(mn)===0},Cn=function(){try{if(G)return new Uint8Array(G);if(R)return R(Q);throw"both async and sync fetching of the wasm failed"}catch(n){x(n)}},Hn=function(){return!G&&(D||j)&&typeof fetch=="function"?fetch(Q,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Q+"'";return n.arrayBuffer()}).catch(function(){return Cn()}):new Promise(function(n,r){n(Cn())})},zn=function(){if(!G)return{};var n={env:gn,wasi_unstable:gn};function r(f,l){var y=f.exports;t.asm=y,nn("wasm-instantiate")}S("wasm-instantiate");function e(f){r(f.instance)}function i(f){return Hn().then(function(l){return WebAssembly.instantiate(l,n)}).then(f,function(l){q("failed to asynchronously prepare wasm: "+l),x(l)})}function a(){if(!G&&typeof WebAssembly.instantiateStreaming=="function"&&!xn(Q)&&typeof fetch=="function")fetch(Q,{credentials:"same-origin"}).then(function(f){var l=WebAssembly.instantiateStreaming(f,n);return l.then(e,function(y){q("wasm streaming compile failed: "+y),q("falling back to ArrayBuffer instantiation"),i(e)})});else return i(e)}if(t.instantiateWasm)try{var o=t.instantiateWasm(n,r);return o}catch(f){return q("Module.instantiateWasm callback failed with error: "+f),!1}return a(),{}},An=function(){return un.length},Tn=function(n,r,e){B.set(B.subarray(r,r+e),n)},dn=function(n){try{return $.grow(n-Y.byteLength+65535>>16),h($.buffer),1}catch{}},Sn=function(n){var r=An(),e=65536,i=2147483648-e;if(n>i)return!1;for(var a=16777216,o=Math.max(r,a);o<n;)o<=536870912?o=u(2*o,e):o=Math.min(u((3*o+2147483648)/4,e),i);var f=dn(o);return!!f},On=function(n,r,e,i){try{for(var a=0,o=0;o<e;o++){for(var f=Z[r+o*8>>2],l=Z[r+(o*8+4)>>2],y=0;y<l;y++)z.printChar(n,B[f+y]);a+=l}return Z[i>>2]=a,0}catch(W){return(typeof FS>"u"||!(W instanceof FS.ErrnoError))&&x(W),W.errno}},In=function(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n},tn=function(n){if(n=n||K,J>0||(w(),J>0))return;function r(){T||(T=!0,!on&&(F(),P(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),H()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),r()},1)):r()};t=typeof t<"u"?t:{},k={};for(C in t)t.hasOwnProperty(C)&&(k[C]=t[C]);K=[],rn="./this.program",O=function(n,r){throw r},D=!1,j=!1,I=!1,en=!1,an=!1,D=typeof window=="object",j=typeof importScripts=="function",en=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I=en&&!D&&!j,an=!D&&!I&&!j,g="",I?(g=__dirname+"/",A=function(r,e){return _||(_=Xn("fs")),E||(E=Xn("path")),r=E.normalize(r),_.readFileSync(r,e?null:"utf8")},R=function(r){var e=A(r,!0);return e.buffer||(e=new Uint8Array(e)),c(e.buffer),e},process.argv.length>1&&(rn=process.argv[1].replace(/\\/g,"/")),K=process.argv.slice(2),typeof module<"u"&&(module.exports=t),process.on("uncaughtException",function(n){if(!(n instanceof In))throw n}),process.on("unhandledRejection",x),O=function(n){process.exit(n)},t.inspect=function(){return"[Emscripten Module object]"}):an?(typeof read<"u"&&(A=function(r){return read(r)}),R=function(r){var e;return typeof readbuffer=="function"?new Uint8Array(readbuffer(r)):(e=read(r,"binary"),c(typeof e=="object"),e)},typeof scriptArgs<"u"?K=scriptArgs:typeof arguments<"u"&&(K=arguments),typeof quit=="function"&&(O=function(n){quit(n)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(D||j)&&(j?g=self.location.href:document.currentScript&&(g=document.currentScript.src),g.indexOf("blob:")!==0?g=g.substr(0,g.lastIndexOf("/")+1):g="",A=function(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},j&&(R=function(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),qn=function(r,e,i){var a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){e(a.response);return}i()},a.onerror=i,a.send(null)},Gn=function(n){document.title=n}),fn=t.print||console.log.bind(console),q=t.printErr||console.warn.bind(console);for(C in k)k.hasOwnProperty(C)&&(t[C]=k[C]);if(k=null,t.arguments&&(K=t.arguments),t.thisProgram&&(rn=t.thisProgram),t.quit&&(O=t.quit),t.wasmBinary&&(G=t.wasmBinary),t.noExitRuntime&&(sn=t.noExitRuntime),typeof WebAssembly!="object"&&q("no native wasm support detected"),$n=new WebAssembly.Table({initial:6,maximum:6+0,element:"anyfunc"}),on=!1,Jn=0,cn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,_n=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Qn=65536,Kn=5247584,Dn=4544,vn=t.TOTAL_MEMORY||16777216,t.wasmMemory?$=t.wasmMemory:$=new WebAssembly.Memory({initial:vn/Qn}),$&&(Y=$.buffer),vn=Y.byteLength,h(Y),Z[Dn>>2]=Kn,pn=[],ln=[],Rn=[],hn=[],Yn=!1,J=0,N=null,L=null,t.preloadedImages={},t.preloadedAudios={},mn="data:application/octet-stream;base64,",Q="crunch.wasm",xn(Q)||(Q=self.SUPERMAP3D_BASE_URL+"ThirdParty/crunch.wasm"),ln.push({func:function(){Bn()}}),V={splitPath:function(n){var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(n).slice(1)},normalizeArray:function(n,r){for(var e=0,i=n.length-1;i>=0;i--){var a=n[i];a==="."?n.splice(i,1):a===".."?(n.splice(i,1),e++):e&&(n.splice(i,1),e--)}if(r)for(;e;e--)n.unshift("..");return n},normalize:function(n){var r=n.charAt(0)==="/",e=n.substr(-1)==="/";return n=V.normalizeArray(n.split("/").filter(function(i){return!!i}),!r).join("/"),!n&&!r&&(n="."),n&&e&&(n+="/"),(r?"/":"")+n},dirname:function(n){var r=V.splitPath(n),e=r[0],i=r[1];return!e&&!i?".":(i&&(i=i.substr(0,i.length-1)),e+i)},basename:function(n){if(n==="/")return"/";var r=n.lastIndexOf("/");return r===-1?n:n.substr(r+1)},extname:function(n){return V.splitPath(n)[3]},join:function(){var n=Array.prototype.slice.call(arguments,0);return V.normalize(n.join("/"))},join2:function(n,r){return V.normalize(n+"/"+r)}},z={buffers:[null,[],[]],printChar:function(n,r){var e=z.buffers[n];r===0||r===10?((n===1?fn:q)(s(e,0)),e.length=0):e.push(r)},varargs:0,get:function(n){z.varargs+=4;var r=Z[z.varargs-4>>2];return r},getStr:function(){var n=v(z.get());return n},get64:function(){var n=z.get(),r=z.get();return n},getZero:function(){z.get()}},gn={a:Tn,b:Sn,c:On,memory:$,table:$n},yn=zn(),t.asm=yn,Bn=t.___wasm_call_ctors=function(){return t.asm.d.apply(null,arguments)},En=t._malloc=function(){return t.asm.e.apply(null,arguments)},Nn=t._free=function(){return t.asm.f.apply(null,arguments)},Mn=t._crn_get_width=function(){return t.asm.g.apply(null,arguments)},nt=t._crn_get_height=function(){return t.asm.h.apply(null,arguments)},tt=t._crn_get_levels=function(){return t.asm.i.apply(null,arguments)},rt=t._crn_get_dxt_format=function(){return t.asm.j.apply(null,arguments)},et=t._crn_get_bytes_per_block=function(){return t.asm.k.apply(null,arguments)},it=t._crn_get_uncompressed_size=function(){return t.asm.l.apply(null,arguments)},at=t._crn_decompress=function(){return t.asm.m.apply(null,arguments)},t.asm=yn,L=function n(){T||tn(),T||(L=n)},t.run=tn,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();sn=!0,t.init=function(n){G=n,t.asm=zn(),tn()}}var t,k,C,K,rn,O,D,j,I,en,an,g,A,qn,R,Gn,_,E,fn,q,G,sn,$,$n,on,Jn,cn,_n,Qn,Y,un,B,Un,Zn,Z,Fn,Wn,kn,Kn,Dn,vn,pn,ln,Rn,hn,Yn,J,N,L,mn,Q,V,z,gn,yn,Bn,En,Nn,Mn,nt,tt,rt,et,it,at,T,bn=t;/**
 * @license
 *
 * Copyright (c) 2014, Brandon Jones. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation
 *  and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var wn={cCRNFmtInvalid:-1,cCRNFmtDXT1:0,cCRNFmtDXT3:1,cCRNFmtDXT5:2},M={};M[wn.cCRNFmtDXT1]=33776;M[wn.cCRNFmtDXT3]=33778;M[wn.cCRNFmtDXT5]=33779;var d,Ln,Vn=0,m;function ft(p,c,s,v){var u,h=s/4,b=v%4,w=new Uint32Array(p.buffer,0,(v-b)/4),F=new Uint32Array(c.buffer);for(u=0;u<w.length;u++)F[h+u]=w[u];for(u=v-b;u<v;u++)c[s+u]=p[u]}function Pn(p,c,s){switch(p){case 33776:case 33777:case 36196:case 37492:return Math.floor((c+3)/4)*Math.floor((s+3)/4)*8;case 33778:case 33779:case 37808:case 37496:return Math.floor((c+3)/4)*Math.floor((s+3)/4)*16;case 35840:case 35842:return Math.floor((Math.max(c,8)*Math.max(s,8)*4+7)/8);case 35841:case 35843:return Math.floor((Math.max(c,16)*Math.max(s,8)*2+7)/8);case 36492:return Math.ceil(c/4)*Math.ceil(s/4)*16;default:return 0}}function st(p,c,s,v,u){this._format=p,this._width=c,this._height=s,this._buffer=v,this._datatype=u}function ot(p,c){var s=p.data,v=s.byteLength,u=new Uint8Array(s),h=m._malloc(v);ft(u,m.HEAPU8,h,v);var b=m._crn_get_dxt_format(h,v),w=M[b];if(!w)throw new Error("Unsupported compressed format.");var F=m._crn_get_levels(h,v),P=m._crn_get_width(h,v),H=m._crn_get_height(h,v),X=0,U;for(U=0;U<F;++U)X+=Pn(w,P>>U,H>>U);Vn<X&&(d&&m._free(d),d=m._malloc(X),Ln=new Uint8Array(m.HEAPU8.buffer,d,X),Vn=X),m._crn_decompress(h,v,d,X,0,F),m._free(h);var S=Pn(w,P,H),nn=Ln.subarray(0,S),x=new Uint8Array(S);return x.set(nn,0),c.push(x.buffer),new st(w,P,H,x)}async function ct(p,c){let s=p.webAssemblyConfig;return s&&s.wasmBinary?(await bn.init(s.wasmBinary),m=bn,!0):!1}async function ut(p,c){return p.webAssemblyConfig?ct(p,c):ot(p,c)}var ht=jn(ut);export{ht as default};
