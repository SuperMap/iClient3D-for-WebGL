const _0x43a6b7=(function(){let _0x3fcc61=!![];return function(_0x57fc14,_0x50627c){const _0x1cb885=_0x3fcc61?function(){if(_0x50627c){const _0x350857=_0x50627c['apply'](_0x57fc14,arguments);return _0x50627c=null,_0x350857;}}:function(){};return _0x3fcc61=![],_0x1cb885;};}()),_0x21e21c=_0x43a6b7(this,function(){return _0x21e21c['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x21e21c)['search']('(((.+)+)+)+$');});_0x21e21c();import _0x560994 from'../ThirdParty/pako_inflate.js';import _0x215e55 from'../ThirdParty/defer.js';import _0x4f94ae from'../Core/CRNTranscoder.js';function _0x396ea0(){this['state']={},this['cache']={},this['list']=new Cesium['DoublyLinkedList'](),this['pendingRequests']=[],this['promisePack']={},this['quadKeyPack']={},this['quadKeyIndexPack']={},this['requestHeapPack']={};}const _0x346b2e={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _0x123111=0x0;const _0x13c25c=0xc8*0x400*0x400,_0x4a263e=0x14;_0x396ea0['prototype']['prepareRequest']=function(_0x514224,_0x4d05ec,_0x40545c,_0x28ec2a,_0x57f162){let _0x8f50cc=_0x514224+'_'+_0x40545c,_0x33b2e6=_0x4d05ec+_0x40545c+'.texblock',_0x2f57ad=new Cesium['Request']({'url':_0x33b2e6,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){return _0x28ec2a['distanceToCamera'];}});_0x2f57ad['quadKey']=_0x40545c,_0x2f57ad['providerName']=_0x57f162['tile']['layer']['name'],_0x2f57ad['keyWord']=_0x8f50cc,this['pendingRequests']['push'](_0x2f57ad);};let _0x503acf=function(_0x1f38ed,_0x3a4d48){return _0x1f38ed['priority']-_0x3a4d48['priority'];};_0x396ea0['prototype']['processRequests']=function(){if(this['pendingRequests']['length']<0x1)return;this['pendingRequests']['sort'](_0x503acf),this['startPackRequest']();for(let _0x260e6b=0x0,_0x447557=this['pendingRequests']['length'];_0x260e6b<_0x447557;_0x260e6b++){let _0x68f1b4=this['pendingRequests'][_0x260e6b];this['request'](_0x68f1b4);}this['pendingRequests']['length']=0x0;};function _0x462ab7(_0x540c08){let _0x357f3f=[],_0x2b3a18={},_0x43736a=0x0;for(let _0x317a19=0x0,_0x24905f=_0x540c08['length'];_0x317a19<_0x24905f;_0x317a19++){let _0x125f61=_0x540c08[_0x317a19];if(_0x125f61['cancelled'])continue;let _0x70f40a=_0x125f61['quadKey'];if(_0x2b3a18[_0x70f40a])continue;_0x2b3a18[_0x70f40a]=!![],_0x357f3f['push'](_0x70f40a),_0x125f61['quadKeyIndex']=_0x43736a++;}return _0x357f3f;}_0x396ea0['prototype']['startPackRequest']=function(){let _0xdd12b6=_0x462ab7(this['pendingRequests']),_0x30afe1=_0xdd12b6['join'](';'),_0x4fc34d=this['pendingRequests'][0x0]['url'],_0x297e7f=new Cesium['Resource']({'url':_0x4fc34d,'queryParameters':{'extratiles':_0x30afe1}}),_0x4c7f3f=_0x215e55(),_0xaf9739=_0x297e7f['fetchArrayBuffer']();if(!_0xaf9739)return;for(let _0x2b2708=0x0,_0x34aa93=this['pendingRequests']['length'];_0x2b2708<_0x34aa93;_0x2b2708++){let _0x3d8df1=this['pendingRequests'][_0x2b2708];_0x3d8df1['deferred']=_0x4c7f3f;}_0xaf9739['then'](function(_0x4fa53a){_0x4c7f3f['resolve'](_0x4fa53a);},_0x182742=>{_0x4c7f3f['reject'](error);});};function _0x1b9dce(_0x25464e,_0x390b3f){let _0x285205=new DataView(_0x25464e),_0x4cbeb6=0x0,_0x28b3fa=_0x285205['getUint32'](_0x4cbeb6,!![]);if(_0x390b3f>_0x28b3fa-0x1||_0x28b3fa>0x100)return undefined;_0x4cbeb6+=0x4;let _0x1214a1=[],_0x246fec,_0x1f35e2;for(_0x246fec=0x0;_0x246fec<_0x28b3fa;_0x246fec++){_0x1f35e2=_0x285205['getUint32'](_0x4cbeb6,!![]),_0x1214a1['push'](_0x1f35e2),_0x4cbeb6+=0x4;}for(_0x246fec=0x0;_0x246fec<_0x28b3fa;_0x246fec++){_0x1f35e2=_0x1214a1[_0x246fec];if(_0x246fec===_0x390b3f){if(_0x1f35e2===0x0)return;return new Uint8Array(_0x25464e)['slice'](_0x4cbeb6,_0x4cbeb6+_0x1f35e2)['buffer'];}_0x4cbeb6+=_0x1f35e2;}return undefined;}_0x396ea0['prototype']['request']=function(_0x16280c){let _0x561ee3=_0x16280c['keyWord'],_0x230578=_0x16280c['deferred']['promise'];this['state'][_0x561ee3]=_0x346b2e['Loading'];let _0x524312=this;_0x230578['then'](function(_0x3f1bfa){if(!Cesium['defined'](_0x524312['state'][_0x561ee3]))return;_0x524312['state'][_0x561ee3]=_0x346b2e['Loaded'];let _0x568b2e=_0x1b9dce(_0x3f1bfa,_0x16280c['quadKeyIndex']);if(!_0x568b2e){_0x524312['state'][_0x561ee3]=_0x346b2e['Failed'];return;}let _0xc8de6e=new Uint8Array(_0x568b2e),_0x4add7d=new DataView(_0x568b2e),_0x5eb7dd=0x0,_0x1d8b95=_0x4add7d['getUint32'](_0x5eb7dd,!![]);_0x5eb7dd+=Uint32Array['BYTES_PER_ELEMENT'];let _0x2ff14a={};for(let _0x5b2af2=0x0;_0x5b2af2<_0x1d8b95;_0x5b2af2++){let _0xd93c21=_0x4add7d['getUint32'](_0x5eb7dd,!![]);_0x5eb7dd+=Uint32Array['BYTES_PER_ELEMENT'];let _0x2269dd=Cesium['getStringFromTypedArray'](_0xc8de6e,_0x5eb7dd,_0xd93c21);_0x5eb7dd+=_0xd93c21;let _0x525df1=_0x4add7d['getUint32'](_0x5eb7dd,!![]);_0x5eb7dd+=Uint32Array['BYTES_PER_ELEMENT'];let _0x2db60d=_0x4add7d['getUint32'](_0x5eb7dd,!![]);_0x5eb7dd+=Uint32Array['BYTES_PER_ELEMENT'];let _0x24c5b9,_0x4b968c,_0x1338c7=_0xc8de6e;try{let _0x103c6e=new Uint8Array(_0x568b2e,_0x5eb7dd,_0x2db60d);_0x1338c7=_0x560994['inflate'](_0x103c6e)['buffer'],_0x24c5b9=new DataView(_0x1338c7),_0x4b968c=0x0;}catch(_0x1a24f7){if(_0x525df1===_0x2db60d)_0x24c5b9=_0x4add7d,_0x4b968c=_0x5eb7dd;else continue;}let _0x332ec9=_0x24c5b9['getUint32'](_0x4b968c,!![]);_0x4b968c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x348f1c=_0x24c5b9['getUint32'](_0x4b968c,!![]);_0x4b968c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x4bff12=_0x24c5b9['getUint32'](_0x4b968c,!![]);_0x4b968c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x4a3807=_0x24c5b9['getUint32'](_0x4b968c,!![]);_0x4b968c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x3eaab3=_0x24c5b9['getUint32'](_0x4b968c,!![]);_0x4b968c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x3e34ea=new Uint8Array(_0x1338c7,_0x4b968c,_0x3eaab3);if(_0x332ec9===0x1a){_0x3e34ea=_0x1338c7['slice'](_0x4b968c,_0x4b968c+_0x3eaab3);const _0x221f47=_0x4f94ae['transcode']({'data':_0x3e34ea,'bMipMap':!![]});_0x3e34ea=_0x221f47['bufferView'];}_0x2ff14a[_0x2269dd]={'width':_0x348f1c,'height':_0x4bff12,'arrayBufferView':_0x3e34ea},_0x5eb7dd+=_0x2db60d;}let _0x2e62ae={'keyWord':_0x561ee3,'result':_0x2ff14a,'byteLength':_0x568b2e['byteLength']},_0x51c142=_0x524312['list']['add'](_0x2e62ae);_0x524312['cache'][_0x561ee3]=_0x51c142,_0x524312['state'][_0x561ee3]=_0x346b2e['Ready'],delete _0x524312['state'][_0x561ee3],_0x123111+=_0x568b2e['byteLength'];let _0x3d190b=_0x524312['list']['head'];while(_0x123111>_0x13c25c){let _0x36b0cd=_0x3d190b['item'],_0x2d67f9=_0x3d190b,_0x2aa819=_0x36b0cd['keyWord'],_0xdc96f=_0x524312['cache'][_0x2aa819],_0x3b0a23=_0xdc96f['item'];_0x123111-=_0x3b0a23['byteLength'],delete _0x524312['cache'][_0x2aa819],_0x3d190b=_0x3d190b['next'],_0x524312['list']['remove'](_0x2d67f9);}},function(_0x2fc5cf){_0x524312['state'][_0x561ee3]=_0x2fc5cf?_0x346b2e['Failed']:_0x346b2e['UnLoad'];});},_0x396ea0['prototype']['get']=function(_0xfc65b2,_0xf2504d,_0x15fb32,_0x4a2a0f){let _0x23977b=_0xfc65b2+'_'+_0x15fb32,_0x39d96b=this['cache'][_0x23977b];if(_0x39d96b)return this['list']['splice'](this['list']['tail'],_0x39d96b),_0x39d96b['item'];let _0x172969=this['state'][_0x23977b];return!Cesium['defined'](_0x172969)&&(_0x172969=this['state'][_0x23977b]=_0x346b2e['UnLoad']),_0x172969===_0x346b2e['UnLoad']&&this['prepareRequest'](_0xfc65b2,_0xf2504d,_0x15fb32,_0x4a2a0f['tile'],_0x4a2a0f),undefined;},_0x396ea0['prototype']['del']=function(_0x2465fe,_0x56efa5){let _0x1c1c09=_0x2465fe+'_'+_0x56efa5;delete this['state'][_0x1c1c09];},_0x396ea0['_singleInstance']=undefined,_0x396ea0['getSingleInstance']=function(){return!_0x396ea0['_singleInstance']&&(_0x396ea0['_singleInstance']=new _0x396ea0()),_0x396ea0['_singleInstance'];};export default _0x396ea0;