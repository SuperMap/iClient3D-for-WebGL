const _0x1d9145=(function(){let _0x42121d=!![];return function(_0x19c8cc,_0x8c324c){const _0x2a65da=_0x42121d?function(){if(_0x8c324c){const _0x4d7cb1=_0x8c324c['apply'](_0x19c8cc,arguments);return _0x8c324c=null,_0x4d7cb1;}}:function(){};return _0x42121d=![],_0x2a65da;};}()),_0x417984=_0x1d9145(this,function(){return _0x417984['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x417984)['search']('(((.+)+)+)+$');});_0x417984();import _0x4e18b4 from'../ThirdParty/pako_inflate.js';import _0x24a610 from'../ThirdParty/defer.js';import _0x528ed9 from'../Core/CRNTranscoder.js';function _0x5e5c90(){this['state']={},this['cache']={},this['list']=new Cesium['DoublyLinkedList'](),this['pendingRequests']=[],this['promisePack']={},this['quadKeyPack']={},this['quadKeyIndexPack']={},this['requestHeapPack']={};}const _0x100927={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _0x99cb83=0x0;const _0x450236=0xc8*0x400*0x400,_0x1003cd=0x14;_0x5e5c90['prototype']['prepareRequest']=function(_0x216d2b,_0x112b5e,_0x23e8a3,_0x129c28,_0x4b19a5){let _0x526983=_0x216d2b+'_'+_0x23e8a3,_0x20a63b=_0x112b5e+_0x23e8a3+'.texblock',_0x203f06=new Cesium['Request']({'url':_0x20a63b,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){return _0x129c28['distanceToCamera'];}});_0x203f06['quadKey']=_0x23e8a3,_0x203f06['providerName']=_0x4b19a5['tile']['layer']['name'],_0x203f06['keyWord']=_0x526983,this['pendingRequests']['push'](_0x203f06);};let _0x58529c=function(_0x20eca4,_0x1cfe21){return _0x20eca4['priority']-_0x1cfe21['priority'];};_0x5e5c90['prototype']['processRequests']=function(){if(this['pendingRequests']['length']<0x1)return;this['pendingRequests']['sort'](_0x58529c),this['startPackRequest']();for(let _0x33f041=0x0,_0x1cbff6=this['pendingRequests']['length'];_0x33f041<_0x1cbff6;_0x33f041++){let _0x5127fe=this['pendingRequests'][_0x33f041];this['request'](_0x5127fe);}this['pendingRequests']['length']=0x0;};function _0x3d3ccf(_0xc554c6){let _0x131644=[],_0x55609d={},_0x2c65dc=0x0;for(let _0x3fb886=0x0,_0x3740d3=_0xc554c6['length'];_0x3fb886<_0x3740d3;_0x3fb886++){let _0x444802=_0xc554c6[_0x3fb886];if(_0x444802['cancelled'])continue;let _0x44bff2=_0x444802['quadKey'];if(_0x55609d[_0x44bff2])continue;_0x55609d[_0x44bff2]=!![],_0x131644['push'](_0x44bff2),_0x444802['quadKeyIndex']=_0x2c65dc++;}return _0x131644;}_0x5e5c90['prototype']['startPackRequest']=function(){let _0x44b003=_0x3d3ccf(this['pendingRequests']),_0x419e61=_0x44b003['join'](';'),_0x284c52=this['pendingRequests'][0x0]['url'],_0x5aabfe=new Cesium['Resource']({'url':_0x284c52,'queryParameters':{'extratiles':_0x419e61}}),_0x57f1ca=_0x24a610(),_0xd7034a=_0x5aabfe['fetchArrayBuffer']();if(!_0xd7034a)return;for(let _0x3fd7b2=0x0,_0x39f623=this['pendingRequests']['length'];_0x3fd7b2<_0x39f623;_0x3fd7b2++){let _0x5dca16=this['pendingRequests'][_0x3fd7b2];_0x5dca16['deferred']=_0x57f1ca;}_0xd7034a['then'](function(_0x22ba07){_0x57f1ca['resolve'](_0x22ba07);},_0x2fd29f=>{_0x57f1ca['reject'](error);});};function _0x2fe6be(_0x3537ef,_0x4c3141){let _0x38f548=new DataView(_0x3537ef),_0x2a0924=0x0,_0xfe4c00=_0x38f548['getUint32'](_0x2a0924,!![]);if(_0x4c3141>_0xfe4c00-0x1||_0xfe4c00>0x100)return undefined;_0x2a0924+=0x4;let _0x567401=[],_0x5c33ac,_0x19e26c;for(_0x5c33ac=0x0;_0x5c33ac<_0xfe4c00;_0x5c33ac++){_0x19e26c=_0x38f548['getUint32'](_0x2a0924,!![]),_0x567401['push'](_0x19e26c),_0x2a0924+=0x4;}for(_0x5c33ac=0x0;_0x5c33ac<_0xfe4c00;_0x5c33ac++){_0x19e26c=_0x567401[_0x5c33ac];if(_0x5c33ac===_0x4c3141){if(_0x19e26c===0x0)return;return new Uint8Array(_0x3537ef)['slice'](_0x2a0924,_0x2a0924+_0x19e26c)['buffer'];}_0x2a0924+=_0x19e26c;}return undefined;}_0x5e5c90['prototype']['request']=function(_0x36980b){let _0x37c521=_0x36980b['keyWord'],_0x1eb496=_0x36980b['deferred']['promise'];this['state'][_0x37c521]=_0x100927['Loading'];let _0x2eaab3=this;_0x1eb496['then'](function(_0x5e78b3){if(!Cesium['defined'](_0x2eaab3['state'][_0x37c521]))return;_0x2eaab3['state'][_0x37c521]=_0x100927['Loaded'];let _0x4904ff=_0x2fe6be(_0x5e78b3,_0x36980b['quadKeyIndex']);if(!_0x4904ff){_0x2eaab3['state'][_0x37c521]=_0x100927['Failed'];return;}let _0x56d923=new Uint8Array(_0x4904ff),_0x455772=new DataView(_0x4904ff),_0xde7aba=0x0,_0x1c8236=_0x455772['getUint32'](_0xde7aba,!![]);_0xde7aba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x2d9a0e={};for(let _0x269844=0x0;_0x269844<_0x1c8236;_0x269844++){let _0x11d7cc=_0x455772['getUint32'](_0xde7aba,!![]);_0xde7aba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x5e90fc=Cesium['getStringFromTypedArray'](_0x56d923,_0xde7aba,_0x11d7cc);_0xde7aba+=_0x11d7cc;let _0x4478d5=_0x455772['getUint32'](_0xde7aba,!![]);_0xde7aba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x190fdf=_0x455772['getUint32'](_0xde7aba,!![]);_0xde7aba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x339127,_0x2f3fba,_0x2a9b0a=_0x56d923;try{let _0x261134=new Uint8Array(_0x4904ff,_0xde7aba,_0x190fdf);_0x2a9b0a=_0x4e18b4['inflate'](_0x261134)['buffer'],_0x339127=new DataView(_0x2a9b0a),_0x2f3fba=0x0;}catch(_0x2e6b5c){if(_0x4478d5===_0x190fdf)_0x339127=_0x455772,_0x2f3fba=_0xde7aba;else continue;}let _0x14b0c8=_0x339127['getUint32'](_0x2f3fba,!![]);_0x2f3fba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x5e9efb=_0x339127['getUint32'](_0x2f3fba,!![]);_0x2f3fba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x328e48=_0x339127['getUint32'](_0x2f3fba,!![]);_0x2f3fba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x5ab423=_0x339127['getUint32'](_0x2f3fba,!![]);_0x2f3fba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x51fb2f=_0x339127['getUint32'](_0x2f3fba,!![]);_0x2f3fba+=Uint32Array['BYTES_PER_ELEMENT'];let _0x3ca51b=new Uint8Array(_0x2a9b0a,_0x2f3fba,_0x51fb2f);if(_0x14b0c8===0x1a){_0x3ca51b=_0x2a9b0a['slice'](_0x2f3fba,_0x2f3fba+_0x51fb2f);const _0x30bfdb=_0x528ed9['transcode']({'data':_0x3ca51b,'bMipMap':!![]});_0x3ca51b=_0x30bfdb['bufferView'];}_0x2d9a0e[_0x5e90fc]={'width':_0x5e9efb,'height':_0x328e48,'arrayBufferView':_0x3ca51b},_0xde7aba+=_0x190fdf;}let _0x224573={'keyWord':_0x37c521,'result':_0x2d9a0e,'byteLength':_0x4904ff['byteLength']},_0x3f34a9=_0x2eaab3['list']['add'](_0x224573);_0x2eaab3['cache'][_0x37c521]=_0x3f34a9,_0x2eaab3['state'][_0x37c521]=_0x100927['Ready'],delete _0x2eaab3['state'][_0x37c521],_0x99cb83+=_0x4904ff['byteLength'];let _0xfaa253=_0x2eaab3['list']['head'];while(_0x99cb83>_0x450236){let _0x5df6bd=_0xfaa253['item'],_0x6f08=_0xfaa253,_0x736123=_0x5df6bd['keyWord'],_0xd25476=_0x2eaab3['cache'][_0x736123],_0x3d0902=_0xd25476['item'];_0x99cb83-=_0x3d0902['byteLength'],delete _0x2eaab3['cache'][_0x736123],_0xfaa253=_0xfaa253['next'],_0x2eaab3['list']['remove'](_0x6f08);}},function(_0x586f1c){_0x2eaab3['state'][_0x37c521]=_0x586f1c?_0x100927['Failed']:_0x100927['UnLoad'];});},_0x5e5c90['prototype']['get']=function(_0x236289,_0x24b78d,_0x4cd4bc,_0x210d87){let _0x366068=_0x236289+'_'+_0x4cd4bc,_0x547cd5=this['cache'][_0x366068];if(_0x547cd5)return this['list']['splice'](this['list']['tail'],_0x547cd5),_0x547cd5['item'];let _0x24808e=this['state'][_0x366068];return!Cesium['defined'](_0x24808e)&&(_0x24808e=this['state'][_0x366068]=_0x100927['UnLoad']),_0x24808e===_0x100927['UnLoad']&&this['prepareRequest'](_0x236289,_0x24b78d,_0x4cd4bc,_0x210d87['tile'],_0x210d87),undefined;},_0x5e5c90['prototype']['del']=function(_0x22628f,_0x37722b){let _0x9085f=_0x22628f+'_'+_0x37722b;delete this['state'][_0x9085f];},_0x5e5c90['_singleInstance']=undefined,_0x5e5c90['getSingleInstance']=function(){return!_0x5e5c90['_singleInstance']&&(_0x5e5c90['_singleInstance']=new _0x5e5c90()),_0x5e5c90['_singleInstance'];};export default _0x5e5c90;