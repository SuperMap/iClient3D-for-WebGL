const _0x54663b=(function(){let _0x252440=!![];return function(_0x3fafa0,_0x2dc2e1){const _0x41c1a9=_0x252440?function(){if(_0x2dc2e1){const _0x50ac0c=_0x2dc2e1['apply'](_0x3fafa0,arguments);return _0x2dc2e1=null,_0x50ac0c;}}:function(){};return _0x252440=![],_0x41c1a9;};}()),_0xb2e1af=_0x54663b(this,function(){return _0xb2e1af['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0xb2e1af)['search']('(((.+)+)+)+$');});_0xb2e1af();import _0x4f9593 from'../ThirdParty/pako_inflate.js';import _0x1dfe56 from'../ThirdParty/defer.js';import _0x5cec4c from'../Core/CRNTranscoder.js';function _0xf0fe95(){this['state']={},this['cache']={},this['list']=new Cesium['DoublyLinkedList'](),this['pendingRequests']=[],this['promisePack']={},this['quadKeyPack']={},this['quadKeyIndexPack']={},this['requestHeapPack']={};}const _0x3d98d3={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _0x5b7f65=0x0;const _0x463c1d=0xc8*0x400*0x400,_0x4777d4=0x14;_0xf0fe95['prototype']['prepareRequest']=function(_0x237bac,_0x80fa5,_0x1df7cd,_0xcd509a,_0x396584){let _0x37e9a0=_0x237bac+'_'+_0x1df7cd,_0x203cc5=_0x80fa5+_0x1df7cd+'.texblock',_0x5d7b14=new Cesium['Request']({'url':_0x203cc5,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){return _0xcd509a['distanceToCamera'];}});_0x5d7b14['quadKey']=_0x1df7cd,_0x5d7b14['providerName']=_0x396584['tile']['layer']['name'],_0x5d7b14['keyWord']=_0x37e9a0,this['pendingRequests']['push'](_0x5d7b14);};let _0x547f6f=function(_0x1ba31d,_0x4b36ed){return _0x1ba31d['priority']-_0x4b36ed['priority'];};_0xf0fe95['prototype']['processRequests']=function(){if(this['pendingRequests']['length']<0x1)return;this['pendingRequests']['sort'](_0x547f6f),this['startPackRequest']();for(let _0x1810db=0x0,_0x41ee8f=this['pendingRequests']['length'];_0x1810db<_0x41ee8f;_0x1810db++){let _0x4b91fa=this['pendingRequests'][_0x1810db];this['request'](_0x4b91fa);}this['pendingRequests']['length']=0x0;};function _0x299002(_0x4c37c8){let _0x8455e3=[],_0x5d7f4b={},_0x5cd17b=0x0;for(let _0x32ea67=0x0,_0x3170ea=_0x4c37c8['length'];_0x32ea67<_0x3170ea;_0x32ea67++){let _0x1536cb=_0x4c37c8[_0x32ea67];if(_0x1536cb['cancelled'])continue;let _0x5a4d29=_0x1536cb['quadKey'];if(_0x5d7f4b[_0x5a4d29])continue;_0x5d7f4b[_0x5a4d29]=!![],_0x8455e3['push'](_0x5a4d29),_0x1536cb['quadKeyIndex']=_0x5cd17b++;}return _0x8455e3;}_0xf0fe95['prototype']['startPackRequest']=function(){let _0x4e8590=_0x299002(this['pendingRequests']),_0x386e25=_0x4e8590['join'](';'),_0x1395bd=this['pendingRequests'][0x0]['url'],_0x24d7ae=new Cesium['Resource']({'url':_0x1395bd,'queryParameters':{'extratiles':_0x386e25}}),_0x43dbc4=_0x1dfe56(),_0x325447=_0x24d7ae['fetchArrayBuffer']();if(!_0x325447)return;for(let _0x2b69ac=0x0,_0x2319c7=this['pendingRequests']['length'];_0x2b69ac<_0x2319c7;_0x2b69ac++){let _0x2c2ed2=this['pendingRequests'][_0x2b69ac];_0x2c2ed2['deferred']=_0x43dbc4;}_0x325447['then'](function(_0x3a0fcc){_0x43dbc4['resolve'](_0x3a0fcc);},_0x174fd4=>{_0x43dbc4['reject'](error);});};function _0x1468ce(_0x42a72d,_0x18fdec){let _0x22a787=new DataView(_0x42a72d),_0x24fe1f=0x0,_0x49462d=_0x22a787['getUint32'](_0x24fe1f,!![]);if(_0x18fdec>_0x49462d-0x1||_0x49462d>0x100)return undefined;_0x24fe1f+=0x4;let _0x895bbd=[],_0x438d29,_0x2797ee;for(_0x438d29=0x0;_0x438d29<_0x49462d;_0x438d29++){_0x2797ee=_0x22a787['getUint32'](_0x24fe1f,!![]),_0x895bbd['push'](_0x2797ee),_0x24fe1f+=0x4;}for(_0x438d29=0x0;_0x438d29<_0x49462d;_0x438d29++){_0x2797ee=_0x895bbd[_0x438d29];if(_0x438d29===_0x18fdec){if(_0x2797ee===0x0)return;return new Uint8Array(_0x42a72d)['slice'](_0x24fe1f,_0x24fe1f+_0x2797ee)['buffer'];}_0x24fe1f+=_0x2797ee;}return undefined;}_0xf0fe95['prototype']['request']=function(_0x49e5dc){let _0x243657=_0x49e5dc['keyWord'],_0x1eb195=_0x49e5dc['deferred']['promise'];this['state'][_0x243657]=_0x3d98d3['Loading'];let _0xded6ea=this;_0x1eb195['then'](function(_0x494db1){if(!Cesium['defined'](_0xded6ea['state'][_0x243657]))return;_0xded6ea['state'][_0x243657]=_0x3d98d3['Loaded'];let _0x34797c=_0x1468ce(_0x494db1,_0x49e5dc['quadKeyIndex']);if(!_0x34797c){_0xded6ea['state'][_0x243657]=_0x3d98d3['Failed'];return;}let _0x4d3ae1=new Uint8Array(_0x34797c),_0x1a8d50=new DataView(_0x34797c),_0x36f90a=0x0,_0x56e7d7=_0x1a8d50['getUint32'](_0x36f90a,!![]);_0x36f90a+=Uint32Array['BYTES_PER_ELEMENT'];let _0x446eaa={};for(let _0xfa297d=0x0;_0xfa297d<_0x56e7d7;_0xfa297d++){let _0x21e105=_0x1a8d50['getUint32'](_0x36f90a,!![]);_0x36f90a+=Uint32Array['BYTES_PER_ELEMENT'];let _0x10d26e=Cesium['getStringFromTypedArray'](_0x4d3ae1,_0x36f90a,_0x21e105);_0x36f90a+=_0x21e105;let _0x3ad448=_0x1a8d50['getUint32'](_0x36f90a,!![]);_0x36f90a+=Uint32Array['BYTES_PER_ELEMENT'];let _0xa18a3e=_0x1a8d50['getUint32'](_0x36f90a,!![]);_0x36f90a+=Uint32Array['BYTES_PER_ELEMENT'];let _0xc8562d,_0x457add,_0x39fc70=_0x4d3ae1;try{let _0x1162bd=new Uint8Array(_0x34797c,_0x36f90a,_0xa18a3e);_0x39fc70=_0x4f9593['inflate'](_0x1162bd)['buffer'],_0xc8562d=new DataView(_0x39fc70),_0x457add=0x0;}catch(_0x404784){if(_0x3ad448===_0xa18a3e)_0xc8562d=_0x1a8d50,_0x457add=_0x36f90a;else continue;}let _0x26ada6=_0xc8562d['getUint32'](_0x457add,!![]);_0x457add+=Uint32Array['BYTES_PER_ELEMENT'];let _0x3c1e39=_0xc8562d['getUint32'](_0x457add,!![]);_0x457add+=Uint32Array['BYTES_PER_ELEMENT'];let _0x5478eb=_0xc8562d['getUint32'](_0x457add,!![]);_0x457add+=Uint32Array['BYTES_PER_ELEMENT'];let _0x5d59ec=_0xc8562d['getUint32'](_0x457add,!![]);_0x457add+=Uint32Array['BYTES_PER_ELEMENT'];let _0x4c3e57=_0xc8562d['getUint32'](_0x457add,!![]);_0x457add+=Uint32Array['BYTES_PER_ELEMENT'];let _0x4b2a0f=new Uint8Array(_0x39fc70,_0x457add,_0x4c3e57);if(_0x26ada6===0x1a){_0x4b2a0f=_0x39fc70['slice'](_0x457add,_0x457add+_0x4c3e57);const _0x273a3f=_0x5cec4c['transcode']({'data':_0x4b2a0f,'bMipMap':!![]});_0x4b2a0f=_0x273a3f['bufferView'];}_0x446eaa[_0x10d26e]={'width':_0x3c1e39,'height':_0x5478eb,'arrayBufferView':_0x4b2a0f},_0x36f90a+=_0xa18a3e;}let _0x4a3056={'keyWord':_0x243657,'result':_0x446eaa,'byteLength':_0x34797c['byteLength']},_0x12d1df=_0xded6ea['list']['add'](_0x4a3056);_0xded6ea['cache'][_0x243657]=_0x12d1df,_0xded6ea['state'][_0x243657]=_0x3d98d3['Ready'],delete _0xded6ea['state'][_0x243657],_0x5b7f65+=_0x34797c['byteLength'];let _0x409769=_0xded6ea['list']['head'];while(_0x5b7f65>_0x463c1d){let _0x25303c=_0x409769['item'],_0x116020=_0x409769,_0x57bb18=_0x25303c['keyWord'],_0x5ead74=_0xded6ea['cache'][_0x57bb18],_0x4641e4=_0x5ead74['item'];_0x5b7f65-=_0x4641e4['byteLength'],delete _0xded6ea['cache'][_0x57bb18],_0x409769=_0x409769['next'],_0xded6ea['list']['remove'](_0x116020);}},function(_0xcf13be){_0xded6ea['state'][_0x243657]=_0xcf13be?_0x3d98d3['Failed']:_0x3d98d3['UnLoad'];});},_0xf0fe95['prototype']['get']=function(_0x4ced59,_0x337d20,_0x37838a,_0x1f9b06){let _0x302633=_0x4ced59+'_'+_0x37838a,_0xe59251=this['cache'][_0x302633];if(_0xe59251)return this['list']['splice'](this['list']['tail'],_0xe59251),_0xe59251['item'];let _0x38b559=this['state'][_0x302633];return!Cesium['defined'](_0x38b559)&&(_0x38b559=this['state'][_0x302633]=_0x3d98d3['UnLoad']),_0x38b559===_0x3d98d3['UnLoad']&&this['prepareRequest'](_0x4ced59,_0x337d20,_0x37838a,_0x1f9b06['tile'],_0x1f9b06),undefined;},_0xf0fe95['prototype']['del']=function(_0x55b74d,_0x34cd1f){let _0x29b995=_0x55b74d+'_'+_0x34cd1f;delete this['state'][_0x29b995];},_0xf0fe95['_singleInstance']=undefined,_0xf0fe95['getSingleInstance']=function(){return!_0xf0fe95['_singleInstance']&&(_0xf0fe95['_singleInstance']=new _0xf0fe95()),_0xf0fe95['_singleInstance'];};export default _0xf0fe95;