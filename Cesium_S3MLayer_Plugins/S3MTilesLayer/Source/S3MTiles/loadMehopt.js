var _0x3db340=(function(){var _0x10bcde=!![];return function(_0x397b86,_0x5863f9){var _0x4ab95f=_0x10bcde?function(){if(_0x5863f9){var _0x519673=_0x5863f9['apply'](_0x397b86,arguments);return _0x5863f9=null,_0x519673;}}:function(){};return _0x10bcde=![],_0x4ab95f;};}()),_0x16e8a4=_0x3db340(this,function(){return _0x16e8a4['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x16e8a4)['search']('(((.+)+)+)+$');});_0x16e8a4();import _0x212682 from'../S3MTiles/Enum/MeshOpt.js';import _0x207c6e from'../ThirdParty/meshopt_decoder.module.js';function _0x306ff8(_0x1b7907,_0x42fd60,_0xeabdf8){var _0x1e6070=_0x1b7907['typedArray'],_0x4f3a07=new _0xeabdf8(_0x1e6070['length']+_0x42fd60['length']);_0x4f3a07['set'](_0x1e6070,0x0),_0x4f3a07['set'](_0x42fd60,_0x1e6070['length']),_0x1b7907['typedArray']=_0x4f3a07;}function _0x1fb092(_0x369969,_0x3d7cd6,_0x3cd312,_0x2a88dc,_0x15bc41,_0x3aeac4,_0x53babe,_0x39d3a7,_0x40a15a,_0x3c4e0d){var _0x297dc7=0x0,_0x39f6aa,_0x448275=_0x15bc41['vertexAttributes'],_0x7cf9e5=_0x15bc41['attrLocation'];switch(_0x3d7cd6){case _0x212682['AttributeType_Normal']:case _0x212682['AttributeType_FirstTexcoord']:case _0x212682['AttributeType_SecondTexcoord']:_0x297dc7=Uint16Array['BYTES_PER_ELEMENT']*0x2;(_0x3aeac4&0x10)===0x0&&(_0x3d7cd6===_0x212682['AttributeType_FirstTexcoord']||_0x3d7cd6===_0x212682['AttributeType_SecondTexcoord'])&&(_0x297dc7=Float32Array['BYTES_PER_ELEMENT']*0x2);_0x39f6aa=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x369969*_0x297dc7);break;case _0x212682['AttributeType_Color']:case _0x212682['AttributeType_SecondColor']:_0x297dc7=Uint8Array['BYTES_PER_ELEMENT']*0x4,_0x39f6aa=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x369969*0x4);break;case _0x212682['AttributeType_Custom0']:_0x297dc7=Float32Array['BYTES_PER_ELEMENT']*_0x3cd312,_0x39f6aa=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x369969*_0x3cd312*0x4);break;case _0x212682['AttributeType_Custom1']:_0x297dc7=Float32Array['BYTES_PER_ELEMENT']*_0x3cd312,_0x39f6aa=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x369969*_0x3cd312*0x4);break;default:_0x297dc7=Uint16Array['BYTES_PER_ELEMENT']*0x4,_0x39f6aa=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x369969*_0x297dc7);break;}_0x207c6e['decodeVertexBuffer'](_0x39f6aa,_0x369969,_0x297dc7,_0x2a88dc,_0x2a88dc['length']);switch(_0x3d7cd6){case _0x212682['AttributeType_Position']:var _0x46c81c=new Uint16Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x2),_0x15bfb1=Cesium['ComponentDatatype']['SHORT'];if(Cesium['defined'](_0x53babe)){var _0x439d64=Cartesian3['unpackArray'](_0x46c81c);for(let _0x4f283d=0x0,_0x5852af=_0x439d64['length'];_0x4f283d<_0x5852af;_0x4f283d++){let _0x515a3c=_0x439d64[_0x4f283d];Cartesian3['multiplyByScalar'](_0x515a3c,_0x15bc41['vertCompressConstant'],_0x515a3c),Cartesian3['add'](_0x515a3c,_0x15bc41['minVerticesValue'],_0x515a3c);}var _0x5f352d=Matrix4['multiply'](_0x53babe['sphereMatrix'],_0x53babe['geoMatrix'],matModelScratch),_0x37f38f=Matrix4['multiply'](_0x53babe['ellipsoidMatrix'],_0x53babe['geoMatrix'],invMatModelScratch);Matrix4['inverse'](_0x37f38f,_0x37f38f);var _0x2afbe2=new Ellipsoid(0x615299,0x615299,0x615299);for(let _0x290b69=0x0,_0x7c0834=_0x439d64['length'];_0x290b69<_0x7c0834;_0x290b69++){let _0x36dabd=_0x439d64[_0x290b69];Matrix4['multiplyByPoint'](_0x5f352d,_0x36dabd,scratchCartesian3);let _0x1a6516=_0x2afbe2['cartesianToCartographic'](scratchCartesian3,geoPosScratch),_0x31a46a=radiansToCartesian3ForWGS84(_0x1a6516['longitude'],_0x1a6516['latitude'],_0x1a6516['height'],scratchCartesian3);Matrix4['multiplyByPoint'](_0x37f38f,_0x31a46a,_0x36dabd);}var _0x109f31=new Array(_0x439d64['length']*0x3);Cartesian3['packArray'](_0x439d64,_0x109f31),_0x46c81c=new Float32Array(_0x109f31),_0x15bfb1=Cesium['ComponentDatatype']['FLOAT'];}var _0x5ab63a=_0x7cf9e5['aPosition'];_0x5ab63a!==undefined?(_0x306ff8(_0x448275[_0x5ab63a],_0x46c81c,Uint16Array),_0x15bc41['preVertexCount']=_0x15bc41['verticesCount'],_0x15bc41['verticesCount']+=_0x369969):(_0x7cf9e5['aPosition']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aPosition'],'typedArray':_0x46c81c,'componentsPerAttribute':0x4,'componentDatatype':_0x15bfb1,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}),_0x15bc41['verticesCount']=_0x369969);if(!Cesium['defined'](_0x53babe)&&_0x39d3a7){var _0x5e8108=new Cesium['Cartographic'](),_0x1bda03=new Cesium['Cartographic'](),_0x2cc687=0x2,_0x2b037a=new Float32Array(_0x369969*_0x2cc687),_0x1fc8eb=new Float64Array(_0x369969*_0x2cc687),_0x3a234f=new Cesium['Cartesian3'](),_0x4280f4=new Cesium['Cartesian3'](),_0x27f3fa=new Cesium['Cartographic'](),_0x2afbe2;ellipsoid?_0x2afbe2=new Cesium['Ellipsoid'](0x615299,0x615299,6356752.314245179):_0x2afbe2=new Cesium['Ellipsoid'](0x615299,0x615299,0x615299);for(var _0x8352c3=0x0;_0x8352c3<_0x369969;_0x8352c3++){Matrix4['multiplyByPoint'](_0x3c4e0d,Cartesian3['fromElements'](_0x46c81c[0x4*_0x8352c3]*_0x15bc41['vertCompressConstant']+_0x15bc41['minVerticesValue']['x'],_0x46c81c[0x4*_0x8352c3+0x1]*_0x15bc41['vertCompressConstant']+_0x15bc41['minVerticesValue']['y'],_0x46c81c[0x4*_0x8352c3+0x2]*_0x15bc41['vertCompressConstant']+_0x15bc41['minVerticesValue']['z'],_0x3a234f),_0x4280f4),_0x27f3fa=_0x2afbe2['cartesianToCartographic'](_0x4280f4,geoPosScratch),_0x1fc8eb[0x2*_0x8352c3]=_0x27f3fa['longitude'],_0x1fc8eb[0x2*_0x8352c3+0x1]=_0x27f3fa['latitude'],_0x8352c3===0x0?(_0x5e8108['longitude']=_0x27f3fa['longitude'],_0x5e8108['latitude']=_0x27f3fa['latitude'],_0x1bda03['longitude']=_0x27f3fa['longitude'],_0x1bda03['latitude']=_0x27f3fa['latitude']):(_0x5e8108['longitude']=Math['max'](_0x27f3fa['longitude'],_0x5e8108['longitude']),_0x5e8108['latitude']=Math['max'](_0x27f3fa['latitude'],_0x5e8108['latitude']),_0x1bda03['longitude']=Math['min'](_0x27f3fa['longitude'],_0x1bda03['longitude']),_0x1bda03['latitude']=Math['min'](_0x27f3fa['latitude'],_0x1bda03['latitude']));}for(var _0x8352c3=0x0;_0x8352c3<_0x369969;_0x8352c3++){_0x2b037a[0x2*_0x8352c3]=_0x1fc8eb[0x2*_0x8352c3]-_0x1bda03['longitude'],_0x2b037a[0x2*_0x8352c3+0x1]=_0x1fc8eb[0x2*_0x8352c3+0x1]-_0x1bda03['latitude'];}_0x7cf9e5['img']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['img'],'typedArray':_0x2b037a,'componentsPerAttribute':_0x2cc687,'componentDatatype':ComponentDatatype['FLOAT'],'offsetInBytes':0x0,'strideInBytes':_0x2cc687*Float32Array['BYTES_PER_ELEMENT'],'normalize':![]}),_0x40a15a['max']=_0x5e8108,_0x40a15a['min']=_0x1bda03;}break;case _0x212682['AttributeType_Normal']:var _0x2db35b=0x2,_0x5ab63a=_0x7cf9e5['aNormal'],_0xd7d2e0=new Int16Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x2);_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0xd7d2e0,Uint16Array):(_0x7cf9e5['aNormal']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aNormal'],'typedArray':_0xd7d2e0,'componentsPerAttribute':_0x2db35b,'componentDatatype':Cesium['ComponentDatatype']['SHORT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x212682['AttributeType_FirstTexcoord']:var _0x2b53f3=new Uint16Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x2),_0x5ab63a=_0x7cf9e5['aTexCoord0'],_0x15bfb1=Cesium['ComponentDatatype']['SHORT'],_0x44c6f3=Uint16Array;(_0x3aeac4&0x10)===0x0&&(_0x15bfb1=Cesium['ComponentDatatype']['FLOAT'],_0x44c6f3=Float32Array,_0x2b53f3=new Float32Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x4));_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x2b53f3,_0x44c6f3):(_0x7cf9e5['aTexCoord0']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aTexCoord0'],'typedArray':_0x2b53f3,'componentsPerAttribute':0x2,'componentDatatype':_0x15bfb1,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x212682['AttributeType_SecondTexcoord']:var _0x2b53f3=new Uint16Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x2),_0x5ab63a=_0x7cf9e5['aTexCoord1'],_0x15bfb1=Cesium['ComponentDatatype']['SHORT'],_0x44c6f3=Uint16Array;(_0x3aeac4&0x10)===0x0&&(_0x15bfb1=Cesium['ComponentDatatype']['FLOAT'],_0x44c6f3=Float32Array,_0x2b53f3=new Float32Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x4));_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x2b53f3,_0x44c6f3):(_0x7cf9e5['aTexCoord1']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aTexCoord1'],'typedArray':_0x2b53f3,'componentsPerAttribute':0x2,'componentDatatype':_0x15bfb1,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x212682['AttributeType_Color']:var _0x5ab63a=_0x7cf9e5['aColor'];_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x39f6aa,Uint8Array):(_0x7cf9e5['aColor']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aColor'],'typedArray':_0x39f6aa,'componentsPerAttribute':0x4,'componentDatatype':Cesium['ComponentDatatype']['UNSIGNED_BYTE'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':!![]}));break;case _0x212682['AttributeType_SecondColor']:var _0x5ab63a=_0x7cf9e5['aSecondColor'];_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x39f6aa,Uint8Array):(_0x7cf9e5['aSecondColor']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aSecondColor'],'typedArray':_0x39f6aa,'componentsPerAttribute':0x4,'componentDatatype':Cesium['ComponentDatatype']['BYTE'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x212682['AttributeType_Custom0']:var _0x2b53f3=new Float32Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x4),_0x5ab63a=_0x7cf9e5['aCustom0']||_0x7cf9e5['aVertexWeight'];_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x2b53f3,Float32Array):(_0x7cf9e5['aCustom0']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aCustom0'],'typedArray':_0x2b53f3,'componentsPerAttribute':_0x3cd312,'componentDatatype':Cesium['ComponentDatatype']['FLOAT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x212682['AttributeType_Custom1']:var _0x1c9fa8=new Float32Array(_0x39f6aa['buffer'],0x0,_0x39f6aa['length']/0x4),_0x5ab63a=_0x7cf9e5['aCustom1']||_0x7cf9e5['aTextureCoordMatrix'];_0x5ab63a!==undefined?_0x306ff8(_0x448275[_0x5ab63a],_0x1c9fa8,Float32Array):(_0x7cf9e5['aCustom1']=_0x448275['length'],_0x448275['push']({'index':_0x7cf9e5['aCustom1'],'typedArray':_0x1c9fa8,'componentsPerAttribute':_0x3cd312,'componentDatatype':Cesium['ComponentDatatype']['FLOAT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;default:break;}}export default _0x1fb092;