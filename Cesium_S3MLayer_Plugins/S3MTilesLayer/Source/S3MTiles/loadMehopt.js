var _0x8b872c=(function(){var _0x1920cf=!![];return function(_0x38b1e1,_0x1aafc8){var _0x446dc1=_0x1920cf?function(){if(_0x1aafc8){var _0x1c0ad0=_0x1aafc8['apply'](_0x38b1e1,arguments);return _0x1aafc8=null,_0x1c0ad0;}}:function(){};return _0x1920cf=![],_0x446dc1;};}()),_0x2e6cd9=_0x8b872c(this,function(){return _0x2e6cd9['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x2e6cd9)['search']('(((.+)+)+)+$');});_0x2e6cd9();import _0x4595ba from'../S3MTiles/Enum/MeshOpt.js';import _0x48954c from'../ThirdParty/meshopt_decoder.module.js';function _0x2c59f1(_0x4a6461,_0x1f9838,_0x1136b4){var _0x3112c4=_0x4a6461['typedArray'],_0x36593e=new _0x1136b4(_0x3112c4['length']+_0x1f9838['length']);_0x36593e['set'](_0x3112c4,0x0),_0x36593e['set'](_0x1f9838,_0x3112c4['length']),_0x4a6461['typedArray']=_0x36593e;}function _0x28f3a0(_0x3674df,_0x8ac57e,_0x242038,_0x4f708d,_0x5ba4fc,_0xab0a3b,_0x36521e,_0x2137c9,_0x5289f3,_0x187e44){var _0x533949=0x0,_0x54259f,_0x2de512=_0x5ba4fc['vertexAttributes'],_0x165b77=_0x5ba4fc['attrLocation'];switch(_0x8ac57e){case _0x4595ba['AttributeType_Normal']:case _0x4595ba['AttributeType_FirstTexcoord']:case _0x4595ba['AttributeType_SecondTexcoord']:_0x533949=Uint16Array['BYTES_PER_ELEMENT']*0x2;(_0xab0a3b&0x10)===0x0&&(_0x8ac57e===_0x4595ba['AttributeType_FirstTexcoord']||_0x8ac57e===_0x4595ba['AttributeType_SecondTexcoord'])&&(_0x533949=Float32Array['BYTES_PER_ELEMENT']*0x2);_0x54259f=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x3674df*_0x533949);break;case _0x4595ba['AttributeType_Color']:case _0x4595ba['AttributeType_SecondColor']:_0x533949=Uint8Array['BYTES_PER_ELEMENT']*0x4,_0x54259f=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x3674df*0x4);break;case _0x4595ba['AttributeType_Custom0']:_0x533949=Float32Array['BYTES_PER_ELEMENT']*_0x242038,_0x54259f=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x3674df*_0x242038*0x4);break;case _0x4595ba['AttributeType_Custom1']:_0x533949=Float32Array['BYTES_PER_ELEMENT']*_0x242038,_0x54259f=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x3674df*_0x242038*0x4);break;default:_0x533949=Uint16Array['BYTES_PER_ELEMENT']*0x4,_0x54259f=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_BYTE'],_0x3674df*_0x533949);break;}_0x48954c['decodeVertexBuffer'](_0x54259f,_0x3674df,_0x533949,_0x4f708d,_0x4f708d['length']);switch(_0x8ac57e){case _0x4595ba['AttributeType_Position']:var _0x49f13a=new Uint16Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x2),_0x2accb9=Cesium['ComponentDatatype']['SHORT'];if(Cesium['defined'](_0x36521e)){var _0x596dc5=Cartesian3['unpackArray'](_0x49f13a);for(let _0x2948d6=0x0,_0x3a8f98=_0x596dc5['length'];_0x2948d6<_0x3a8f98;_0x2948d6++){let _0x2b6214=_0x596dc5[_0x2948d6];Cartesian3['multiplyByScalar'](_0x2b6214,_0x5ba4fc['vertCompressConstant'],_0x2b6214),Cartesian3['add'](_0x2b6214,_0x5ba4fc['minVerticesValue'],_0x2b6214);}var _0x1b1f4c=Matrix4['multiply'](_0x36521e['sphereMatrix'],_0x36521e['geoMatrix'],matModelScratch),_0x35dc28=Matrix4['multiply'](_0x36521e['ellipsoidMatrix'],_0x36521e['geoMatrix'],invMatModelScratch);Matrix4['inverse'](_0x35dc28,_0x35dc28);var _0x4c9ba2=new Ellipsoid(0x615299,0x615299,0x615299);for(let _0x2381e8=0x0,_0x579595=_0x596dc5['length'];_0x2381e8<_0x579595;_0x2381e8++){let _0x32c675=_0x596dc5[_0x2381e8];Matrix4['multiplyByPoint'](_0x1b1f4c,_0x32c675,scratchCartesian3);let _0x539689=_0x4c9ba2['cartesianToCartographic'](scratchCartesian3,geoPosScratch),_0x245f74=radiansToCartesian3ForWGS84(_0x539689['longitude'],_0x539689['latitude'],_0x539689['height'],scratchCartesian3);Matrix4['multiplyByPoint'](_0x35dc28,_0x245f74,_0x32c675);}var _0x149e75=new Array(_0x596dc5['length']*0x3);Cartesian3['packArray'](_0x596dc5,_0x149e75),_0x49f13a=new Float32Array(_0x149e75),_0x2accb9=Cesium['ComponentDatatype']['FLOAT'];}var _0x53e859=_0x165b77['aPosition'];_0x53e859!==undefined?(_0x2c59f1(_0x2de512[_0x53e859],_0x49f13a,Uint16Array),_0x5ba4fc['preVertexCount']=_0x5ba4fc['verticesCount'],_0x5ba4fc['verticesCount']+=_0x3674df):(_0x165b77['aPosition']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aPosition'],'typedArray':_0x49f13a,'componentsPerAttribute':0x4,'componentDatatype':_0x2accb9,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}),_0x5ba4fc['verticesCount']=_0x3674df);if(!Cesium['defined'](_0x36521e)&&_0x2137c9){var _0x5b80ec=new Cesium['Cartographic'](),_0x43befa=new Cesium['Cartographic'](),_0x55f1af=0x2,_0x31cbf6=new Float32Array(_0x3674df*_0x55f1af),_0x30272e=new Float64Array(_0x3674df*_0x55f1af),_0x5f444e=new Cesium['Cartesian3'](),_0xc53396=new Cesium['Cartesian3'](),_0xd98232=new Cesium['Cartographic'](),_0x4c9ba2;ellipsoid?_0x4c9ba2=new Cesium['Ellipsoid'](0x615299,0x615299,6356752.314245179):_0x4c9ba2=new Cesium['Ellipsoid'](0x615299,0x615299,0x615299);for(var _0x3ea0ae=0x0;_0x3ea0ae<_0x3674df;_0x3ea0ae++){Matrix4['multiplyByPoint'](_0x187e44,Cartesian3['fromElements'](_0x49f13a[0x4*_0x3ea0ae]*_0x5ba4fc['vertCompressConstant']+_0x5ba4fc['minVerticesValue']['x'],_0x49f13a[0x4*_0x3ea0ae+0x1]*_0x5ba4fc['vertCompressConstant']+_0x5ba4fc['minVerticesValue']['y'],_0x49f13a[0x4*_0x3ea0ae+0x2]*_0x5ba4fc['vertCompressConstant']+_0x5ba4fc['minVerticesValue']['z'],_0x5f444e),_0xc53396),_0xd98232=_0x4c9ba2['cartesianToCartographic'](_0xc53396,geoPosScratch),_0x30272e[0x2*_0x3ea0ae]=_0xd98232['longitude'],_0x30272e[0x2*_0x3ea0ae+0x1]=_0xd98232['latitude'],_0x3ea0ae===0x0?(_0x5b80ec['longitude']=_0xd98232['longitude'],_0x5b80ec['latitude']=_0xd98232['latitude'],_0x43befa['longitude']=_0xd98232['longitude'],_0x43befa['latitude']=_0xd98232['latitude']):(_0x5b80ec['longitude']=Math['max'](_0xd98232['longitude'],_0x5b80ec['longitude']),_0x5b80ec['latitude']=Math['max'](_0xd98232['latitude'],_0x5b80ec['latitude']),_0x43befa['longitude']=Math['min'](_0xd98232['longitude'],_0x43befa['longitude']),_0x43befa['latitude']=Math['min'](_0xd98232['latitude'],_0x43befa['latitude']));}for(var _0x3ea0ae=0x0;_0x3ea0ae<_0x3674df;_0x3ea0ae++){_0x31cbf6[0x2*_0x3ea0ae]=_0x30272e[0x2*_0x3ea0ae]-_0x43befa['longitude'],_0x31cbf6[0x2*_0x3ea0ae+0x1]=_0x30272e[0x2*_0x3ea0ae+0x1]-_0x43befa['latitude'];}_0x165b77['img']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['img'],'typedArray':_0x31cbf6,'componentsPerAttribute':_0x55f1af,'componentDatatype':ComponentDatatype['FLOAT'],'offsetInBytes':0x0,'strideInBytes':_0x55f1af*Float32Array['BYTES_PER_ELEMENT'],'normalize':![]}),_0x5289f3['max']=_0x5b80ec,_0x5289f3['min']=_0x43befa;}break;case _0x4595ba['AttributeType_Normal']:var _0x3d0fb6=0x2,_0x53e859=_0x165b77['aNormal'],_0x33044a=new Int16Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x2);_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x33044a,Uint16Array):(_0x165b77['aNormal']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aNormal'],'typedArray':_0x33044a,'componentsPerAttribute':_0x3d0fb6,'componentDatatype':Cesium['ComponentDatatype']['SHORT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x4595ba['AttributeType_FirstTexcoord']:var _0x20c322=new Uint16Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x2),_0x53e859=_0x165b77['aTexCoord0'],_0x2accb9=Cesium['ComponentDatatype']['SHORT'],_0x196b5e=Uint16Array;(_0xab0a3b&0x10)===0x0&&(_0x2accb9=Cesium['ComponentDatatype']['FLOAT'],_0x196b5e=Float32Array,_0x20c322=new Float32Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x4));_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x20c322,_0x196b5e):(_0x165b77['aTexCoord0']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aTexCoord0'],'typedArray':_0x20c322,'componentsPerAttribute':0x2,'componentDatatype':_0x2accb9,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x4595ba['AttributeType_SecondTexcoord']:var _0x20c322=new Uint16Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x2),_0x53e859=_0x165b77['aTexCoord1'],_0x2accb9=Cesium['ComponentDatatype']['SHORT'],_0x196b5e=Uint16Array;(_0xab0a3b&0x10)===0x0&&(_0x2accb9=Cesium['ComponentDatatype']['FLOAT'],_0x196b5e=Float32Array,_0x20c322=new Float32Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x4));_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x20c322,_0x196b5e):(_0x165b77['aTexCoord1']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aTexCoord1'],'typedArray':_0x20c322,'componentsPerAttribute':0x2,'componentDatatype':_0x2accb9,'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x4595ba['AttributeType_Color']:var _0x53e859=_0x165b77['aColor'];_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x54259f,Uint8Array):(_0x165b77['aColor']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aColor'],'typedArray':_0x54259f,'componentsPerAttribute':0x4,'componentDatatype':Cesium['ComponentDatatype']['UNSIGNED_BYTE'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':!![]}));break;case _0x4595ba['AttributeType_SecondColor']:var _0x53e859=_0x165b77['aSecondColor'];_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x54259f,Uint8Array):(_0x165b77['aSecondColor']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aSecondColor'],'typedArray':_0x54259f,'componentsPerAttribute':0x4,'componentDatatype':Cesium['ComponentDatatype']['BYTE'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x4595ba['AttributeType_Custom0']:var _0x20c322=new Float32Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x4),_0x53e859=_0x165b77['aCustom0']||_0x165b77['aVertexWeight'];_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x20c322,Float32Array):(_0x165b77['aCustom0']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aCustom0'],'typedArray':_0x20c322,'componentsPerAttribute':_0x242038,'componentDatatype':Cesium['ComponentDatatype']['FLOAT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;case _0x4595ba['AttributeType_Custom1']:var _0x23514f=new Float32Array(_0x54259f['buffer'],0x0,_0x54259f['length']/0x4),_0x53e859=_0x165b77['aCustom1']||_0x165b77['aTextureCoordMatrix'];_0x53e859!==undefined?_0x2c59f1(_0x2de512[_0x53e859],_0x23514f,Float32Array):(_0x165b77['aCustom1']=_0x2de512['length'],_0x2de512['push']({'index':_0x165b77['aCustom1'],'typedArray':_0x23514f,'componentsPerAttribute':_0x242038,'componentDatatype':Cesium['ComponentDatatype']['FLOAT'],'offsetInBytes':0x0,'strideInBytes':0x0,'normalize':![]}));break;default:break;}}export default _0x28f3a0;