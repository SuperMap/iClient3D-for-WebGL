const _0x13c416=(function(){let _0x59588d=!![];return function(_0x491091,_0x5d3803){const _0x5b416b=_0x59588d?function(){if(_0x5d3803){const _0x2c9924=_0x5d3803['apply'](_0x491091,arguments);return _0x5d3803=null,_0x2c9924;}}:function(){};return _0x59588d=![],_0x5b416b;};}()),_0x5c03a6=_0x13c416(this,function(){return _0x5c03a6['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x5c03a6)['search']('(((.+)+)+)+$');});_0x5c03a6();import _0x33a8fe from'../Shaders/FresnelVp.js';import _0x2f5e20 from'../Shaders/FresnelFp.js';import _0x59db05 from'./RenderEntity.js';import _0x3f021b from'../getComUniformMap.js';function _0x18de89(_0x1434f1){_0x59db05['call'](this,_0x1434f1),this['vs']=_0x33a8fe,this['fs']=_0x2f5e20,this['waterIndex']=-0x1,this['waterTime']=0x0;}_0x18de89['prototype']=Object['create'](_0x59db05['prototype']),_0x18de89['prototype']['constructor']=_0x59db05;function _0x5beca7(){return Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium['DepthFunction']['LESS_OR_EQUAL']},'blending':Cesium['BlendingState']['ALPHA_BLEND']});}function _0x479839(_0x3dc7f6,_0x2afc0b,_0x415d52){return{'uGeoMatrix':function(){return _0x415d52['geoMatrix'];},'uFillForeColor':function(){return _0x2afc0b['style3D']['fillForeColor'];},'uReflectMap':function(){let _0x3f5fa8=_0x2afc0b['context']['reflectFramebuffer']&&_0x2afc0b['context']['reflectFramebuffer']['sceneFramebuffer']&&_0x2afc0b['context']['reflectFramebuffer']['sceneFramebuffer']['getFramebuffer']();if(!_0x3f5fa8)return _0x2afc0b['context']['defaultTexture'];return _0x3f5fa8['getColorTexture'](0x0);},'uNoiseMap':function(){return _0x2afc0b['context']['defaultTexture'];},'uTimeVal':function(){let _0x143624=_0x2afc0b['_waterParameters']['timeVal']*0.01;return _0x415d52['waterTime']=_0x415d52['waterTime']>0x1?_0x143624:_0x415d52['waterTime']+_0x143624,_0x415d52['waterTime'];},'uScale':function(){return _0x2afc0b['_waterParameters']['scale'];},'uScroll':function(){return _0x2afc0b['_waterParameters']['scroll'];},'uNoise':function(){return _0x2afc0b['_waterParameters']['noise'];},'uBumpSpeed':function(){return _0x2afc0b['_waterParameters']['bumpSpeed'];},'uFresnelPower':function(){return _0x2afc0b['_waterParameters']['fresnelPower'];},'uMinFresnel':function(){return _0x2afc0b['_waterParameters']['minFresnel'];},'uMaxFresnel':function(){return _0x2afc0b['_waterParameters']['maxFresnel'];},'uTintColour':function(){return _0x2afc0b['_waterParameters']['tintColour'];},'uNoiseScale':function(){return _0x2afc0b['_waterParameters']['noiseScale'];},'uWaterColour':function(){return _0x2afc0b['_waterParameters']['waterColour'];},'uWaterBrightness':function(){return _0x2afc0b['_waterParameters']['waterBrightness'];}};}_0x18de89['prototype']['createCommand']=function(){if(Cesium['defined'](this['colorCommand'])||this['vertexBufferToCreate']['length']!==0x0||this['indexBufferToCreate']['length']!==0x0||this['shaderProgramToCreate']['length']!==0x0)return;let _0x5a0d2a=this['layer'],_0xc56e34=_0x5a0d2a['context'],_0x2fb996=this['vertexPackage'],_0x47677c=this['arrIndexPackage'],_0x2c795d=_0x2fb996['vertexAttributes'];if(_0x47677c['length']<0x1)return;let _0x295292=_0x47677c[0x0],_0x2a5c51=this['material'];this['vertexArray']=new Cesium['VertexArray']({'context':_0xc56e34,'attributes':_0x2c795d,'indexBuffer':_0x295292['indexBuffer']}),this['colorCommand']=new Cesium['DrawCommand']({'primitiveType':_0x295292['primitiveType'],'modelMatrix':this['modelMatrix'],'boundingVolume':this['boundingVolume'],'vertexArray':this['vertexArray'],'shaderProgram':this['shaderProgram'],'pass':_0x2a5c51['bTransparentSorting']?Cesium['Pass']['TRANSLUCENT']:Cesium['Pass']['CESIUM_3D_TILE'],'renderState':_0x2a5c51['bTransparentSorting']?getTransparentRenderState():_0x5beca7(),'instanceCount':_0x2fb996['instanceCount']});let _0x428199=_0x479839(_0x2a5c51,_0x5a0d2a,this);Object['assign'](_0x428199,_0x3f021b(_0x5a0d2a)),this['colorCommand']['uniformMap']=this['batchTable']['getUniformMapCallback']()(_0x428199),this['vertexPackage']=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this['ready']=!![];};function _0x5868e2(_0x3edfd1,_0x6285df){let _0x33ce8b={'boundingVolume':_0x3edfd1['boundingVolume'],'distance':_0x6285df['style3D']['bottomAltitude']+_0x6285df['_waterParameters']['averageHeight']};_0x3edfd1['waterIndex']=_0x6285df['addWaterPlane'](_0x33ce8b);}_0x18de89['prototype']['transformResource']=function(_0x1302f3,_0x21d8d6){if(this['ready'])return;this['createBatchTable'](_0x1302f3),this['createPickIds'](),this['createBuffers'](_0x1302f3),this['createShaderProgram'](_0x1302f3),this['createCommand'](_0x1302f3),this['initLayerSetting'](_0x21d8d6),_0x5868e2(this,_0x21d8d6);},_0x18de89['prototype']['update']=function(_0x224425,_0x123da5){if(_0x224425['camera']['bReflect'])return;this['batchTableDirty']&&(this['updateBatchTableAttributes'](),this['batchTableDirty']=![]),this['batchTable']['update'](_0x224425),_0x224425['commandList']['push'](this['colorCommand']);},_0x18de89['prototype']['isDestroyed']=function(){return![];},_0x18de89['prototype']['destroy']=function(){return this['shaderProgram']=this['shaderProgram']&&!this['shaderProgram']['isDestroyed']()&&this['shaderProgram']['destroy'](),this['vertexArray']=this['vertexArray']&&!this['vertexArray']['isDestroyed']()&&this['vertexArray']['destroy'](),this['material']=this['material']&&!this['material']['isDestroyed']()&&this['material']['destroy'](),this['batchTable']=this['batchTable']&&!this['batchTable']['isDestroyed']()&&this['batchTable']['destroy'](),this['waterIndex']>-0x1&&this['layer']['removeWaterPlane'](this['waterIndex']),this['colorCommand']=undefined,this['vertexPackage']=null,this['arrIndexPackage']=null,this['modelMatrix']=undefined,this['pickInfo']=undefined,this['selectionInfoMap']=undefined,this['vs']=undefined,this['fs']=undefined,Cesium['destroyObject'](this);};export default _0x18de89;