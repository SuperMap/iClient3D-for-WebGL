const _0x2e965b=(function(){let _0x59dd85=!![];return function(_0x2fc6a0,_0x41f850){const _0x12ac00=_0x59dd85?function(){if(_0x41f850){const _0x3b5696=_0x41f850['apply'](_0x2fc6a0,arguments);return _0x41f850=null,_0x3b5696;}}:function(){};return _0x59dd85=![],_0x12ac00;};}()),_0x512910=_0x2e965b(this,function(){return _0x512910['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x512910)['search']('(((.+)+)+)+$');});_0x512910();import _0x3ad6ce from'../Shaders/FresnelVp.js';import _0x234208 from'../Shaders/FresnelFp.js';import _0x1c1d12 from'./RenderEntity.js';import _0x58f9aa from'../getComUniformMap.js';function _0x5c7285(_0x206e10){_0x1c1d12['call'](this,_0x206e10),this['vs']=_0x3ad6ce,this['fs']=_0x234208,this['waterIndex']=-0x1,this['waterTime']=0x0;}_0x5c7285['prototype']=Object['create'](_0x1c1d12['prototype']),_0x5c7285['prototype']['constructor']=_0x1c1d12;function _0x56d141(){return Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium['DepthFunction']['LESS_OR_EQUAL']},'blending':Cesium['BlendingState']['ALPHA_BLEND']});}function _0x433235(_0x3327f8,_0x50af59,_0x46a3d7){return{'uGeoMatrix':function(){return _0x46a3d7['geoMatrix'];},'uFillForeColor':function(){return _0x50af59['style3D']['fillForeColor'];},'uReflectMap':function(){let _0x50fa68=_0x50af59['context']['reflectFramebuffer']&&_0x50af59['context']['reflectFramebuffer']['sceneFramebuffer']&&_0x50af59['context']['reflectFramebuffer']['sceneFramebuffer']['getFramebuffer']();if(!_0x50fa68)return _0x50af59['context']['defaultTexture'];return _0x50fa68['getColorTexture'](0x0);},'uNoiseMap':function(){return _0x50af59['context']['defaultTexture'];},'uTimeVal':function(){let _0x540397=_0x50af59['_waterParameters']['timeVal']*0.01;return _0x46a3d7['waterTime']=_0x46a3d7['waterTime']>0x1?_0x540397:_0x46a3d7['waterTime']+_0x540397,_0x46a3d7['waterTime'];},'uScale':function(){return _0x50af59['_waterParameters']['scale'];},'uScroll':function(){return _0x50af59['_waterParameters']['scroll'];},'uNoise':function(){return _0x50af59['_waterParameters']['noise'];},'uBumpSpeed':function(){return _0x50af59['_waterParameters']['bumpSpeed'];},'uFresnelPower':function(){return _0x50af59['_waterParameters']['fresnelPower'];},'uMinFresnel':function(){return _0x50af59['_waterParameters']['minFresnel'];},'uMaxFresnel':function(){return _0x50af59['_waterParameters']['maxFresnel'];},'uTintColour':function(){return _0x50af59['_waterParameters']['tintColour'];},'uNoiseScale':function(){return _0x50af59['_waterParameters']['noiseScale'];},'uWaterColour':function(){return _0x50af59['_waterParameters']['waterColour'];},'uWaterBrightness':function(){return _0x50af59['_waterParameters']['waterBrightness'];}};}_0x5c7285['prototype']['createCommand']=function(){if(Cesium['defined'](this['colorCommand'])||this['vertexBufferToCreate']['length']!==0x0||this['indexBufferToCreate']['length']!==0x0||this['shaderProgramToCreate']['length']!==0x0)return;let _0x4adc85=this['layer'],_0x111ca1=_0x4adc85['context'],_0x131081=this['vertexPackage'],_0x2dbb6a=this['arrIndexPackage'],_0x5a2a6f=_0x131081['vertexAttributes'];if(_0x2dbb6a['length']<0x1)return;let _0x25972a=_0x2dbb6a[0x0],_0x367ea6=this['material'];this['vertexArray']=new Cesium['VertexArray']({'context':_0x111ca1,'attributes':_0x5a2a6f,'indexBuffer':_0x25972a['indexBuffer']}),this['colorCommand']=new Cesium['DrawCommand']({'primitiveType':_0x25972a['primitiveType'],'modelMatrix':this['modelMatrix'],'boundingVolume':this['boundingVolume'],'vertexArray':this['vertexArray'],'shaderProgram':this['shaderProgram'],'pass':_0x367ea6['bTransparentSorting']?Cesium['Pass']['TRANSLUCENT']:Cesium['Pass']['CESIUM_3D_TILE'],'renderState':_0x367ea6['bTransparentSorting']?getTransparentRenderState():_0x56d141(),'instanceCount':_0x131081['instanceCount']});let _0x3a4279=_0x433235(_0x367ea6,_0x4adc85,this);Object['assign'](_0x3a4279,_0x58f9aa(_0x4adc85)),this['colorCommand']['uniformMap']=this['batchTable']['getUniformMapCallback']()(_0x3a4279),this['vertexPackage']=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this['ready']=!![];};function _0x5f0dd1(_0x15b417,_0xd1df9d){let _0x3a4518={'boundingVolume':_0x15b417['boundingVolume'],'distance':_0xd1df9d['style3D']['bottomAltitude']+_0xd1df9d['_waterParameters']['averageHeight']};_0x15b417['waterIndex']=_0xd1df9d['addWaterPlane'](_0x3a4518);}_0x5c7285['prototype']['transformResource']=function(_0x2295b0,_0x30d886){if(this['ready'])return;this['createBatchTable'](_0x2295b0),this['createPickIds'](),this['createBuffers'](_0x2295b0),this['createShaderProgram'](_0x2295b0),this['createCommand'](_0x2295b0),this['initLayerSetting'](_0x30d886),_0x5f0dd1(this,_0x30d886);},_0x5c7285['prototype']['update']=function(_0x582801,_0xb7bc79){if(_0x582801['camera']['bReflect'])return;this['batchTableDirty']&&(this['updateBatchTableAttributes'](),this['batchTableDirty']=![]),this['batchTable']['update'](_0x582801),_0x582801['commandList']['push'](this['colorCommand']);},_0x5c7285['prototype']['isDestroyed']=function(){return![];},_0x5c7285['prototype']['destroy']=function(){return this['shaderProgram']=this['shaderProgram']&&!this['shaderProgram']['isDestroyed']()&&this['shaderProgram']['destroy'](),this['vertexArray']=this['vertexArray']&&!this['vertexArray']['isDestroyed']()&&this['vertexArray']['destroy'](),this['material']=this['material']&&!this['material']['isDestroyed']()&&this['material']['destroy'](),this['batchTable']=this['batchTable']&&!this['batchTable']['isDestroyed']()&&this['batchTable']['destroy'](),this['waterIndex']>-0x1&&this['layer']['removeWaterPlane'](this['waterIndex']),this['colorCommand']=undefined,this['vertexPackage']=null,this['arrIndexPackage']=null,this['modelMatrix']=undefined,this['pickInfo']=undefined,this['selectionInfoMap']=undefined,this['vs']=undefined,this['fs']=undefined,Cesium['destroyObject'](this);};export default _0x5c7285;