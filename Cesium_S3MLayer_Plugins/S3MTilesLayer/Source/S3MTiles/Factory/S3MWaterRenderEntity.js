const _0x258264=(function(){let _0x54599f=!![];return function(_0x19b1b3,_0x4a469c){const _0x5077d3=_0x54599f?function(){if(_0x4a469c){const _0x2a0b80=_0x4a469c['apply'](_0x19b1b3,arguments);return _0x4a469c=null,_0x2a0b80;}}:function(){};return _0x54599f=![],_0x5077d3;};}()),_0x433c3c=_0x258264(this,function(){return _0x433c3c['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x433c3c)['search']('(((.+)+)+)+$');});_0x433c3c();import _0x3f6895 from'../Shaders/FresnelVp.js';import _0x4fba1f from'../Shaders/FresnelFp.js';import _0x3b82b1 from'./RenderEntity.js';import _0x2698b6 from'../getComUniformMap.js';function _0x19852c(_0x8a1a43){_0x3b82b1['call'](this,_0x8a1a43),this['vs']=_0x3f6895,this['fs']=_0x4fba1f,this['waterIndex']=-0x1,this['waterTime']=0x0;}_0x19852c['prototype']=Object['create'](_0x3b82b1['prototype']),_0x19852c['prototype']['constructor']=_0x3b82b1;function _0x2d1f0d(){return Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium['DepthFunction']['LESS_OR_EQUAL']},'blending':Cesium['BlendingState']['ALPHA_BLEND']});}function _0x58ee78(_0x579aac,_0x1bd373,_0x2a33d8){return{'uGeoMatrix':function(){return _0x2a33d8['geoMatrix'];},'uFillForeColor':function(){return _0x1bd373['style3D']['fillForeColor'];},'uReflectMap':function(){let _0x397dfa=_0x1bd373['context']['reflectFramebuffer']&&_0x1bd373['context']['reflectFramebuffer']['sceneFramebuffer']&&_0x1bd373['context']['reflectFramebuffer']['sceneFramebuffer']['getFramebuffer']();if(!_0x397dfa)return _0x1bd373['context']['defaultTexture'];return _0x397dfa['getColorTexture'](0x0);},'uNoiseMap':function(){return _0x1bd373['context']['defaultTexture'];},'uTimeVal':function(){let _0x34d08b=_0x1bd373['_waterParameters']['timeVal']*0.01;return _0x2a33d8['waterTime']=_0x2a33d8['waterTime']>0x1?_0x34d08b:_0x2a33d8['waterTime']+_0x34d08b,_0x2a33d8['waterTime'];},'uScale':function(){return _0x1bd373['_waterParameters']['scale'];},'uScroll':function(){return _0x1bd373['_waterParameters']['scroll'];},'uNoise':function(){return _0x1bd373['_waterParameters']['noise'];},'uBumpSpeed':function(){return _0x1bd373['_waterParameters']['bumpSpeed'];},'uFresnelPower':function(){return _0x1bd373['_waterParameters']['fresnelPower'];},'uMinFresnel':function(){return _0x1bd373['_waterParameters']['minFresnel'];},'uMaxFresnel':function(){return _0x1bd373['_waterParameters']['maxFresnel'];},'uTintColour':function(){return _0x1bd373['_waterParameters']['tintColour'];},'uNoiseScale':function(){return _0x1bd373['_waterParameters']['noiseScale'];},'uWaterColour':function(){return _0x1bd373['_waterParameters']['waterColour'];},'uWaterBrightness':function(){return _0x1bd373['_waterParameters']['waterBrightness'];}};}_0x19852c['prototype']['createCommand']=function(){if(Cesium['defined'](this['colorCommand'])||this['vertexBufferToCreate']['length']!==0x0||this['indexBufferToCreate']['length']!==0x0||this['shaderProgramToCreate']['length']!==0x0)return;let _0x5f57f6=this['layer'],_0x35c2ab=_0x5f57f6['context'],_0x14c31f=this['vertexPackage'],_0x5ac984=this['arrIndexPackage'],_0x39c8b5=_0x14c31f['vertexAttributes'];if(_0x5ac984['length']<0x1)return;let _0x1c3c57=_0x5ac984[0x0],_0x1f3672=this['material'];this['vertexArray']=new Cesium['VertexArray']({'context':_0x35c2ab,'attributes':_0x39c8b5,'indexBuffer':_0x1c3c57['indexBuffer']}),this['colorCommand']=new Cesium['DrawCommand']({'primitiveType':_0x1c3c57['primitiveType'],'modelMatrix':this['modelMatrix'],'boundingVolume':this['boundingVolume'],'vertexArray':this['vertexArray'],'shaderProgram':this['shaderProgram'],'pass':_0x1f3672['bTransparentSorting']?Cesium['Pass']['TRANSLUCENT']:Cesium['Pass']['CESIUM_3D_TILE'],'renderState':_0x1f3672['bTransparentSorting']?getTransparentRenderState():_0x2d1f0d(),'instanceCount':_0x14c31f['instanceCount']});let _0xbea45c=_0x58ee78(_0x1f3672,_0x5f57f6,this);Object['assign'](_0xbea45c,_0x2698b6(_0x5f57f6)),this['colorCommand']['uniformMap']=this['batchTable']['getUniformMapCallback']()(_0xbea45c),this['vertexPackage']=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this['ready']=!![];};function _0xd8a9e1(_0x22750a,_0x4fe20c){let _0x21aaf3={'boundingVolume':_0x22750a['boundingVolume'],'distance':_0x4fe20c['style3D']['bottomAltitude']+_0x4fe20c['_waterParameters']['averageHeight']};_0x22750a['waterIndex']=_0x4fe20c['addWaterPlane'](_0x21aaf3);}_0x19852c['prototype']['transformResource']=function(_0x3caa71,_0x379230){if(this['ready'])return;this['createBatchTable'](_0x3caa71),this['createPickIds'](),this['createBuffers'](_0x3caa71),this['createShaderProgram'](_0x3caa71),this['createCommand'](_0x3caa71),this['initLayerSetting'](_0x379230),_0xd8a9e1(this,_0x379230);},_0x19852c['prototype']['update']=function(_0x1e544f,_0xae69b8){if(_0x1e544f['camera']['bReflect'])return;this['batchTableDirty']&&(this['updateBatchTableAttributes'](),this['batchTableDirty']=![]),this['batchTable']['update'](_0x1e544f),_0x1e544f['commandList']['push'](this['colorCommand']);},_0x19852c['prototype']['isDestroyed']=function(){return![];},_0x19852c['prototype']['destroy']=function(){return this['shaderProgram']=this['shaderProgram']&&!this['shaderProgram']['isDestroyed']()&&this['shaderProgram']['destroy'](),this['vertexArray']=this['vertexArray']&&!this['vertexArray']['isDestroyed']()&&this['vertexArray']['destroy'](),this['material']=this['material']&&!this['material']['isDestroyed']()&&this['material']['destroy'](),this['batchTable']=this['batchTable']&&!this['batchTable']['isDestroyed']()&&this['batchTable']['destroy'](),this['waterIndex']>-0x1&&this['layer']['removeWaterPlane'](this['waterIndex']),this['colorCommand']=undefined,this['vertexPackage']=null,this['arrIndexPackage']=null,this['modelMatrix']=undefined,this['pickInfo']=undefined,this['selectionInfoMap']=undefined,this['vs']=undefined,this['fs']=undefined,Cesium['destroyObject'](this);};export default _0x19852c;