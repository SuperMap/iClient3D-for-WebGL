const _0x398f8f=(function(){let _0x1a9fec=!![];return function(_0x315573,_0x2280aa){const _0x36639f=_0x1a9fec?function(){if(_0x2280aa){const _0x5529d2=_0x2280aa['apply'](_0x315573,arguments);return _0x2280aa=null,_0x5529d2;}}:function(){};return _0x1a9fec=![],_0x36639f;};}()),_0x387e75=_0x398f8f(this,function(){return _0x387e75['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x387e75)['search']('(((.+)+)+)+$');});_0x387e75();import _0x5da5a4 from'../Shaders/FresnelVp.js';import _0x49e00d from'../Shaders/FresnelFp.js';import _0x4d3090 from'./RenderEntity.js';import _0x278847 from'../getComUniformMap.js';function _0x160f18(_0x56b8da){_0x4d3090['call'](this,_0x56b8da),this['vs']=_0x5da5a4,this['fs']=_0x49e00d,this['waterIndex']=-0x1,this['waterTime']=0x0;}_0x160f18['prototype']=Object['create'](_0x4d3090['prototype']),_0x160f18['prototype']['constructor']=_0x4d3090;function _0x4ac6ae(){return Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium['DepthFunction']['LESS_OR_EQUAL']},'blending':Cesium['BlendingState']['ALPHA_BLEND']});}function _0x2f2260(_0x28d250,_0x37e810,_0x45b683){return{'uGeoMatrix':function(){return _0x45b683['geoMatrix'];},'uFillForeColor':function(){return _0x37e810['style3D']['fillForeColor'];},'uReflectMap':function(){let _0x3d7917=_0x37e810['context']['reflectFramebuffer']&&_0x37e810['context']['reflectFramebuffer']['sceneFramebuffer']&&_0x37e810['context']['reflectFramebuffer']['sceneFramebuffer']['getFramebuffer']();if(!_0x3d7917)return _0x37e810['context']['defaultTexture'];return _0x3d7917['getColorTexture'](0x0);},'uNoiseMap':function(){return _0x37e810['context']['defaultTexture'];},'uTimeVal':function(){let _0x53b266=_0x37e810['_waterParameters']['timeVal']*0.01;return _0x45b683['waterTime']=_0x45b683['waterTime']>0x1?_0x53b266:_0x45b683['waterTime']+_0x53b266,_0x45b683['waterTime'];},'uScale':function(){return _0x37e810['_waterParameters']['scale'];},'uScroll':function(){return _0x37e810['_waterParameters']['scroll'];},'uNoise':function(){return _0x37e810['_waterParameters']['noise'];},'uBumpSpeed':function(){return _0x37e810['_waterParameters']['bumpSpeed'];},'uFresnelPower':function(){return _0x37e810['_waterParameters']['fresnelPower'];},'uMinFresnel':function(){return _0x37e810['_waterParameters']['minFresnel'];},'uMaxFresnel':function(){return _0x37e810['_waterParameters']['maxFresnel'];},'uTintColour':function(){return _0x37e810['_waterParameters']['tintColour'];},'uNoiseScale':function(){return _0x37e810['_waterParameters']['noiseScale'];},'uWaterColour':function(){return _0x37e810['_waterParameters']['waterColour'];},'uWaterBrightness':function(){return _0x37e810['_waterParameters']['waterBrightness'];}};}_0x160f18['prototype']['createCommand']=function(){if(Cesium['defined'](this['colorCommand'])||this['vertexBufferToCreate']['length']!==0x0||this['indexBufferToCreate']['length']!==0x0||this['shaderProgramToCreate']['length']!==0x0)return;let _0x578a59=this['layer'],_0x458ef7=_0x578a59['context'],_0xd3c23a=this['vertexPackage'],_0x4df69e=this['arrIndexPackage'],_0xa37221=_0xd3c23a['vertexAttributes'];if(_0x4df69e['length']<0x1)return;let _0x2c0910=_0x4df69e[0x0],_0x46bc48=this['material'];this['vertexArray']=new Cesium['VertexArray']({'context':_0x458ef7,'attributes':_0xa37221,'indexBuffer':_0x2c0910['indexBuffer']}),this['colorCommand']=new Cesium['DrawCommand']({'primitiveType':_0x2c0910['primitiveType'],'modelMatrix':this['modelMatrix'],'boundingVolume':this['boundingVolume'],'vertexArray':this['vertexArray'],'shaderProgram':this['shaderProgram'],'pass':_0x46bc48['bTransparentSorting']?Cesium['Pass']['TRANSLUCENT']:Cesium['Pass']['CESIUM_3D_TILE'],'renderState':_0x46bc48['bTransparentSorting']?getTransparentRenderState():_0x4ac6ae(),'instanceCount':_0xd3c23a['instanceCount']});let _0x132723=_0x2f2260(_0x46bc48,_0x578a59,this);Object['assign'](_0x132723,_0x278847(_0x578a59)),this['colorCommand']['uniformMap']=this['batchTable']['getUniformMapCallback']()(_0x132723),this['vertexPackage']=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this['ready']=!![];};function _0x3d38b2(_0x2feb47,_0x45a474){let _0x2fb449={'boundingVolume':_0x2feb47['boundingVolume'],'distance':_0x45a474['style3D']['bottomAltitude']+_0x45a474['_waterParameters']['averageHeight']};_0x2feb47['waterIndex']=_0x45a474['addWaterPlane'](_0x2fb449);}_0x160f18['prototype']['transformResource']=function(_0x1aacca,_0x5b01c9){if(this['ready'])return;this['createBatchTable'](_0x1aacca),this['createPickIds'](),this['createBuffers'](_0x1aacca),this['createShaderProgram'](_0x1aacca),this['createCommand'](_0x1aacca),this['initLayerSetting'](_0x5b01c9),_0x3d38b2(this,_0x5b01c9);},_0x160f18['prototype']['update']=function(_0x4ad206,_0x9c41a6){if(_0x4ad206['camera']['bReflect'])return;this['batchTableDirty']&&(this['updateBatchTableAttributes'](),this['batchTableDirty']=![]),this['batchTable']['update'](_0x4ad206),_0x4ad206['commandList']['push'](this['colorCommand']);},_0x160f18['prototype']['isDestroyed']=function(){return![];},_0x160f18['prototype']['destroy']=function(){return this['shaderProgram']=this['shaderProgram']&&!this['shaderProgram']['isDestroyed']()&&this['shaderProgram']['destroy'](),this['vertexArray']=this['vertexArray']&&!this['vertexArray']['isDestroyed']()&&this['vertexArray']['destroy'](),this['material']=this['material']&&!this['material']['isDestroyed']()&&this['material']['destroy'](),this['batchTable']=this['batchTable']&&!this['batchTable']['isDestroyed']()&&this['batchTable']['destroy'](),this['waterIndex']>-0x1&&this['layer']['removeWaterPlane'](this['waterIndex']),this['colorCommand']=undefined,this['vertexPackage']=null,this['arrIndexPackage']=null,this['modelMatrix']=undefined,this['pickInfo']=undefined,this['selectionInfoMap']=undefined,this['vs']=undefined,this['fs']=undefined,Cesium['destroyObject'](this);};export default _0x160f18;