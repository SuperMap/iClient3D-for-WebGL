const _0x8a41a=(function(){let _0x1083bb=!![];return function(_0x6225ab,_0x10e1ef){const _0x3e78c6=_0x1083bb?function(){if(_0x10e1ef){const _0x17d1c7=_0x10e1ef['apply'](_0x6225ab,arguments);return _0x10e1ef=null,_0x17d1c7;}}:function(){};return _0x1083bb=![],_0x3e78c6;};}()),_0x24354e=_0x8a41a(this,function(){return _0x24354e['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x24354e)['search']('(((.+)+)+)+$');});_0x24354e();import _0x24b29b from'./S3MTile.js';import _0x371bdb from'./S3MLayerScheduler.js';import _0x220573 from'./S3MLayerCache.js';import _0x853d3f from'./Enum/OperationType.js';import _0x13a8de from'./Enum/PLANECLIPMODE.js';import _0x2bcfc5 from'./Hypsometric.js';import _0x344081 from'./HypsometricSetting.js';import _0x26e7d9 from'./Enum/HypsometricSettingEnum.js';import _0x2b9f7c from'./Parameter/Flatten.js';import _0xdbb54c from'./RasterRegion.js';import _0x480e78 from'../Ext/XmlParser.js';import _0x8c38e8 from'./Style3D.js';import _0x5399ea from'./S3MBlockCache.js';import _0x1db48f from'../ThirdParty/defer.js';import _0x3ade14 from'../ThirdParty/Uri.js';import _0x423842 from'./Enum/TextureCompressType.js';import _0x150013 from'../Core/CRNTranscoder.js';import _0x13dad5 from'./Enum/ModifyRegionMode.js';import _0x2de676 from'./shaders/RegionVectex.js';import _0x1f0f09 from'./shaders/RegionTextureVertex.js';import _0x335101 from'./shaders/RegionAltitudeVectex.js';import _0xcdadd0 from'./shaders/RegionFragment.js';import _0x2809c7 from'./S3MDracoDecode.js';var _0x11646f=new Cesium['Matrix4'](0x0,0x0,0x1,0x0,0x1,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x1),_0xd5b37d={'Altitude':0x0,'Color':0x1,'Texture':0x2};function _0x364f9d(_0x59ca8d){_0x59ca8d=Cesium['defaultValue'](_0x59ca8d,Cesium['defaultValue']['EMPTY_OBJECT']),Cesium['Check']['defined']('options.context',_0x59ca8d['context']),Cesium['Check']['defined']('Authentication\x20error',_0x59ca8d['rss']),this['id']=Cesium['createGuid'](),this['name']=_0x59ca8d['name'],this['context']=_0x59ca8d['context'],this['_isS3MB']=Cesium['defaultValue'](_0x59ca8d['isS3MB'],!![]),this['_isS3MBlock']=Cesium['defaultValue'](_0x59ca8d['isS3MBlock'],![]),this['_url']=undefined,this['_basePath']=undefined,this['_baseResource']=undefined,this['modelMatrix']=new Cesium['Matrix4'](),this['invModelMatrix']=new Cesium['Matrix4'](),this['fileType']=undefined,this['dataVersion']=0x1,this['_position']=undefined,this['_rectangle']=undefined,this['_rootTiles']=[],this['_schuduler']=new _0x371bdb(),this['_requestTiles']=[],this['_processTiles']=[],this['_renderQueue']=[],this['_cache']=new _0x220573(),this['_vertexCompressionType']=_0x59ca8d['vertexCompressionType'],this['_textureCompressType']=_0x423842['None'],this['_maximumMemoryUsage']=-0x1,this['_totalMemoryUsageInBytes']=0x0,this['_maximumPriority']={'foveatedFactor':-Number['MAX_VALUE'],'depth':-Number['MAX_VALUE'],'distance':-Number['MAX_VALUE'],'pixel':-Number['MAX_VALUE']},this['_minimumPriority']={'foveatedFactor':Number['MAX_VALUE'],'depth':Number['MAX_VALUE'],'distance':Number['MAX_VALUE'],'pixel':Number['MAX_VALUE']},this['_readyPromise']=_0x1db48f(),this['_selectEnabled']=Cesium['defaultValue'](_0x59ca8d['selectEnabled'],!![]),this['_multiChoose']=![],this['_sceneMode']=Cesium['defaultValue'](_0x59ca8d['sceneMode'],Cesium['SceneMode']['SCENE3D']),this['_selections']=[],this['_selectedColor']=new Cesium['Color'](0.7,0.7,0x1,0x1),this['_objsOperationList']=new Cesium['AssociativeArray'](),this['_objsVisibleList']=new Cesium['AssociativeArray'](),this['_objsHideList']=new Cesium['AssociativeArray'](),this['_objsVisibleMap']={},this['_objsColorList']={},this['_allObjsHide']=![],this['_flattenTextureWidth']=0x400,this['_clipMode']=_0x13a8de['CLIP_NOTHING'],this['_excavationMode']=_0x13dad5['CLIP_INSIDE'],this['_excavationTexture']=undefined,this['_excavationRegions']=new Cesium['AssociativeArray'](),this['_excavationBounds']=new Cesium['Cartesian4'](),this['_excavateRegionCommands']=new Cesium['AssociativeArray'](),this['_excavationUpdate']=![],this['_hasExcavation']=![],this['_enableClip']=![],this['_enableClipPlane']=![],this['_clipPlane']=[new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0)],this['_oriClipPlane']=[new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0),new Cesium['Cartesian4'](0x0,0x0,0x0,0x0)],this['_hypsometric']=new _0x2bcfc5({}),this['_flattenPar']=new _0x2b9f7c(),this['_minCategory']=0x0,this['_maxCategory']=0x0,this['_minHeight']=0x0,this['_maxHeight']=0x0,this['_swipeRegion']=new Cesium['Cartesian4'](0x0,0x0,0x1,0x1),this['_swipeEnabled']=![],this['_brightness']=Cesium['defaultValue'](_0x59ca8d['brightness'],0x1),this['_contrast']=Cesium['defaultValue'](_0x59ca8d['constrast'],0x1),this['_hue']=Cesium['defaultValue'](_0x59ca8d['hue'],0x0),this['_saturation']=Cesium['defaultValue'](_0x59ca8d['saturation'],0x1),this['_gamma']=Cesium['defaultValue'](_0x59ca8d['gamma'],0x1),this['_visibleDistanceMax']=Cesium['defaultValue'](_0x59ca8d['maxVisibleDistance'],Number['MAX_VALUE']),this['_visibleDistanceMin']=Cesium['defaultValue'](_0x59ca8d['minVisibleDistance'],0x0),this['_minVisibleAltitude']=Cesium['defaultValue'](_0x59ca8d['minVisibleAltitude'],0x0),this['_maxVisibleAltitude']=Cesium['defaultValue'](_0x59ca8d['maxVisibleAltitude'],Number['MAX_VALUE']),this['_lodRangeScale']=Cesium['defaultValue'](_0x59ca8d['lodRangeScale'],0x1),this['_visible']=Cesium['defaultValue'](_0x59ca8d['isVisible'],!![]),this['_style3D']=Cesium['defaultValue'](_0x59ca8d['style3D'],new _0x8c38e8()),this['_isTransparencyOptimization']=![],this['_polygonOffsetConfig']=_0x59ca8d['polygonOffset'],this['_visibleViewport']=0xfff,this['_waterParameters']=undefined,this['_waterPlanes']=undefined,this['_edgeDistanceFalloffFactor']=0x0,this['_edgeCurrentTotalLength']=0x0,this['_edgeCurrentCount']=0x0,this['_blockCache']=_0x5399ea['getSingleInstance'](),this['_materialManager']=undefined,this['_subTextureManager']=undefined,this['_subdomainConfig']=Cesium['defaultValue'](_0x59ca8d['subdomainConfig'],{}),this['_PBRMaterialParams']={'pbrMetallicRoughness':{'metallicFactor':0x0,'roughnessFactor':0x0,'baseColor':new Cesium['Cartesian4'](0x1,0x1,0x1,0x1),'baseColorTextureIndex':-0x1,'emissiveFactor':Cesium['Cartesian3']['ZERO'],'emissiveTextureIndex':-0x1,'occlusionTextureIndex':-0x1,'normalTextureIndex':-0x1,'normalTexture':undefined,'baseColorTexture':undefined}},this['_customRequestHeaders']=_0x59ca8d['customRequestHeaders'],this['loadConfig'](_0x59ca8d['url']);}Object['defineProperties'](_0x364f9d['prototype'],{'ready':{'get':function(){if(this['fileType']==='OSGBCacheFile_Water')return this['_waterParameters']!==undefined&&this['_rootTiles']['length']>0x0;return this['_rootTiles']['length']>0x0;}},'readyPromise':{'get':function(){return this['_readyPromise'];}},'visible':{'get':function(){return this['_visible'];},'set':function(_0x3cc34b){this['_visible']=_0x3cc34b;}},'show':{'get':function(){return this['_visible'];},'set':function(_0x31d59f){this['_visible']=_0x31d59f;}},'style3D':{'get':function(){return this['_style3D'];}},'rectangle':{'get':function(){return this['_rectangle'];}},'totalMemoryUsageInBytes':{'get':function(){return this['_totalMemoryUsageInBytes'];},'set':function(_0x786776){this['_totalMemoryUsageInBytes']=_0x786776;}},'maximumMemoryUsage':{'get':function(){return this['_maximumMemoryUsage'];},'set':function(_0x22c71a){this['_maximumMemoryUsage']=_0x22c71a;}},'lodRangeScale':{'get':function(){return this['_lodRangeScale'];},'set':function(_0x473978){Cesium['Check']['typeOf']['number']('set\x20layer\x20lod\x20range\x20scale',_0x473978),this['_lodRangeScale']=_0x473978;}},'selectedColor':{'get':function(){return this['_selectedColor'];},'set':function(_0x3a0f95){Cesium['Color']['clone'](_0x3a0f95,this['_selectedColor']);}},'dataMinValue':{'get':function(){return Cesium['defaultValue'](this['_minCategory'],this['_minHeight']);}},'dataMaxValue':{'get':function(){return Cesium['defaultValue'](this['_maxCategory'],this['_maxHeight']);}},'swipeRegion':{'get':function(){return new Cesium['BoundingRectangle'](this['_swipeRegion']['x'],this['_swipeRegion']['y'],this['_swipeRegion']['z']-this['_swipeRegion']['x'],this['_swipeRegion']['w']-this['_swipeRegion']['y']);},'set':function(_0x5b6a1b){if(!_0x5b6a1b)return;if(!(_0x5b6a1b instanceof Cesium['BoundingRectangle']))throw new Cesium['DeveloperError']('swipeRegion\x20must\x20be\x20a\x20instance\x20of\x20BoundingRectangle.');Cesium['Cartesian4']['fromElements'](_0x5b6a1b['x'],_0x5b6a1b['y'],_0x5b6a1b['x']+_0x5b6a1b['width'],_0x5b6a1b['y']+_0x5b6a1b['height'],this['_swipeRegion']);}},'swipeEnabled':{'get':function(){return this['_swipeEnabled'];},'set':function(_0x612999){if(_0x612999===this['_swipeEnabled'])return;!_0x612999&&Cesium['Cartesian4']['fromElements'](0x0,0x0,0x1,0x1,this['_swipeRegion']),this['_swipeEnabled']=_0x612999,this['_tranverseRenderEntity']({'enable':_0x612999},_0x578b38);}},'visibleDistanceMax':{'get':function(){return this['_visibleDistanceMax'];},'set':function(_0xe5a838){Cesium['Check']['typeOf']['number']('max\x20visible\x20distance',_0xe5a838),this['_visibleDistanceMax']=_0xe5a838;}},'visibleDistanceMin':{'get':function(){return this['_visibleDistanceMin'];},'set':function(_0x46444d){Cesium['Check']['typeOf']['number']('min\x20visible\x20distance',_0x46444d),this['_visibleDistanceMin']=_0x46444d;}},'minVisibleAltitude':{'get':function(){return this['_minVisibleAltitude'];},'set':function(_0x28c70f){Cesium['Check']['typeOf']['number']('min\x20visible\x20altitude',_0x28c70f),this['_minVisibleAltitude']=_0x28c70f;}},'maxVisibleAltitude':{'get':function(){return this['_maxVisibleAltitude'];},'set':function(_0x17a86c){Cesium['Check']['typeOf']['number']('max\x20visible\x20altitude',_0x17a86c),this['_maxVisibleAltitude']=_0x17a86c;}},'hypsometricSetting':{'get':function(){return{'hypsometricSetting':this['_hypsometric']['setting'],'analysisMode':this['_hypsometric']['analysisMode']};},'set':function(_0x1cc42b){let _0x41e937=this['_hypsometric'];if(!_0x1cc42b||!_0x1cc42b['hypsometricSetting']){_0x41e937['isUseHypColorTable']=![],_0x41e937['setting']=_0x41e937['setting']&&_0x41e937['setting']['destroy'](),this['_tranverseRenderEntity']({'enable':![]},_0xf0c505);return;}_0x41e937['region']=_0x41e937['region']&&_0x41e937['region']['destroy'](),!_0x41e937['renderTexture']&&(_0x41e937['renderTexture']=new Cesium['Texture']({'context':this['context'],'width':0x400,'height':0x400,'pixelFormat':Cesium['PixelFormat']['RGBA']})),!_0x41e937['texture']&&(_0x41e937['texture']=new Cesium['Texture']({'context':this['context'],'width':0x400,'height':0x40,'pixelFormat':Cesium['PixelFormat']['RGBA'],'flipY':![]})),_0x41e937['analysisMode']=Cesium['defaultValue'](_0x1cc42b['analysisMode'],_0x41e937['analysisMode']),_0x41e937['setting']=_0x344081['clone'](_0x1cc42b['hypsometricSetting'],_0x41e937['setting']),_0x41e937['setting']['ColorTable']&&(_0x41e937['setting']['ColorTable']['generateBuffer'](),this['_hypsometric']['texture']&&this['_hypsometric']['texture']['copyFrom']({'width':0x400,'height':0x40,'arrayBufferView':_0x41e937['setting']['ColorTable']['_imageBuffer']})),_0x41e937['isUseHypColorTable']=_0x41e937['analysisMode']!==_0x26e7d9['AnalysisRegionMode']['ARM_NONE'],this['_tranverseRenderEntity']({'enable':_0x41e937['isUseHypColorTable']},_0xf0c505);}},'selectEnabled':{'get':function(){return this['_selectEnabled'];},'set':function(_0x3857e1){Cesium['Check']['defined']('value',_0x3857e1),Cesium['Check']['typeOf']['bool']('value',_0x3857e1),this['_selectEnabled']=_0x3857e1;}},'subdomains':{'get':function(){return this['_subdomainConfig']['subdomains'];},'set':function(_0x453929){if(defined(_0x453929)&&!defined(_0x453929['length']))throw new DeveloperError('Excepted\x20S3MTilesLayer.subdomains\x20to\x20be\x20type\x20of\x20Array.');this['_subdomainConfig']['subdomains']=_0x453929;}},'customRequestHeaders':{'get':function(){return this['_customRequestHeaders'];},'set':function(_0x55a1bb){this['_customRequestHeaders']=_0x55a1bb;}}});function _0x2a407a(_0x2f1ce0){let _0x167dda={},_0x10a52a=_0x2f1ce0['firstChild'];_0x167dda['version']=_0x480e78['queryStringValue'](_0x10a52a,'Version'),_0x167dda['fileType']=_0x480e78['queryStringValue'](_0x10a52a,'FileType');let _0xf5da2a=_0x480e78['queryFirstNode'](_0x10a52a,'WaterEffect');_0x167dda['averageHeight']=_0x480e78['queryNumericValue'](_0xf5da2a,'AverageHeight');let _0x2168ea=_0x480e78['queryNodes'](_0xf5da2a,'GpuProgramParameters');_0x167dda['gpuProgramParameters']=[];for(let _0x3102ff=0x0,_0x331a42=_0x2168ea['length'];_0x3102ff<_0x331a42;_0x3102ff++){let _0x17a9b2={};_0x17a9b2['gpuConstants']=[],_0x17a9b2['atuoConstants']=[];let _0x36f53f=_0x2168ea[_0x3102ff],_0x2298f8=_0x480e78['queryFirstNode'](_0x36f53f,'GpuConstants');if(_0x2298f8){let _0xb331db=_0x480e78['queryNodes'](_0x2298f8,'GpuConstantDefinition');for(let _0x3f6696=0x0,_0x47d7e4=_0xb331db['length'];_0x3f6696<_0x47d7e4;_0x3f6696++){let _0x13f370={},_0x273322=_0xb331db[_0x3f6696];_0x13f370['constType']=_0x480e78['queryNumericValue'](_0x273322,'ConstType'),_0x13f370['index']=_0x480e78['queryNumericValue'](_0x273322,'Index'),_0x13f370['name']=_0x480e78['queryStringValue'](_0x273322,'Name'),_0x13f370['arraySize']=_0x480e78['queryNumericValue'](_0x273322,'ArraySize'),_0x13f370['multiple']=_0x480e78['queryNumericValue'](_0x273322,'Multiple');let _0x3eb9d9=_0x480e78['queryFirstNode'](_0x273322,'ArrayFloat');_0x13f370['arrayFloat']=[];if(_0x3eb9d9){let _0x3e703f=_0x480e78['queryNodes'](_0x3eb9d9,'Float'),_0x2a28b0=0x0;while(_0x2a28b0<_0x13f370['arraySize']){let _0x1d513a=parseFloat(_0x3e703f[_0x2a28b0]['textContent']);_0x13f370['arrayFloat']['push'](_0x1d513a),_0x2a28b0++;}}_0x17a9b2['gpuConstants']['push'](_0x13f370);}}let _0x202967=_0x480e78['queryFirstNode'](_0x36f53f,'AutoConstants');if(_0x202967){let _0x4024a2=_0x480e78['queryNodes'](_0x202967,'AutoConstantEntry');for(let _0x4bfcc1=0x0,_0x27e199=_0x4024a2['length'];_0x4bfcc1<_0x27e199;_0x4bfcc1++){let _0x17d4c5={},_0x54225c=_0x4024a2[_0x4bfcc1];_0x17d4c5['paramType']=_0x480e78['queryNumericValue'](_0x54225c,'ParamType'),_0x17d4c5['name']=_0x480e78['queryStringValue'](_0x54225c,'Name'),_0x17d4c5['physicalIndex']=_0x480e78['queryNumericValue'](_0x54225c,'PhysicalIndex'),_0x17d4c5['elementCount']=_0x480e78['queryNumericValue'](_0x54225c,'ElementCount'),_0x17d4c5['data']=_0x480e78['queryNumericValue'](_0x54225c,'Data'),_0x17d4c5['fData']=_0x480e78['queryNumericValue'](_0x54225c,'FData'),_0x17d4c5['isReal']=_0x480e78['queryBooleanValue'](_0x54225c,'IsReal'),_0x17a9b2['atuoConstants']['push'](_0x17d4c5);}}_0x167dda['gpuProgramParameters']['push'](_0x17a9b2);}return _0x167dda;}function _0x3741ab(_0x165286,_0x285a73){let _0x5091eb=_0x285a73['_basePath'],_0x407ff=_0x285a73['_basePath']['indexOf']('realspace')>-0x1;if(!_0x407ff)return _0x165286;let _0x1de790=_0x5091eb['replace'](/(.*realspace)/,''),_0x7c7735=_0x5091eb['replace'](/\/rest\/realspace/g,'')['replace'](_0x1de790,'');return _0x7c7735+'/rest/realspace'+_0x1de790+'data/path/'+_0x165286['replace'](/^\.*/,'')['replace'](/^\//,'')['replace'](/\/$/,'');}function _0x2bc1eb(_0x1cf537,_0x5f2586){let _0x56dec8=_0x5f2586['extensions'];if(!_0x56dec8||!_0x56dec8['attachFiles'])return;let _0x47cf97=_0x56dec8['attachFiles'],_0xbbee1e=[],_0x28b395=_0x1cf537['_basePath'],_0x2a3354=![];for(let _0x457bb7=0x0,_0x4e9c3b=_0x47cf97['length'];_0x457bb7<_0x4e9c3b;_0x457bb7++){let _0x3b26d9=_0x47cf97[_0x457bb7]['attachFile'];if(_0x3b26d9['indexOf']('.water')>0x0){let _0x2f6871=_0x3741ab(_0x3b26d9,_0x1cf537),_0x131cdf=_0x1cf537['_baseResource']['getDerivedResource']({'url':_0x2f6871});_0xbbee1e['push'](_0x131cdf['fetchXML']()),_0x2a3354=!![];}}if(!_0xbbee1e['length'])return;Promise['all'](_0xbbee1e)['then'](_0x5d4490=>{let _0x223eed=[];for(let _0x40ea98=0x0,_0x5886aa=_0x5d4490['length'];_0x40ea98<_0x5886aa;_0x40ea98++){let _0x217133=_0x5d4490[_0x40ea98];if(!_0x217133)break;let _0x1030be=_0x2a407a(_0x217133);_0x223eed['push'](_0x1030be);}_0x1cf537['_waterPlanes']=new Cesium['AssociativeArray'](),_0x1cf537['_waterParameters']={};let _0x566700=_0x223eed[0x0];_0x1cf537['_waterParameters']['averageHeight']=_0x566700['averageHeight'];for(let _0x40ed3e=0x0;_0x40ed3e<_0x566700['gpuProgramParameters']['length'];_0x40ed3e++){let _0x3ddb1f=_0x566700['gpuProgramParameters'][_0x40ed3e];for(let _0x1c7586=0x0;_0x1c7586<_0x3ddb1f['atuoConstants']['length'];_0x1c7586++){let _0x4e71c4=_0x3ddb1f['atuoConstants'][_0x1c7586];if(_0x4e71c4['name']==='timeVal'){_0x1cf537['_waterParameters'][_0x4e71c4['name']]=_0x4e71c4['fData'];break;}}for(let _0x5e52d4=0x0;_0x5e52d4<_0x3ddb1f['gpuConstants']['length'];_0x5e52d4++){let _0x1d6fe9=_0x3ddb1f['gpuConstants'][_0x5e52d4],_0xe0f450=null;switch(_0x1d6fe9['arraySize']){case 0x1:_0xe0f450=_0x1d6fe9['arrayFloat'][0x0];break;case 0x2:_0xe0f450=new Cesium['Cartesian2'](),Cesium['Cartesian2']['unpack'](_0x1d6fe9['arrayFloat'],0x0,_0xe0f450);break;case 0x3:_0xe0f450=new Cesium['Cartesian3'](),Cesium['Cartesian3']['unpack'](_0x1d6fe9['arrayFloat'],0x0,_0xe0f450);break;case 0x4:_0xe0f450=new Cesium['Cartesian4'](),Cesium['Cartesian4']['unpack'](_0x1d6fe9['arrayFloat'],0x0,_0xe0f450);break;default:break;}if(!_0xe0f450)continue;_0x1cf537['_waterParameters'][_0x1d6fe9['name']]=_0xe0f450;}}_0x1cf537['fileType']+='_Water';})['catch'](_0x41510b=>{console['log'](_0x41510b);});}_0x364f9d['prototype']['loadConfig']=function(_0x5914e0){let _0x1ad495=this;Promise['resolve'](_0x5914e0)['then'](function(_0x2bc1be){let _0x1dbd7b,_0x468327=Cesium['Resource']['createIfNeeded'](_0x2bc1be);_0x1dbd7b=_0x468327['getBaseUri'](!![]);let _0x487f6d=new _0x3ade14(_0x1dbd7b);_0x487f6d['query']=undefined,_0x1dbd7b=_0x487f6d['toString'](),_0x1ad495['_url']=_0x468327['url'],_0x1ad495['_basePath']=_0x1dbd7b,_0x1ad495['_baseResource']=_0x468327;Cesium['defined'](_0x1ad495['_subdomainConfig']['subdomains'])&&(_0x1ad495['_basePath']=_0x1ad495['_subdomainConfig']['urlScheme']);if(_0x1ad495['_isS3MB']||_0x1ad495['_isS3MBlock'])return _0x468327['fetchJson']();return _0x468327['fetchXML']();})['then'](function(_0x43717e){if(_0x1ad495['_isS3MB']||_0x1ad495['_isS3MBlock']){let _0x691056=_0x43717e['extensions'];_0x1ad495['fileType']=_0x691056['s3m:FileType'];let _0x18d95d=_0x43717e['position']['x'],_0x3edae0=_0x43717e['position']['y'],_0x4f8658=_0x43717e['position']['z'],_0x4d7195=_0x43717e['position']['units'];_0x1ad495['lon']=_0x18d95d,_0x1ad495['lat']=_0x3edae0,_0x1ad495['height']=_0x4f8658;if(_0x1ad495['_sceneMode']===Cesium['SceneMode']['SCENE3D'])_0x1ad495['_position']=Cesium['Cartesian3']['fromDegrees'](_0x18d95d,_0x3edae0,_0x4f8658),_0x1ad495['modelMatrix']=Cesium['Transforms']['eastNorthUpToFixedFrame'](_0x1ad495['_position']),_0x1ad495['invModelMatrix']=Cesium['Matrix4']['inverse'](_0x1ad495['modelMatrix'],_0x1ad495['invModelMatrix']);else{if(_0x18d95d>0xb4||_0x18d95d<-0xb4||_0x3edae0>0xb4||_0x3edae0<-0xb4||_0x4d7195==='Meter'){let _0x3f5aae=_0x18d95d,_0x53a81d=_0x3edae0;_0x1ad495['_position']=new Cesium['Cartesian3'](_0x3f5aae,_0x53a81d,_0x4f8658);}else{let _0x589873=new Cesium['GeographicProjection'](),_0x37d62b=Cesium['Cartesian3']['fromDegrees'](_0x18d95d,_0x3edae0,_0x4f8658),_0x416ced=_0x589873['ellipsoid']['cartesianToCartographic'](_0x37d62b);_0x1ad495['_position']=_0x589873['project'](_0x416ced);}Cesium['Matrix4']['fromTranslation'](_0x1ad495['_position'],_0x1ad495['modelMatrix']),Cesium['Matrix4']['multiply'](_0x11646f,_0x1ad495['modelMatrix'],_0x1ad495['modelMatrix']),_0x1ad495['invModelMatrix']=Cesium['Matrix4']['inverse'](_0x1ad495['modelMatrix'],_0x1ad495['invModelMatrix']);}if(Cesium['defined'](_0x43717e['geoBounds'])){let _0x277660=_0x43717e['geoBounds']['left'],_0x4bc505=_0x43717e['geoBounds']['top'],_0x496d14=_0x43717e['geoBounds']['right'],_0x3e339e=_0x43717e['geoBounds']['bottom'];_0x277660>0xb4||_0x3e339e>0xb4||_0x496d14>0xb4||_0x4bc505>0xb4?(_0x277660/=0x615299,_0x3e339e/=0x615299,_0x496d14/=0x615299,_0x4bc505/=0x615299,_0x1ad495['_rectangle']=new Cesium['Rectangle'](_0x277660,_0x3e339e,_0x496d14,_0x4bc505)):_0x1ad495['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x277660,_0x3e339e,_0x496d14,_0x4bc505);}_0x43717e['heightRange']&&(_0x1ad495['_minHeight']=_0x43717e['heightRange']['min'],_0x1ad495['_maxHeight']=_0x43717e['heightRange']['max']);if(_0x43717e['wDescript']){let _0x660e11=_0x43717e['wDescript']['range'];_0x1ad495['_minWValue']=_0x660e11['min'],_0x1ad495['_maxWValue']=_0x660e11['max'];}_0x691056['hasOwnProperty']('s3m:TransparencyOptimization')&&(_0x1ad495['_isTransparencyOptimization']=_0x691056['s3m:TransparencyOptimization']==='TRUE');_0x691056['hasOwnProperty']('s3m:VertexCompressionType')&&(_0x1ad495['_vertexCompressionType']=_0x691056['s3m:VertexCompressionType']);_0x691056['hasOwnProperty']('s3m:TextureCompressionType')&&(_0x1ad495['_textureCompressType']=_0x691056['s3m:TextureCompressionType']);const _0x53607e=_0x43717e['tiles']||_0x43717e['rootTiles'];if(_0x53607e['length']>0x0){let _0x149328=Cesium['getExtensionFromUri'](_0x53607e[0x0]['url']);_0x149328==='s3mblock'&&(_0x1ad495['_isS3MBlock']=!![]);}for(let _0x2e2768=0x0,_0x47b496=_0x53607e['length'];_0x2e2768<_0x47b496;_0x2e2768++){let _0x2e6e0f=_0x53607e[_0x2e2768]['url'],_0xe91791={'box':_0x53607e[_0x2e2768]['boundingbox']},_0x5d79ee=new _0x24b29b(_0x1ad495,undefined,_0xe91791,_0x2e6e0f);_0x5d79ee['isRootTile']=!![],_0x5d79ee['blockKey']=_0x2e6e0f,_0x1ad495['_cache']['add'](_0x5d79ee),_0x1ad495['_rootTiles']['push'](_0x5d79ee);}_0x2bc1eb(_0x1ad495,_0x43717e);}else{let _0x4fdb66=_0x43717e['firstChild'],_0x38d36a=_0x4fdb66['namespace'];_0x1ad495['fileType']=_0x480e78['queryStringValue'](_0x4fdb66,'FileType',_0x38d36a);let _0x166285=_0x480e78['queryFirstNode'](_0x4fdb66,'Position',_0x38d36a),_0x28c1d8=_0x480e78['queryNumericValue'](_0x166285,'X',_0x38d36a),_0x9a397c=_0x480e78['queryNumericValue'](_0x166285,'Y',_0x38d36a),_0x13c028=_0x480e78['queryNumericValue'](_0x166285,'Z',_0x38d36a);_0x1ad495['lon']=_0x28c1d8,_0x1ad495['lat']=_0x9a397c,_0x1ad495['height']=_0x13c028,_0x1ad495['_position']=Cesium['Cartesian3']['fromDegrees'](_0x28c1d8,_0x9a397c,_0x13c028),_0x1ad495['modelMatrix']=Cesium['Transforms']['eastNorthUpToFixedFrame'](_0x1ad495['_position']),_0x1ad495['invModelMatrix']=Cesium['Matrix4']['inverse'](_0x1ad495['modelMatrix'],_0x1ad495['invModelMatrix']);let _0x48f131=_0x480e78['queryFirstNode'](_0x4fdb66,'Bounds',_0x38d36a),_0x13bc8f=_0x480e78['queryFirstNode'](_0x4fdb66,'BoundingBox',_0x38d36a);if(_0x48f131){let _0x3921b7=_0x480e78['queryNumericValue'](_0x48f131,'Left',_0x38d36a),_0x3c260c=_0x480e78['queryNumericValue'](_0x48f131,'Top',_0x38d36a),_0x97c860=_0x480e78['queryNumericValue'](_0x48f131,'Right',_0x38d36a),_0xa6d071=_0x480e78['queryNumericValue'](_0x48f131,'Bottom',_0x38d36a);_0x1ad495['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x3921b7,_0xa6d071,_0x97c860,_0x3c260c);}else{if(_0x13bc8f){let _0xd81096=_0x480e78['queryNumericValue'](_0x13bc8f,'MinX',_0x38d36a),_0x20cf6a=_0x480e78['queryNumericValue'](_0x13bc8f,'MinY',_0x38d36a),_0x415e1c=_0x480e78['queryNumericValue'](_0x13bc8f,'MinZ',_0x38d36a),_0x38d875=_0x480e78['queryNumericValue'](_0x13bc8f,'MaxX',_0x38d36a),_0x5527c1=_0x480e78['queryNumericValue'](_0x13bc8f,'MaxY',_0x38d36a),_0x436a8f=_0x480e78['queryNumericValue'](_0x13bc8f,'MaxZ',_0x38d36a);_0xd81096=0xb4*Math['abs'](_0xd81096)/(Math['PI']*0x615299),_0x20cf6a=0xb4*Math['abs'](_0x20cf6a)/(Math['PI']*0x615299),_0x38d875=0xb4*Math['abs'](_0x38d875)/(Math['PI']*0x615299),_0x5527c1=0xb4*Math['abs'](_0x5527c1)/(Math['PI']*0x615299),_0x1ad495['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x28c1d8-_0xd81096,_0x9a397c-_0x20cf6a,_0x28c1d8+_0x38d875,_0x9a397c+_0x5527c1);}}let _0x2f896a=_0x480e78['queryFirstNode'](_0x4fdb66,'HeightRange',_0x38d36a);_0x2f896a&&(_0x1ad495['_minHeight']=_0x480e78['queryNumericValue'](_0x2f896a,'MinHeight',_0x38d36a),_0x1ad495['_maxHeight']=_0x480e78['queryNumericValue'](_0x2f896a,'MaxHeight',_0x38d36a));let _0x9c19a0=_0x480e78['queryFirstNode'](_0x4fdb66,'CategoryRange',_0x38d36a);_0x9c19a0&&(_0x1ad495['_maxWValue']=_0x480e78['queryNumericValue'](_0x9c19a0,'MaxCategory',_0x38d36a),_0x1ad495['_minWValue']=_0x480e78['queryNumericValue'](_0x9c19a0,'MinCategory',_0x38d36a));let _0x42478d=_0x480e78['queryFirstNode'](_0x4fdb66,'Extensions',_0x38d36a);_0x1ad495['_isTransparencyOptimization']=_0x480e78['queryBooleanValue'](_0x42478d,'TransparencyOptimization',_0x38d36a);let _0x1bb807=/\\+/g,_0x3e1638=_0x480e78['queryFirstNode'](_0x4fdb66,'OSGFiles',_0x38d36a),_0x4b053a=_0x480e78['queryNodes'](_0x3e1638,'Files',_0x38d36a);if(_0x4b053a['length']>0x0)for(let _0x552044=0x0,_0x108a12=_0x4b053a['length'];_0x552044<_0x108a12;_0x552044++){let _0x5d1100=_0x4b053a[_0x552044],_0x2c79df=_0x480e78['queryStringValue'](_0x5d1100,'FileName',_0x38d36a);_0x2c79df=_0x2c79df['replace'](_0x1bb807,'/'),_0x2c79df=_0x2c79df['replace'](/(\.osgb)/gi,'.s3m');let _0x3a9592=_0x480e78['queryFirstNode'](_0x5d1100,'BoundingSphere',_0x38d36a),_0x1b798b={'sphere':{'center':{'x':0x0,'y':0x0,'z':0x0},'radius':0x615299}};if(_0x3a9592&&_0x3a9592['childNodes']['length']){let _0x1f1296=_0x480e78['queryNumericValue'](_0x3a9592,'CenterX',_0x38d36a),_0x313182=_0x480e78['queryNumericValue'](_0x3a9592,'CenterY',_0x38d36a),_0x330af0=_0x480e78['queryNumericValue'](_0x3a9592,'CenterZ',_0x38d36a),_0x4f60af=_0x480e78['queryNumericValue'](_0x3a9592,'Radius',_0x38d36a);_0x1b798b={'sphere':{'center':{'x':_0x1f1296,'y':_0x313182,'z':_0x330af0},'radius':_0x4f60af}};}let _0x629bd1=new _0x24b29b(_0x1ad495,undefined,_0x1b798b,_0x2c79df);_0x629bd1['isRootTile']=!![],_0x1ad495['_cache']['add'](_0x629bd1),_0x1ad495['_rootTiles']['push'](_0x629bd1);}else{let _0x5e2130=_0x480e78['queryNodes'](_0x3e1638,'FileName',_0x38d36a);for(let _0x1a0adf=0x0,_0x53c4cb=_0x5e2130['length'];_0x1a0adf<_0x53c4cb;_0x1a0adf++){let _0x46aee3=_0x5e2130[_0x1a0adf]['textContent'];_0x46aee3=_0x46aee3['replace'](_0x1bb807,'/'),_0x46aee3=_0x46aee3['replace'](/(\.osgb)/gi,'.s3m');let _0x279758={'sphere':{'center':{'x':0x0,'y':0x0,'z':0x0},'radius':0x615299}},_0x30da7b=new _0x24b29b(_0x1ad495,undefined,_0x279758,_0x46aee3);_0x30da7b['isRootTile']=!![],_0x1ad495['_cache']['add'](_0x30da7b),_0x1ad495['_rootTiles']['push'](_0x30da7b);}}}_0x1ad495['_readyPromise']['resolve'](_0x1ad495);},_0x14dc53=>{_0x1ad495['_readyPromise']['reject'](_0x14dc53);});};function _0x5a10b6(_0x203b03,_0x218be9){return _0x203b03['priority']-_0x218be9['priority'];}function _0x43d2d1(_0x2d2738){let _0x426fa7=_0x2d2738['_requestTiles'],_0x30e0be=_0x426fa7['length'];_0x426fa7['sort'](_0x5a10b6);for(let _0x5d846d=0x0;_0x5d846d<_0x30e0be;++_0x5d846d){let _0x4034b1=_0x426fa7[_0x5d846d];_0x4034b1['requestContent']();}}function _0x1547a5(_0x123d1a,_0x51d140){let _0x1e5fa7=_0x123d1a['_processTiles'],_0x200520=_0x1e5fa7['length'];for(let _0x43e159=0x0;_0x43e159<_0x200520;++_0x43e159){let _0x11674d=_0x1e5fa7[_0x43e159];_0x11674d['transformResource'](_0x51d140,_0x123d1a);}}function _0x4222a3(_0x376e7e,_0x3f614c){for(let _0x325d51=0x0,_0x3c1b2a=_0x376e7e['_renderQueue']['length'];_0x325d51<_0x3c1b2a;_0x325d51++){const _0x38932f=_0x376e7e['_renderQueue'][_0x325d51];_0x38932f['update'](_0x3f614c,_0x376e7e);}}function _0x4ee329(_0x4b87d5,_0x57e705){_0x57e705['free']();}function _0x3fef37(_0x2e7c58){_0x2e7c58['_isS3MBlock']?_0x2e7c58['_cache']['unloadBlockTiles'](_0x2e7c58,_0x4ee329):_0x2e7c58['_cache']['unloadTiles'](_0x2e7c58,_0x4ee329);}_0x364f9d['prototype']['releaseSelection']=function(){if(this['_selections']['length']<0x1)return;this['_removeObjsOperationType'](this['_selections'],_0x853d3f['SELECTED']),this['_selections']['length']=0x0;},_0x364f9d['prototype']['setLodRangeScale']=function(_0x5845e6){this['_lodRangeScale']=_0x5845e6;},_0x364f9d['prototype']['setSelection']=function(_0x6cfd2f){Cesium['Check']['defined']('setSelection\x20ids',_0x6cfd2f);if(!this['_selectEnabled'])return;!Array['isArray'](_0x6cfd2f)&&(_0x6cfd2f=[_0x6cfd2f]),!this['_multiChoose']&&this['releaseSelection'](),this['_selections']=this['_selections']['concat'](_0x6cfd2f),this['_setObjsOperationType'](_0x6cfd2f,_0x853d3f['SELECTED']);},_0x364f9d['prototype']['getSelection']=function(){return[]['concat'](this['_selections']);},_0x364f9d['prototype']['setObjsColor']=function(_0x10912d,_0x32ffb2){Cesium['Check']['defined']('setObjsColor\x20ids',_0x10912d),Cesium['Check']['defined']('setObjsColor\x20color',_0x32ffb2),Cesium['Check']['typeOf']['object']('setObjsColor\x20color',_0x32ffb2);!Array['isArray'](_0x10912d)&&(_0x10912d=[_0x10912d]);let _0x365054={};for(let _0x6161cb=0x0,_0xa9248b=_0x10912d['length'];_0x6161cb<_0xa9248b;_0x6161cb++){let _0x211b60=_0x10912d[_0x6161cb]+'';if(!Cesium['defined'](_0x211b60))continue;this['_objsColorList'][_0x211b60]=_0x32ffb2,_0x365054[_0x211b60]=_0x32ffb2;}this['_updateObjsColor'](_0x365054);},_0x364f9d['prototype']['removeObjsColor']=function(_0x5c318d){Cesium['Check']['defined']('removeObjsColor\x20ids',_0x5c318d);!Array['isArray'](_0x5c318d)&&(_0x5c318d=[_0x5c318d]);let _0x1978c3={};for(let _0x4b8efc=0x0,_0x9c5e78=_0x5c318d['length'];_0x4b8efc<_0x9c5e78;_0x4b8efc++){let _0x5422c2=_0x5c318d[_0x4b8efc];Cesium['defined'](this['_objsColorList'][_0x5422c2])&&(_0x1978c3[_0x5422c2]=Cesium['Color']['TRANSPARENT'],delete this['_objsColorList'][_0x5422c2]);}this['_removeObjsOperationType'](_0x5c318d,_0x853d3f['SetColor']),this['_updateObjsColor'](_0x1978c3);},_0x364f9d['prototype']['setOnlyObjsVisible']=function(_0x45b06c,_0xdbae12){Cesium['Check']['defined']('setOnlyObjsVisible\x20ids',_0x45b06c),Cesium['Check']['typeOf']['bool']('setOnlyObjsVisible\x20isVisible',_0xdbae12);!Array['isArray'](_0x45b06c)&&(_0x45b06c=[_0x45b06c]);if(_0x45b06c['length']===0x0){this['_allObjsHide']=_0xdbae12,this['_objsVisibleList']['removeAll']();let _0x4abba7=Object['keys'](this['_objsHideList']['_hash']);this['_removeObjsOperationType'](_0x4abba7,_0x853d3f['HIDE']),this['_objsHideList']['removeAll'](),this['_updateAllObjsVisible'](!_0xdbae12);return;}let _0x50c9f0=this['_objsVisibleList'],_0x2cc418=this['_objsHideList'],_0x310f6e=this['_objsVisibleMap'];!_0xdbae12?(_0x45b06c['map'](function(_0x254346){_0x50c9f0['remove'](_0x254346),_0x2cc418['set'](_0x254346,!![]);}),this['_setObjsOperationType'](_0x45b06c,_0x853d3f['HIDE'])):(_0x45b06c['map'](function(_0x963549){_0x50c9f0['set'](_0x963549,!![]),_0x2cc418['remove'](_0x963549);}),this['_removeObjsOperationType'](_0x45b06c,_0x853d3f['HIDE']));},_0x364f9d['prototype']['setObjsVisible']=function(_0x35c20b,_0x44f861){if(_0x35c20b['length']===0x0){this['setOnlyObjsVisible']([],_0x44f861);return;}this['setOnlyObjsVisible']([],_0x44f861),this['setOnlyObjsVisible'](_0x35c20b,_0x44f861);};function _0x345cfd(_0x4a3c3f,_0x1f27ba,_0x383884){let _0x138db7=new Cesium['Cartesian3'](),_0x1cb977=new Cesium['Cartesian3']();Cesium['Cartesian3']['subtract'](_0x1f27ba,_0x4a3c3f,_0x138db7),Cesium['Cartesian3']['subtract'](_0x383884,_0x4a3c3f,_0x1cb977);let _0x23ca21=new Cesium['Cartesian3']();Cesium['Cartesian3']['cross'](_0x138db7,_0x1cb977,_0x23ca21),Cesium['Cartesian3']['normalize'](_0x23ca21,_0x23ca21);let _0x293c6e=-Cesium['Cartesian3']['dot'](_0x23ca21,_0x4a3c3f);return new Cesium['Cartesian4'](_0x23ca21['x'],_0x23ca21['y'],_0x23ca21['z'],_0x293c6e);}function _0x5e065f(_0xa20e09,_0x504a65){_0xa20e09['clip'](_0x504a65);}_0x364f9d['prototype']['setCustomClipPlane']=function(_0x4f7a59,_0x4fdf80,_0x3f7303,_0x276f1f){this['_sceneMode']===Cesium['SceneMode']['COLUMBUS_VIEW']&&(_0x4f7a59=_0x7224cd(_0x4f7a59),_0x4fdf80=_0x7224cd(_0x4fdf80),_0x3f7303=_0x7224cd(_0x3f7303)),this['_oriClipPlane'][0x0]=_0x345cfd(_0x4f7a59,_0x4fdf80,_0x3f7303),this['_clipMode']=_0x13a8de['CLIP_BEHIND_ALL_PLANE'],this['_enableClipPlane']=!![],!this['_enableClip']&&this['_tranverseRenderEntity']({'enable':!![]},_0x5e065f),this['_enableClip']=!![];},_0x364f9d['prototype']['setCustomClipBox']=function(_0x1963b5){_0x1963b5=_0x1963b5||{};if((!_0x1963b5['dimensions']||!_0x1963b5['position'])&&(!_0x1963b5['planePos']||!_0x1963b5['planeNormal']))throw new Cesium['DeveloperError']('dimensions\x20position\x20is\x20required\x20to\x20create\x20CustomClipBox');this['_clipMode']=_0x13a8de['CLIP_BEHIND_ALL_PLANE'];if(Cesium['defined'](_0x1963b5['clipMode']))switch(_0x1963b5['clipMode']){case'clip_behind_any_plane':this['_clipMode']=_0x13a8de['CLIP_BEHIND_ANY_PLANE'];break;case'clip_behind_all_plane':this['_clipMode']=_0x13a8de['CLIP_BEHIND_ALL_PLANE'];break;case'only_keep_line':this['_clipMode']=_0x13a8de['ONLY_KEEP_LINE'];break;default:break;}if(_0x1963b5['dimensions']){let _0x357a0e=new Cesium['Matrix4'](),_0x409728=_0x1963b5['position'],_0x2f27b9,_0x14cead,_0x388c25;_0x2f27b9=_0x1963b5['heading']||0x0,_0x14cead=_0x1963b5['pitch']||0x0,_0x388c25=_0x1963b5['roll']||0x0;let _0x3cdf22=new Cesium['HeadingPitchRoll'](_0x2f27b9,_0x14cead,_0x388c25);if(this['_sceneMode']===Cesium['SceneMode']['SCENE3D'])_0x357a0e=Cesium['Transforms']['headingPitchRollToFixedFrame'](_0x409728,_0x3cdf22,Cesium['Ellipsoid']['WGS84']);else{_0x3cdf22=new Cesium['HeadingPitchRoll'](_0x14cead,-_0x388c25,-_0x2f27b9);let _0x45b39d=_0x7224cd(_0x409728);Cesium['Matrix4']['setTranslation'](Cesium['Matrix4']['clone'](Cesium['Matrix4']['IDENTITY']),_0x45b39d,_0x357a0e);let _0x1e1ffc=Cesium['Matrix3']['fromHeadingPitchRoll'](_0x3cdf22);Cesium['Matrix4']['multiplyByMatrix3'](_0x357a0e,_0x1e1ffc,_0x357a0e);}let _0x461d2a,_0x403c35,_0x439fdc;this['_sceneMode']===Cesium['SceneMode']['SCENE3D']?(_0x461d2a=_0x1963b5['dimensions']['x']*0.5,_0x403c35=_0x1963b5['dimensions']['y']*0.5,_0x439fdc=_0x1963b5['dimensions']['z']*0.5):(_0x461d2a=_0x1963b5['dimensions']['z']*0.5,_0x403c35=_0x1963b5['dimensions']['x']*0.5,_0x439fdc=_0x1963b5['dimensions']['y']*0.5);let _0x49f092=[];_0x49f092[0x0]=new Cesium['Cartesian4'](-_0x461d2a,_0x403c35,_0x439fdc,0x1),_0x49f092[0x1]=new Cesium['Cartesian4'](_0x461d2a,_0x403c35,_0x439fdc,0x1),_0x49f092[0x2]=new Cesium['Cartesian4'](_0x461d2a,-_0x403c35,_0x439fdc,0x1),_0x49f092[0x3]=new Cesium['Cartesian4'](-_0x461d2a,-_0x403c35,_0x439fdc,0x1),_0x49f092[0x4]=new Cesium['Cartesian4'](-_0x461d2a,_0x403c35,-_0x439fdc,0x1),_0x49f092[0x5]=new Cesium['Cartesian4'](_0x461d2a,_0x403c35,-_0x439fdc,0x1),_0x49f092[0x6]=new Cesium['Cartesian4'](_0x461d2a,-_0x403c35,-_0x439fdc,0x1),_0x49f092[0x7]=new Cesium['Cartesian4'](-_0x461d2a,-_0x403c35,-_0x439fdc,0x1);for(let _0x2d1846=0x0;_0x2d1846<0x8;_0x2d1846++){Cesium['Matrix4']['multiplyByVector'](_0x357a0e,_0x49f092[_0x2d1846],_0x49f092[_0x2d1846]);}this['_oriClipPlane'][0x0]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x0],_0x49f092[0x1],_0x49f092[0x2])),this['_oriClipPlane'][0x1]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x0],_0x49f092[0x4],_0x49f092[0x1])),this['_oriClipPlane'][0x2]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x0],_0x49f092[0x3],_0x49f092[0x4])),this['_oriClipPlane'][0x3]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x6],_0x49f092[0x2],_0x49f092[0x5])),this['_oriClipPlane'][0x4]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x6],_0x49f092[0x7],_0x49f092[0x2])),this['_oriClipPlane'][0x5]=Cesium['Cartesian4']['clone'](_0x345cfd(_0x49f092[0x6],_0x49f092[0x5],_0x49f092[0x7]));}else for(let _0x13d5eb=0x0;_0x13d5eb<_0x1963b5['planePos']['length'];_0x13d5eb++){let _0x379686=_0x1963b5['planePos'][_0x13d5eb],_0x56a41e=_0x1963b5['planeNormal'][_0x13d5eb];this['_oriClipPlane'][_0x13d5eb]['x']=_0x56a41e['x'],this['_oriClipPlane'][_0x13d5eb]['y']=_0x56a41e['y'],this['_oriClipPlane'][_0x13d5eb]['z']=_0x56a41e['z'],this['_oriClipPlane'][_0x13d5eb]['w']=-Cesium['Cartesian3']['dot'](_0x379686,_0x56a41e);}!this['_enableClip']&&this['_tranverseRenderEntity']({'enable':!![]},_0x5e065f),this['_enableClip']=!![];};function _0x7224cd(_0x3645e2){var _0x502840=new Cesium['GeographicProjection'](),_0x990c69=_0x502840['ellipsoid'],_0x17f213=new Cesium['Cartesian3'](),_0x2e3f6f=new Cesium['Cartographic']();return _0x990c69['cartesianToCartographic'](_0x3645e2,_0x2e3f6f),_0x502840['project'](_0x2e3f6f,_0x17f213),Cesium['Cartesian3']['fromElements'](_0x17f213['z'],_0x17f213['x'],_0x17f213['y']);}_0x364f9d['prototype']['clearCustomClipBox']=function(){this['_enableClip']=![],this['_enableClipPlane']=![],this['_tranverseRenderEntity']({'enable':![]},_0x5e065f);},_0x364f9d['prototype']['setModifyRegions']=function(_0x61026a,_0x3f0644){this['clearModifyRegions']();if(_0x3f0644==_0x13dad5['CLIP_INSIDE']||_0x3f0644==_0x13dad5['CLIP_OUTSIDE']){var _0x334703=_0x61026a['length'];for(var _0x3f628e=0x0;_0x3f628e<_0x334703;_0x3f628e++){var _0x48a83f={'position':_0x61026a[_0x3f628e],'name':'modify_'+_0x3f628e};this['addExcavationRegion'](_0x48a83f);}}this['_excavationMode']=_0x3f0644;},_0x364f9d['prototype']['clearModifyRegions']=function(){var _0x461e04=Object['keys'](this['_excavationRegions']['_hash']);for(var _0x105ca0=0x0,_0x1eee4f=_0x461e04['length'];_0x105ca0<_0x1eee4f;_0x105ca0++){var _0x28485d=_0x461e04[_0x105ca0];_0x28485d['startsWith']('modify_')&&this['removeExcavationRegion'](_0x28485d);}},_0x364f9d['prototype']['removeExcavationRegion']=function(_0x2e77b4){var _0x2aa116=this['_excavationRegions']['get'](_0x2e77b4),_0x264e42=this['_excavationRegions']['remove'](_0x2e77b4);if(!_0x264e42)return![];_0x2aa116['destroy'](),this['_removeExcavationCommands'](_0x2e77b4),this['_excavationUpdate']=!![];if(this['_excavationRegions']['values']['length']===0x0){this['_hasExcavation']=![],this['_excavationUpdate']=![];var _0x50db6c={};_0x50db6c['layer']=this,_0x50db6c['enable']=![],this['_tranverseRenderEntity'](_0x50db6c,_0x288ae7);}return!![];},_0x364f9d['prototype']['_removeExcavationCommands']=function(_0x5135a5){var _0x5ebca7=this['_excavateRegionCommands']['get'](_0x5135a5+'side'),_0x4c6d18=this['_excavateRegionCommands']['get'](_0x5135a5+'bottom');_0x5ebca7&&(_0x5ebca7['vertexArray']=_0x5ebca7['vertexArray']&&!_0x5ebca7['vertexArray']['isDestroyed']()&&_0x5ebca7['vertexArray']['destroy']()),_0x4c6d18&&(_0x4c6d18['vertexArray']=_0x4c6d18['vertexArray']&&!_0x4c6d18['vertexArray']['isDestroyed']()&&_0x4c6d18['vertexArray']['destroy']()),this['_excavateRegionCommands']['remove'](_0x5135a5+'side'),this['_excavateRegionCommands']['remove'](_0x5135a5+'bottom');},_0x364f9d['prototype']['addExcavationRegion']=function(_0x436afe){var _0x3b6a17=_0x436afe['name'],_0x5c243c=_0x436afe['position'],_0x4b8a3b=_0x436afe['height'];!Cesium['defined'](_0x3b6a17)&&Check['typeOf']['string']('options.name',_0x3b6a17);!Cesium['defined'](_0x5c243c)&&Check['typeOf']['string']('options.position',_0x5c243c);var _0x114ec9=this['_excavationRegions']['get'](_0x3b6a17);if(Cesium['defined'](_0x114ec9))return![];!Cesium['defined'](this['_excavationTexture'])&&(this['_excavationTexture']=new Cesium['Texture']({'context':this['context'],'width':this['_flattenTextureWidth'],'height':this['_flattenTextureWidth'],'pixelFormat':Cesium['PixelFormat']['RGBA']}),window['texture']=this['_excavationTexture']);var _0x449d15=this['_createRasterRegion'](_0x5c243c,_0x4b8a3b,Cesium['defined'](_0x4b8a3b));_0x449d15['name']=_0x3b6a17,this['_excavationRegions']['set'](_0x3b6a17,_0x449d15),this['_excavationUpdate']=!![],this['_hasExcavation']=!![];if(this['_excavationRegions']['values']['length']===0x1){var _0x33fb67={};_0x33fb67['layer']=this,_0x33fb67['enable']=!![],this['_tranverseRenderEntity'](_0x33fb67,_0x288ae7);}return!![];};function _0x288ae7(_0x48f1af,_0x292640){_0x48f1af['enableExcavation'](_0x292640);}_0x364f9d['prototype']['_tranverseRenderEntity']=function(_0x3948f9,_0x3818da){let _0x149fc8=[];for(let _0x3c903f=0x0,_0x38708f=this['_rootTiles']['length'];_0x3c903f<_0x38708f;_0x3c903f++){let _0x261689=this['_rootTiles'][_0x3c903f];_0x149fc8['push'](_0x261689);}while(_0x149fc8['length']){let _0x536f61=_0x149fc8['pop']();for(let _0x3aa7f4=0x0,_0x54c2da=_0x536f61['pageLods']['length'];_0x3aa7f4<_0x54c2da;_0x3aa7f4++){const _0x3e5476=_0x536f61['pageLods'][_0x3aa7f4],_0x3084ac=_0x3e5476['renderEntities'];for(let _0x922ab=0x0,_0x5c2e14=_0x3084ac['length'];_0x922ab<_0x5c2e14;_0x922ab++){const _0x37de1e=_0x3084ac[_0x922ab];_0x37de1e['ready']&&_0x3818da(_0x37de1e,_0x3948f9);}_0x3e5476['childTile']&&_0x149fc8['push'](_0x3e5476['childTile']);}}};function _0x1c3817(_0x167098,_0x4bb6af){_0x167098['updateObjsOperation'](_0x4bb6af['ids'],_0x4bb6af);}_0x364f9d['prototype']['_updateObjsOperation']=function(_0x306207){this['_tranverseRenderEntity']({'ids':_0x306207},_0x1c3817);};function _0x2e68a9(_0x3c33ea,_0x49bf9c){_0x3c33ea['updateObjsColor'](_0x49bf9c['ids'],_0x49bf9c);}_0x364f9d['prototype']['_updateObjsColor']=function(_0x876b2d){this['_tranverseRenderEntity']({'ids':_0x876b2d},_0x2e68a9);};function _0xea0fe7(_0x1e4046,_0x1d05f8){_0x1e4046['updateAllObjsVisible'](_0x1d05f8['isVisible']);}_0x364f9d['prototype']['_updateAllObjsVisible']=function(_0x3f9ec3){this['_tranverseRenderEntity']({'isVisible':_0x3f9ec3},_0xea0fe7);},_0x364f9d['prototype']['_setObjsOperationType']=function(_0x24810a,_0x3f2169){Cesium['Check']['defined']('set\x20Objs\x20Operation\x20ids',_0x24810a),Cesium['Check']['defined']('set\x20Objs\x20Operation\x20operationType',_0x3f2169);!Array['isArray'](_0x24810a)&&(_0x24810a=[_0x24810a]);let _0x42d32a=new Cesium['AssociativeArray'](),_0x5b8d4c;for(let _0x5ecf0c=0x0,_0xb47bc2=_0x24810a['length'];_0x5ecf0c<_0xb47bc2;_0x5ecf0c++){_0x5b8d4c=_0x24810a[_0x5ecf0c];if(!Cesium['defined'](_0x5b8d4c))continue;let _0x26ec7d=Cesium['defaultValue'](this['_objsOperationList']['get'](_0x5b8d4c),0x0);if(_0x26ec7d===_0x3f2169)continue;_0x26ec7d=_0x26ec7d|_0x3f2169,this['_objsOperationList']['set'](_0x5b8d4c,_0x26ec7d),_0x42d32a['set'](_0x5b8d4c,_0x26ec7d);}_0x42d32a['length']>0x0&&this['_updateObjsOperation'](_0x42d32a);},_0x364f9d['prototype']['_removeObjsOperationType']=function(_0x2cc8eb,_0x5f062c){Cesium['Check']['defined']('set\x20Objs\x20Operation\x20ids',_0x2cc8eb);!Array['isArray'](_0x2cc8eb)&&(_0x2cc8eb=[_0x2cc8eb]);let _0xbe5ddf=_0x853d3f['ALL']^_0x5f062c,_0x23c911=new Cesium['AssociativeArray'](),_0x5956bc;for(let _0x2a1c5c=0x0,_0x31db4c=_0x2cc8eb['length'];_0x2a1c5c<_0x31db4c;_0x2a1c5c++){_0x5956bc=_0x2cc8eb[_0x2a1c5c];let _0x48bfb1=this['_objsOperationList']['get'](_0x5956bc);if(!Cesium['defined'](_0x48bfb1))continue;_0x48bfb1&=_0xbe5ddf,_0x48bfb1===_0x853d3f['RESET']?this['_objsOperationList']['remove'](_0x5956bc):this['_objsOperationList']['set'](_0x5956bc,_0x48bfb1),_0x23c911['set'](_0x5956bc,_0x48bfb1);}_0x23c911['length']>0x0&&this['_updateObjsOperation'](_0x23c911);},_0x364f9d['prototype']['_createRasterRegion']=function(_0x40a682){let _0x4aaa2a=Cesium['Cartesian3']['fromDegreesArrayHeights'](_0x40a682),_0xee8a66=new Cesium['PolygonGeometry']({'polygonHierarchy':{'positions':_0x4aaa2a},'perPositionHeight':!![]}),_0xb43488=Cesium['PolygonGeometry']['createGeometry'](_0xee8a66),_0x3af32f=new _0xdbb54c();return _0x3af32f['updateGeometry'](_0xb43488,this['invModelMatrix']),_0x3af32f['updateGeoBounds'](_0xb43488),_0x3af32f;};function _0x3f7622(_0x2e77c0,_0x1d456d){_0x2e77c0['flatten'](_0x1d456d);}_0x364f9d['prototype']['addFlattenRegion']=function(_0x2f10a5){let _0x3cb523=_0x2f10a5['name'],_0x387530=_0x2f10a5['position'];if(!_0x3cb523||!_0x387530)return;let _0x35264f=this['_flattenPar'],_0x3f4464=_0x35264f['regions'];if(_0x3f4464['contains'](_0x3cb523))return;!_0x35264f['texture']&&(_0x35264f['texture']=new Cesium['Texture']({'context':this['context'],'width':_0x35264f['textureWidth'],'height':_0x35264f['textureHeight'],'pixelFormat':Cesium['PixelFormat']['RGBA']}));let _0x27d012=this['_createRasterRegion'](_0x387530);_0x3f4464['set'](_0x3cb523,_0x27d012),_0x35264f['isUpdate']=!![],_0x3f4464['values']['length']===0x1&&this['_tranverseRenderEntity']({'enable':!![]},_0x3f7622);};function _0xf0c505(_0x3f2b22,_0x123ad5){_0x3f2b22['hypsometric'](_0x123ad5);}function _0x578b38(_0x3600eb,_0x426972){_0x3600eb['swipe'](_0x426972);}function _0x21e254(_0x1e79f8){let _0x3a9f8b=new Cesium['Cartesian4'](Number['MAX_VALUE'],Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);for(let _0x4fcc3e=0x0;_0x4fcc3e<_0x1e79f8['length'];_0x4fcc3e++){const _0x403d4b=_0x1e79f8[_0x4fcc3e]['bounds'];_0x3a9f8b['x']=Math['min'](_0x403d4b['x'],_0x3a9f8b['x']),_0x3a9f8b['y']=Math['min'](_0x403d4b['y'],_0x3a9f8b['y']),_0x3a9f8b['z']=Math['max'](_0x403d4b['z'],_0x3a9f8b['z']),_0x3a9f8b['w']=Math['max'](_0x403d4b['w'],_0x3a9f8b['w']);}return _0x3a9f8b;}_0x364f9d['prototype']['_updateFlattenFramebuffer']=function(_0x58d918){let _0x3921df=this['_flattenPar'];if(!_0x3921df['isUpdate'])return;_0x3921df['isUpdate']=![];let _0xb0f83=_0x3921df['regions'],_0x2e7e58=_0xb0f83['values']['length'];_0x3921df['flattening']=_0x2e7e58>0x0,_0x3921df['bounds']=_0x21e254(_0xb0f83['values']);let _0x397e94=new Cesium['ClearCommand']({'color':new Cesium['Color'](0x1,0x1,0x1,0x1),'depth':0x1});!_0x3921df['texture']&&(_0x3921df['texture']=new Cesium['Texture']({'context':this['context'],'width':_0x3921df['textureWidth'],'height':_0x3921df['textureHeight'],'pixelFormat':Cesium['PixelFormat']['RGBA']}));!_0x3921df['fbo']&&(_0x3921df['fbo']=new Cesium['Framebuffer']({'context':this['context'],'colorTextures':[_0x3921df['texture']],'destroyAttachments':![]}));_0x397e94['framebuffer']=_0x3921df['fbo'],_0x397e94['renderState']=Cesium['RenderState']['fromCache'](),_0x397e94['execute'](this['context']);for(let _0x53ac91=0x0;_0x53ac91<_0x2e7e58;_0x53ac91++){let _0x18e6b5=_0xb0f83['values'][_0x53ac91];_0x18e6b5['createCommand'](this['context'],_0x3921df['fbo']),_0x18e6b5['command']['uniformMap']={'uRect':function(){return _0x3921df['bounds'];}},_0x18e6b5['command']['execute'](this['context']);}},_0x364f9d['prototype']['setVisibleInViewport']=function(_0x211ff1,_0x2a2f36){if(_0x211ff1>0x8)throw new Cesium['DeveloperError']('the\x20index\x20is\x200~8');_0x2a2f36?this['_visibleViewport']=0x1<<_0x211ff1|this['_visibleViewport']:this['_visibleViewport']=~(0x1<<_0x211ff1)&this['_visibleViewport'];},_0x364f9d['prototype']['getVisibleInViewport']=function(_0x5a4580){if(_0x5a4580>0x8)throw new Cesium['DeveloperError']('the\x20index\x20is\x200~3');return 0x1<<_0x5a4580&this['_visibleViewport'];},_0x364f9d['prototype']['_updateEdgeDistanceFalloffFactor']=function(){if(this['_edgeCurrentCount']===0x0){this['_edgeCurrentTotalLength']=0x0;return;}this['_edgeDistanceFalloffFactor']=this['_edgeCurrentTotalLength']/this['_edgeCurrentCount']*0x28,this['_edgeCurrentTotalLength']=0x0,this['_edgeCurrentCount']=0x0;},_0x364f9d['prototype']['_addRenderedEdge']=function(_0x3616e9,_0x46c5f0){this['_edgeCurrentTotalLength']+=_0x3616e9,this['_edgeCurrentCount']+=_0x46c5f0;};function _0x5e4eb2(_0x266704,_0x27479c){if(!_0x266704['_waterPlanes'])return;let _0x50acda=_0x266704['_waterPlanes'];_0x27479c['curDis']===undefined&&(_0x27479c['curDis']=0x615299);_0x27479c['heightOffset']===undefined&&(_0x27479c['heightOffset']=0x0);let _0x81253c=_0x27479c['camera']['positionWC'];for(let _0x2469ab in _0x50acda['_hash']){if(_0x50acda['_hash']['hasOwnProperty'](_0x2469ab)){let _0x23bb01=_0x50acda['get'](_0x2469ab),_0x42cebf=_0x23bb01['boundingVolume'];if(_0x27479c['cullingVolume']['computeVisibility'](_0x42cebf)===Cesium['Intersect']['OUTSIDE'])continue;let _0x371e43=Cesium['Cartesian3']['distance'](_0x42cebf['center'],_0x81253c)-_0x42cebf['radius'];_0x371e43=_0x371e43<0.01?0.01:_0x371e43,_0x371e43<_0x27479c['curDis']&&(_0x27479c['curDis']=_0x371e43,_0x27479c['heightOffset']=_0x23bb01['distance']);}}}_0x364f9d['prototype']['addWaterPlane']=function(_0x44b133){let _0x576954=this['_waterPlanes']['length'];return this['_waterPlanes']['set'](_0x576954,_0x44b133),_0x576954;},_0x364f9d['prototype']['removeWaterPlane']=function(_0xa7b493){this['_waterPlanes']['remove'](_0xa7b493);},_0x364f9d['prototype']['prePassesUpdate']=function(_0x410502){if(!this['ready'])return;_0x410502['newFrame']&&(this['_cache']['reset'](),this['_requestTiles']['length']=0x0,this['_processTiles']['length']=0x0,this['_renderQueue']['length']=0x0,Cesium['defined'](_0x410502['brdfLutGenerator'])&&_0x410502['brdfLutGenerator']['update'](_0x410502),_0x5e4eb2(this,_0x410502));};let _0x1346d8=new Cesium['Matrix4']();_0x364f9d['prototype']['postPassesUpdate']=function(_0x1cc9df){if(!this['ready'])return;_0x3fef37(this),this['_updateFlattenFramebuffer'](_0x1cc9df),this['_updateEdgeDistanceFalloffFactor'](),this['_updateExcavationFrameBuffer'](_0x1cc9df),this['_subTextureManager']&&this['_subTextureManager']['processRequests'](this['id']);};function _0x3463f6(_0x50a99c,_0x44898){let _0x3c1db7=_0x44898['camera'];if(_0x3c1db7['positionCartographic']['height']<_0x50a99c['_minVisibleAltitude']||_0x3c1db7['positionCartographic']['height']>_0x50a99c['_maxVisibleAltitude'])return![];if(!_0x50a99c['getVisibleInViewport'](_0x44898['multiViewportIndex']))return![];return _0x50a99c['visible'];}function _0x47889d(_0x35d8f,_0x1bec97){if(_0x35d8f['_enableClip']){let _0x4ebac7=_0x1bec97['camera']['inverseViewMatrix'];Cesium['Matrix4']['transpose'](_0x4ebac7,_0x1346d8);for(let _0x3aa5b7=0x0;_0x3aa5b7<0x6;_0x3aa5b7++){Cesium['Matrix4']['multiplyByVector'](_0x1346d8,_0x35d8f['_oriClipPlane'][_0x3aa5b7],_0x35d8f['_clipPlane'][_0x3aa5b7]);}}}function _0x450bba(_0x4ca4fe){var _0x521d72=0x0;Cesium['defined'](_0x4ca4fe['style3D'])&&(_0x521d72=_0x4ca4fe['style3D']['bottomAltitude']);var _0x9821c2=_0x4ca4fe['height']+_0x521d72,_0x40fad4=_0x4ca4fe['lon'],_0x279f15=_0x4ca4fe['lat'];if(_0x4ca4fe['_sceneMode']===Cesium['SceneMode']['SCENE3D'])_0x4ca4fe['_position']=Cesium['Cartesian3']['fromDegrees'](_0x40fad4,_0x279f15,_0x9821c2),_0x4ca4fe['modelMatrix']=Cesium['Transforms']['eastNorthUpToFixedFrame'](_0x4ca4fe['_position']),_0x4ca4fe['invModelMatrix']=Cesium['Matrix4']['inverse'](_0x4ca4fe['modelMatrix'],_0x4ca4fe['invModelMatrix']);else{if(_0x40fad4>0xb4||_0x40fad4<-0xb4||_0x279f15>0xb4||_0x279f15<-0xb4){let _0x28794f=_0x40fad4,_0x2aa3d5=_0x279f15;_0x4ca4fe['_position']=new Cesium['Cartesian3'](_0x28794f,_0x2aa3d5,_0x9821c2);}else{let _0x2310a3=new Cesium['GeographicProjection'](),_0x18eb15=Cesium['Cartesian3']['fromDegrees'](_0x40fad4,_0x279f15,_0x9821c2),_0x2f4101=_0x2310a3['ellipsoid']['cartesianToCartographic'](_0x18eb15);_0x4ca4fe['_position']=_0x2310a3['project'](_0x2f4101);}Cesium['Matrix4']['fromTranslation'](_0x4ca4fe['_position'],_0x4ca4fe['modelMatrix']),Cesium['Matrix4']['multiply'](_0x11646f,_0x4ca4fe['modelMatrix'],_0x4ca4fe['modelMatrix']),_0x4ca4fe['invModelMatrix']=Cesium['Matrix4']['inverse'](_0x4ca4fe['modelMatrix'],_0x4ca4fe['invModelMatrix']);}}_0x364f9d['prototype']['update']=function(_0x19cc1b){if(!this['ready']||!_0x3463f6(this,_0x19cc1b))return;this['_PBRMaterialParams']['loadingTexture']&&this['_updatePBRMaterial']();if(this['_textureCompressType']===_0x423842['CRN_DXT5']&&!_0x150013['wasmReady']){_0x150013['init']();return;}if(this['_vertexCompressionType']==='DRACO'&&!_0x2809c7['wasmReady']){_0x2809c7['init']();return;}this['_schuduler']['schedule'](this,_0x19cc1b),_0x43d2d1(this),_0x1547a5(this,_0x19cc1b),_0x4222a3(this,_0x19cc1b),_0x47889d(this,_0x19cc1b);var _0x127b49=this['_excavateRegionCommands']['values']['length'];for(var _0x3fd222=0x0;_0x3fd222<_0x127b49;_0x3fd222++){var _0x3b5509=this['_excavateRegionCommands']['values'][_0x3fd222];_0x19cc1b['commandList']['push'](_0x3b5509);}this['_style3D']['_dirty']&&(_0x450bba(this),this['_style3D']['_dirty']=![]),this['_frameState']=_0x19cc1b;},_0x364f9d['prototype']['setPBRMaterialFromJSON']=function(_0x358035){var _0x3247c4=this,_0x2023d7=typeof _0x358035==='string';_0x3247c4['_PBRMaterialParams']['baseUri']=_0x2023d7?Cesium['getBaseUri'](_0x358035):'';if(_0x2023d7){let _0x4ae0ec=Cesium['Resource']['createIfNeeded'](_0x358035);_0x4ae0ec['fetchJson'](_0x358035)['then'](function(_0x5b5615){_0x4c4e57(_0x5b5615,_0x3247c4);});}else _0x4c4e57(_0x358035,_0x3247c4);};function _0x4c4e57(_0x1da570,_0x586a4c){var _0x42b4ac=_0x586a4c,_0x3e9464=_0x42b4ac['_PBRMaterialParams']['baseUri'];_0x42b4ac['_PBRMaterialParams']=_0x1da570['material'],_0x42b4ac['_PBRMaterialParams']['baseUri']=_0x3e9464,_0x42b4ac['_loadMaterialTexture'](_0x42b4ac['_PBRMaterialParams'],_0x3e9464);var _0x16e5f4=_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness'],_0x536632=_0x42b4ac['_PBRMaterialParams']['textureunitstates'];Cesium['defined'](_0x16e5f4['volume'])&&(_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness']['volume']={'thickness':0x1,'tintColor':Cesium['Cartesian4']['fromElements'](0x1,0x1,0x1,0x1),'diffusionDistance':Cesium['Cartesian4']['fromElements'](0x1,0x1,0x1,0x1),'transmissionFactor':0x1});Cesium['defined'](_0x16e5f4['clearcoat'])&&(_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness']['clearcoat']={'clearcoatFactor':0x0,'clearcoatRoughnessFactor':0x0});if(Cesium['defined'](_0x16e5f4['snowEffect'])&&_0x16e5f4['snowEffect']['snowNormalTextureIndex']!==-0x1){var _0x2fb28a=_0x3e9464+_0x536632[_0x16e5f4['snowEffect']['snowNormalTextureIndex']]['textureunitstate']['url'];_0x42b4ac['_PBRMaterialParams']['pendingTextureCount']++,_0x44f7ba(_0x42b4ac['context'],_0x2fb28a,_0x42b4ac['_PBRMaterialParams'],_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness']['snowEffect'],'snowNormalTexture');}if(Cesium['defined'](_0x16e5f4['snowEffect'])&&_0x16e5f4['snowEffect']['snowMaskTextureIndex']!==-0x1){var _0x2fb28a=_0x3e9464+_0x536632[_0x16e5f4['snowEffect']['snowMaskTextureIndex']]['textureunitstate']['url'];_0x42b4ac['_PBRMaterialParams']['pendingTextureCount']++,_0x44f7ba(_0x42b4ac['context'],_0x2fb28a,_0x42b4ac['_PBRMaterialParams'],_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness']['snowEffect'],'snowMaskTexture');}if(Cesium['defined'](_0x16e5f4['rainEffect'])&&_0x16e5f4['rainEffect']['rippleTextureIndex']!==-0x1){var _0x2fb28a=_0x3e9464+_0x536632[_0x16e5f4['rainEffect']['rippleTextureIndex']]['textureunitstate']['url'];_0x42b4ac['_PBRMaterialParams']['pendingTextureCount']++,_0x44f7ba(_0x42b4ac['context'],_0x2fb28a,_0x42b4ac['_PBRMaterialParams'],_0x42b4ac['_PBRMaterialParams']['pbrMetallicRoughness']['rainEffect'],'rippleTexture');}}function _0x532dee(_0x5e6264,_0x5af4c9){_0x5e6264['pbrParameterChange'](_0x5af4c9);}_0x364f9d['prototype']['_updatePBRMaterial']=function(){if(!Cesium['defined'](this['_PBRMaterialParams'])||!Cesium['defined'](this['_PBRMaterialParams']['pendingTextureCount']))return;if(this['_PBRMaterialParams']['pendingTextureCount']===this['_PBRMaterialParams']['readyTextureCount']){var _0xad678c={};_0xad678c['enable']=!![],_0xad678c['layer']=this,this['_tranverseRenderEntity'](_0xad678c,_0x532dee),this['_PBRMaterialParams']['loadingTexture']=![];}},_0x364f9d['prototype']['removePBRMaterial']=function(){var _0x1253ff=this['_PBRMaterialParams']['pbrMetallicRoughness'];for(var _0x20b78a in _0x1253ff){_0x1253ff['hasOwnProperty'](_0x20b78a)&&_0x1253ff[_0x20b78a]instanceof Cesium['Texture']&&_0x1253ff[_0x20b78a]['destroy']();}this['_PBRMaterialParams']={'pbrMetallicRoughness':{'metallicFactor':0x0,'roughnessFactor':0x0,'baseColor':new Cartesian4(0x1,0x1,0x1,0x1),'baseColorTextureIndex':-0x1,'emissiveFactor':Cartesian3['ZERO'],'emissiveTextureIndex':-0x1,'occlusionTextureIndex':-0x1,'metallicRoughnessTextureIndex':-0x1,'normalTextureIndex':-0x1,'normalTexture':undefined,'baseColorTexture':undefined,'intensityScale':0x1,'snowEffect':undefined,'rainEffect':undefined,'volume':undefined,'clearcoat':undefined,'anisotropy':undefined},'loadingTexture':undefined};var _0xf8c5b={};_0xf8c5b['enable']=!![],_0xf8c5b['layer']=this,this['_tranverseRenderEntity'](_0xf8c5b,_0x532dee);};function _0x44f7ba(_0x4d4b7d,_0x3b1a61,_0x4e2985,_0x1c81d1,_0x3b863c){var _0x591dc9=Cesium['Resource']['createIfNeeded'](_0x3b1a61),_0x144df7=_0x591dc9['fetchImage']()['then'](function(_0x4a425c){var _0x14c525=new Cesium['Texture']({'context':_0x4d4b7d,'source':_0x4a425c,'sampler':new Cesium['Sampler']({'wrapS':Cesium['TextureWrap']['REPEAT'],'wrapT':Cesium['TextureWrap']['REPEAT'],'minificationFilter':Cesium['TextureMinificationFilter']['LINEAR_MIPMAP_LINEAR'],'magnificationFilter':Cesium['TextureMinificationFilter']['LINEAR']})}),_0x2cdd88=!Cesium['Math']['isPowerOfTwo'](_0x14c525['width'])||!Cesium['Math']['isPowerOfTwo'](_0x14c525['height']);!_0x2cdd88&&_0x14c525['generateMipmap'](Cesium['MipmapHint']['NICEST']),_0x1c81d1[_0x3b863c]=_0x14c525,_0x4e2985['readyTextureCount']++;},_0x384288=>{console['error'](_0x384288),_0x4e2985['pendingTextureCount']--;});_0x1c81d1[_0x3b863c]=_0x144df7;}_0x364f9d['prototype']['_loadMaterialTexture']=function(_0x4f1004,_0x4941f0){_0x4f1004['loadingTexture']=!![];var _0x27d0aa=_0x4f1004['pbrMetallicRoughness'],_0x5cf991=_0x4f1004['textureunitstates'],_0x4541f6=_0x27d0aa['baseColorTextureIndex'];!Cesium['defined'](_0x4f1004['pendingTextureCount'])&&(_0x4f1004['pendingTextureCount']=0x0);!Cesium['defined'](_0x4f1004['readyTextureCount'])&&(_0x4f1004['readyTextureCount']=0x0);var _0x241fe8,_0x5be6f1,_0x246a11=this['context'],_0x2804cc=Cesium['defined'](_0x4941f0)?_0x4941f0:this['_baseUri']+this['_materialRelativePath'];_0x4541f6>-0x1&&!Cesium['defined'](_0x27d0aa['baseColorTexture'])&&(_0x5be6f1=_0x5cf991[_0x4541f6],_0x241fe8=_0x2804cc+_0x5be6f1['textureunitstate']['url'],_0x44f7ba(_0x246a11,_0x241fe8,_0x4f1004,_0x4f1004['pbrMetallicRoughness'],'baseColorTexture'),_0x4f1004['pendingTextureCount']++);var _0x180b01=_0x27d0aa['emissiveTextureIndex'];_0x180b01>-0x1&&!Cesium['defined'](_0x27d0aa['emissiveTexture'])&&(_0x5be6f1=_0x5cf991[_0x180b01],_0x241fe8=_0x2804cc+_0x5be6f1['textureunitstate']['url'],_0x44f7ba(_0x246a11,_0x241fe8,_0x4f1004,_0x4f1004['pbrMetallicRoughness'],'emissiveTexture'),_0x4f1004['pendingTextureCount']++);var _0x1757ec=_0x27d0aa['normalTextureIndex'];_0x1757ec>-0x1&&!Cesium['defined'](_0x27d0aa['normalTexture'])&&(_0x5be6f1=_0x5cf991[_0x1757ec],_0x241fe8=_0x2804cc+_0x5be6f1['textureunitstate']['url'],_0x44f7ba(_0x246a11,_0x241fe8,_0x4f1004,_0x4f1004['pbrMetallicRoughness'],'normalTexture'),_0x4f1004['pendingTextureCount']++);var _0x3c478a=_0x27d0aa['metallicRoughnessTextureIndex'];_0x3c478a>-0x1&&!Cesium['defined'](_0x27d0aa['metallicRoughnessTexture'])&&(_0x5be6f1=_0x5cf991[_0x3c478a],_0x241fe8=_0x2804cc+_0x5be6f1['textureunitstate']['url'],_0x44f7ba(_0x246a11,_0x241fe8,_0x4f1004,_0x4f1004['pbrMetallicRoughness'],'metallicRoughnessTexture'),_0x4f1004['pendingTextureCount']++);var _0x1bd061=_0x27d0aa['occlusionTextureIndex'];_0x1bd061>-0x1&&!Cesium['defined'](_0x27d0aa['occlusionTexture'])&&(_0x5be6f1=_0x5cf991[_0x1bd061],_0x241fe8=_0x2804cc+_0x5be6f1['textureunitstate']['url'],_0x44f7ba(_0x246a11,_0x241fe8,_0x4f1004,_0x4f1004['pbrMetallicRoughness'],'occlusionTexture'),_0x4f1004['pendingTextureCount']++);},_0x364f9d['prototype']['_updateExcavationFrameBuffer']=function(_0x201ead){if(!this['_excavationUpdate'])return;let _0x2c6b76=this['context'];for(var _0x47b9e4 in _0x201ead['_framebufferList']){_0x47b9e4['indexOf']('_excavationHeightLayer')>-0x1&&!Cesium['defined'](this['_excavationRegions']['get'](_0x47b9e4['slice'](0x16)))&&(_0x201ead['_framebufferList'][_0x47b9e4]=!_0x201ead['_framebufferList'][_0x47b9e4]['isDestroyed']()&&_0x201ead['_framebufferList'][_0x47b9e4]['destroy'](),delete _0x201ead['_framebufferList'][_0x47b9e4]);}var _0x1a39ce=this['_excavationRegions']['values']['length'];this['_hasExcavation']=_0x1a39ce>0x0,this['_excavationUpdate']=![],this['_excavationBounds']=_0x21e254(this['_excavationRegions']['values']);var _0x295a4b=new Cesium['ClearCommand']({'color':new Cesium['Color'](0x0,0x0,0x0,0x0),'depth':0x1});_0x295a4b['framebuffer']=new Cesium['Framebuffer']({'context':_0x2c6b76,'colorTextures':[this['_excavationTexture']],'destroyAttachments':![]}),_0x295a4b['renderState']=Cesium['RenderState']['fromCache'](),_0x295a4b['execute'](_0x2c6b76);for(var _0x238cd0=0x0;_0x238cd0<_0x1a39ce;_0x238cd0++){var _0x1529f2=this['_excavationRegions']['values'][_0x238cd0];this['createRasterRegionDrawCommand'](_0x2c6b76,_0x1529f2,this['_excavationTexture'],_0xd5b37d['Color']);var _0x217ac3=this;_0x1529f2['_command']['uniformMap']={'uRect':function(){return _0x217ac3['_excavationBounds'];}},_0x1529f2['_command']['execute'](_0x2c6b76);}_0x295a4b['framebuffer']['destroy']();},_0x364f9d['prototype']['createRasterRegionDrawCommand']=function(_0x2c4f4b,_0xcd4257,_0x45e4b3,_0x3d32cd){if(!Cesium['defined'](_0xcd4257)||Cesium['defined'](_0xcd4257['_command']))return;var _0x57e713=new Cesium['DrawCommand']({'primitiveType':Cesium['PrimitiveType']['TRIANGLES']});_0xcd4257['_command']=_0x57e713;var _0x4958bf={'position':0x0};_0x57e713['vertexArray']=Cesium['VertexArray']['fromGeometry']({'context':_0x2c4f4b,'geometry':_0xcd4257['geometry'],'attributeLocations':_0x4958bf,'bufferUsage':Cesium['BufferUsage']['STATIC_DRAW'],'interleave':!![],'owner':this['name']});var _0x3a1dea=new Cesium['ShaderSource']({'sources':[_0xcdadd0]});if(_0x3d32cd==_0xd5b37d['Altitude'])_0x3a1dea['defines']['push']('Mode_Height'),_0x45e4b3['pixelDatatype']===PixelDatatype['FLOAT']&&_0x3a1dea['defines']['push']('UseFloatTexture'),_0x57e713['shaderProgram']=Cesium['ShaderProgram']['fromCache']({'name':'RegionAltitudeSp','context':_0x2c4f4b,'vertexShaderSource':_0x335101,'fragmentShaderSource':_0x3a1dea,'attributeLocations':_0x4958bf});else _0x3d32cd==_0xd5b37d['Texture']?(_0x3a1dea['defines']['push']('OVERLAY'),_0x57e713['shaderProgram']=Cesium['ShaderProgram']['fromCache']({'name':'RegionTextureSp','context':_0x2c4f4b,'vertexShaderSource':_0x1f0f09,'fragmentShaderSource':_0x3a1dea,'attributeLocations':_0x4958bf})):_0x57e713['shaderProgram']=Cesium['ShaderProgram']['fromCache']({'name':'RegionRasterSp','context':_0x2c4f4b,'vertexShaderSource':_0x2de676,'fragmentShaderSource':_0x3a1dea,'attributeLocations':_0x4958bf});_0x57e713['framebuffer']=new Cesium['Framebuffer']({'context':_0x2c4f4b,'colorTextures':[_0x45e4b3],'destroyAttachments':![]}),_0x57e713['renderState']=Cesium['RenderState']['fromCache']({'viewport':new Cesium['BoundingRectangle'](0x0,0x0,this['_flattenTextureWidth'],this['_flattenTextureWidth'])});},_0x364f9d['prototype']['isDestroyed']=function(){return![];},_0x364f9d['prototype']['destroy']=function(){this['_cache']['reset'](),_0x3fef37(this),this['_rootTiles']['length']=0x0,this['_requestTiles']['length']=0x0,this['_processTiles']['length']=0x0,this['_renderQueue']['length']=0x0,this['_selections']['length']=0x0,this['_objsOperationList']['removeAll'](),this['_objsVisibleList']['removeAll'](),this['_objsHideList']['removeAll'](),this['_objsVisibleMap']={},this['_objsColorList']={},this['_hypsometric']['destroy'](),this['_flattenPar']['destroy']();var _0x4ca3ce=Object['keys'](this['_excavationRegions']['_hash']);for(var _0x22e91f=0x0,_0x30cb14=_0x4ca3ce['length'];_0x22e91f<_0x30cb14;_0x22e91f++){var _0x25600f=_0x4ca3ce[_0x22e91f],_0x5d070f=this['_excavationRegions']['get'](_0x25600f);_0x5d070f['destroy'](),this['_removeExcavationCommands'](_0x25600f);}return this['_excavationRegions']['removeAll'](),delete this['_excavationBounds'],this['_excavationBounds']=null,defined(this['_excavationTexture'])&&(this['_excavationTexture']['destroy'](),this['_excavationTexture']=null),defined(this['_excavationSideTexture'])&&(this['_excavationSideTexture']['destroy'](),this['_excavationSideTexture']=null),defined(this['_excavationBottomTexture'])&&(this['_excavationBottomTexture']['destroy'](),this['_excavationBottomTexture']=null),Cesium['destroyObject'](this);};export default _0x364f9d;