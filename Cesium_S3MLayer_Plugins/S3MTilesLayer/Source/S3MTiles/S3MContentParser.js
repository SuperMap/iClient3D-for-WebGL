const _0x3fa654=(function(){let _0x20972a=!![];return function(_0x427c61,_0x547cd5){const _0x6ea40d=_0x20972a?function(){if(_0x547cd5){const _0x4efa12=_0x547cd5['apply'](_0x427c61,arguments);return _0x547cd5=null,_0x4efa12;}}:function(){};return _0x20972a=![],_0x6ea40d;};}()),_0x26c6e2=_0x3fa654(this,function(){return _0x26c6e2['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x26c6e2)['search']('(((.+)+)+)+$');});_0x26c6e2();import _0x3c462e from'./DDSTexture.js';import _0x26a384 from'./MaterialPass.js';import _0x5c4187 from'./Factory/S3MContentFactory.js';import _0x3dfe3b from'./Enum/VertexCompressOption.js';import _0x320c7f from'../Core/CRNTranscoder.js';import _0x42963d from'../Core/KTX2Transcoder.js';import _0x4c2120 from'./Enum/S3MPixelFormat.js';function _0x3ab49b(){}function _0x2803ef(_0x40d2d9,_0x1ba48b,_0x2cb4de){let _0x43de47={},_0x3699a8=_0x1ba48b['materials']['material'];for(let _0x31ce0f=0x0,_0x184f15=_0x3699a8['length'];_0x31ce0f<_0x184f15;_0x31ce0f++){let _0x76b586=_0x3699a8[_0x31ce0f]['material'],_0x3f962f=_0x76b586['id'],_0x4fab2d=new _0x26a384();_0x43de47[_0x3f962f]=_0x4fab2d;let _0x5c20e1=Cesium['defaultValue'](_0x76b586['ambient'],Cesium['Color']['WHITE']);_0x4fab2d['ambientColor']=new Cesium['Color'](_0x5c20e1['r'],_0x5c20e1['g'],_0x5c20e1['b'],_0x5c20e1['a']);let _0x1db4d9=Cesium['defaultValue'](_0x76b586['diffuse'],Cesium['Color']['WHITE']);_0x4fab2d['diffuseColor']=new Cesium['Color'](_0x1db4d9['r'],_0x1db4d9['g'],_0x1db4d9['b'],_0x1db4d9['a']);let _0x4619b8=Cesium['defaultValue'](_0x76b586['specular'],Cesium['Color']['WHITE']);_0x4fab2d['specularColor']=new Cesium['Color'](_0x4619b8['r'],_0x4619b8['g'],_0x4619b8['b'],_0x4619b8['a']),_0x4fab2d['shininess']=_0x76b586['shininess'],_0x4fab2d['bTransparentSorting']=_0x76b586['transparentsorting'],_0x4fab2d['alphaMode']=_0x76b586['alphaMode'];let _0x570eb7=_0x76b586['textureunitstates'],_0x18c4fd=_0x570eb7['length'];for(let _0x5b7058=0x0;_0x5b7058<_0x18c4fd;_0x5b7058++){let _0x1106c6=_0x570eb7[_0x5b7058]['textureunitstate'],_0x5b3813=_0x1106c6['id'],_0x45639f=_0x1106c6['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x48228d=_0x1106c6['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x4fab2d['texMatrix']=Cesium['Matrix4']['unpack'](_0x1106c6['texmodmatrix']);let _0x1f3329=_0x1ba48b['texturePackage'][_0x5b3813];if(Cesium['defined'](_0x1f3329)&&Cesium['defined'](_0x1f3329['arrayBufferView'])&&_0x1f3329['arrayBufferView']['byteLength']>0x0){_0x1f3329['wrapS']=_0x45639f,_0x1f3329['wrapT']=_0x48228d;let _0x24917a=_0x2cb4de['fileName']+_0x5b3813,_0x23ccd4=_0x40d2d9['textureCache']['getTexture'](_0x24917a);if(!Cesium['defined'](_0x23ccd4)){_0x1f3329['isTexBlock']=![];switch(_0x1f3329['compressType']){case _0x4c2120['NONE']:_0x23ccd4=new Cesium['Texture']({'context':_0x40d2d9,'flipY':![],'pixelFormat':_0x1f3329['internalFormat'],'source':_0x1f3329}),_0x40d2d9['textureCache']['addTexture'](_0x24917a,_0x23ccd4);break;case _0x4c2120['CRN_DXT5']:const _0x44bf43=_0x320c7f['transcode']({'data':_0x1f3329['arrayBufferView'],'bMipMap':!![]});_0x1f3329['arrayBufferView']=_0x44bf43['bufferView'],_0x23ccd4=new _0x3c462e(_0x40d2d9,_0x5b3813,_0x1f3329),_0x40d2d9['textureCache']['addTexture'](_0x24917a,_0x23ccd4);break;case _0x4c2120['KTX2']:_0x23ccd4=_0x42963d['createKTX2'](_0x40d2d9,_0x5b3813,_0x1f3329),_0x40d2d9['textureCache']['addTexture'](_0x24917a,_0x23ccd4);break;default:_0x23ccd4=new _0x3c462e(_0x40d2d9,_0x5b3813,_0x1f3329),_0x40d2d9['textureCache']['addTexture'](_0x24917a,_0x23ccd4);break;}}_0x4fab2d['textures']['push'](_0x23ccd4);}}}return _0x43de47;}function _0x48f778(_0x5f46d5,_0x206aa7){let _0x33e1a4=new Cesium['BoundingSphere'](),_0x8d5e92=new Cesium['Cartesian3'](),_0x34e381=_0x5f46d5['vertexAttributes'][0x0],_0x1e5082=_0x34e381['componentsPerAttribute'],_0x28effd=Cesium['defined'](_0x5f46d5['compressOptions'])&&(_0x5f46d5['compressOptions']&_0x3dfe3b['SVC_Vertex'])===_0x3dfe3b['SVC_Vertex'],_0x7a36d4=0x1,_0x274749,_0x54cdb2;_0x28effd?(_0x7a36d4=_0x5f46d5['vertCompressConstant'],_0x274749=new Cesium['Cartesian3'](_0x5f46d5['minVerticesValue']['x'],_0x5f46d5['minVerticesValue']['y'],_0x5f46d5['minVerticesValue']['z']),_0x54cdb2=new Uint16Array(_0x34e381['typedArray']['buffer'],_0x34e381['typedArray']['byteOffset'],_0x34e381['typedArray']['byteLength']/0x2)):_0x54cdb2=new Float32Array(_0x34e381['typedArray']['buffer'],_0x34e381['typedArray']['byteOffset'],_0x34e381['typedArray']['byteLength']/0x4);let _0x5b0c53=[];for(let _0x424384=0x0;_0x424384<_0x5f46d5['verticesCount'];_0x424384++){Cesium['Cartesian3']['fromArray'](_0x54cdb2,_0x1e5082*_0x424384,_0x8d5e92),_0x28effd&&(_0x8d5e92=Cesium['Cartesian3']['multiplyByScalar'](_0x8d5e92,_0x7a36d4,_0x8d5e92),_0x8d5e92=Cesium['Cartesian3']['add'](_0x8d5e92,_0x274749,_0x8d5e92)),_0x5b0c53['push'](Cesium['Cartesian3']['clone'](_0x8d5e92));}return Cesium['BoundingSphere']['fromPoints'](_0x5b0c53,_0x33e1a4),Cesium['BoundingSphere']['transform'](_0x33e1a4,_0x206aa7,_0x33e1a4),_0x5b0c53['length']=0x0,_0x33e1a4;}let _0x11b0a1=new Cesium['Cartesian3']();function _0x3b8f5a(_0x479e18,_0x423060){let _0x3c299b=new Cesium['BoundingSphere'](),_0x4bb325=_0x479e18['instanceBounds'];if(!Cesium['defined'](_0x4bb325))return _0x3c299b;let _0x448d7b=new Cesium['Cartesian3'](_0x4bb325[0x0],_0x4bb325[0x1],_0x4bb325[0x2]),_0x157a61=new Cesium['Cartesian3'](_0x4bb325[0x3],_0x4bb325[0x4],_0x4bb325[0x5]),_0x45300f=Cesium['Cartesian3']['lerp'](_0x448d7b,_0x157a61,0.5,_0x11b0a1),_0x428cab=Cesium['Cartesian3']['distance'](_0x45300f,_0x448d7b);return _0x3c299b['center']=_0x45300f,_0x3c299b['radius']=_0x428cab,Cesium['BoundingSphere']['transform'](_0x3c299b,_0x423060,_0x3c299b),_0x3c299b;}function _0x21c964(_0x479457,_0x348c91){if(_0x479457['instanceIndex']>-0x1)return _0x3b8f5a(_0x479457,_0x348c91);return _0x48f778(_0x479457,_0x348c91);}function _0x12be2f(_0x384e18,_0x179ace){if(_0x384e18['center']){const _0x32732c=new Cesium['Matrix3'](),_0x1a11d5=new Cesium['Cartesian3'](_0x384e18['center']['x'],_0x384e18['center']['y'],_0x384e18['center']['z']);Cesium['Matrix4']['multiplyByPoint'](_0x179ace,_0x1a11d5,_0x1a11d5);const _0x29b0c1=new Cesium['Cartesian4'](_0x384e18['xExtent']['x'],_0x384e18['xExtent']['y'],_0x384e18['xExtent']['z'],0x0),_0x1dee05=new Cesium['Cartesian4'](_0x384e18['yExtent']['x'],_0x384e18['yExtent']['y'],_0x384e18['yExtent']['z'],0x0),_0x5c2496=new Cesium['Cartesian4'](_0x384e18['zExtent']['x'],_0x384e18['zExtent']['y'],_0x384e18['zExtent']['z'],0x0);return Cesium['Matrix4']['multiplyByVector'](_0x179ace,_0x29b0c1,_0x29b0c1),Cesium['Matrix4']['multiplyByVector'](_0x179ace,_0x1dee05,_0x1dee05),Cesium['Matrix4']['multiplyByVector'](_0x179ace,_0x5c2496,_0x5c2496),Cesium['Matrix3']['setColumn'](_0x32732c,0x0,_0x29b0c1,_0x32732c),Cesium['Matrix3']['setColumn'](_0x32732c,0x1,_0x1dee05,_0x32732c),Cesium['Matrix3']['setColumn'](_0x32732c,0x2,_0x5c2496,_0x32732c),new Cesium['OrientedBoundingBox'](_0x1a11d5,_0x32732c);}const _0x4bdf51=[];_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['min']['x'],_0x384e18['min']['y'],_0x384e18['min']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['min']['x'],_0x384e18['min']['y'],_0x384e18['max']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['min']['x'],_0x384e18['max']['y'],_0x384e18['min']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['min']['x'],_0x384e18['max']['y'],_0x384e18['max']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['max']['x'],_0x384e18['min']['y'],_0x384e18['min']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['max']['x'],_0x384e18['min']['y'],_0x384e18['max']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['max']['x'],_0x384e18['max']['y'],_0x384e18['min']['z'])),_0x4bdf51['push'](new Cesium['Cartesian3'](_0x384e18['max']['x'],_0x384e18['max']['y'],_0x384e18['max']['z']));for(let _0x4dcb5a=0x0;_0x4dcb5a<0x8;_0x4dcb5a++){_0x4bdf51[_0x4dcb5a]=Cesium['Matrix4']['multiplyByPoint'](_0x179ace,_0x4bdf51[_0x4dcb5a],_0x4bdf51[_0x4dcb5a]);}return Cesium['OrientedBoundingBox']['fromPoints'](_0x4bdf51);}function _0x138f1a(_0x10e7f4,_0xb7a09a,_0x1048b4,_0x522097,_0x173009){let _0x4e70ad=_0x522097['geodes'];for(let _0x24214b=0x0,_0x146e27=_0x4e70ad['length'];_0x24214b<_0x146e27;_0x24214b++){let _0x2d2d60=_0x4e70ad[_0x24214b],_0x5bf181=_0x2d2d60['matrix'],_0x167b39=Cesium['Matrix4']['multiply'](_0x10e7f4['modelMatrix'],_0x5bf181,new Cesium['Matrix4']()),_0x25e98b;if(Cesium['defined'](_0x173009['boundingVolume'])){if(Cesium['defined'](_0x173009['boundingVolume']['obb']))_0x25e98b=_0x12be2f(_0x173009['boundingVolume']['obb'],_0x10e7f4['modelMatrix']);else Cesium['defined'](_0x173009['boundingVolume']['sphere'])&&(_0x25e98b=new Cesium['BoundingSphere'](_0x173009['boundingVolume']['sphere']['center'],_0x173009['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0x25e98b,_0x10e7f4['modelMatrix'],_0x25e98b));}let _0x531609=_0x2d2d60['skeletonNames'];for(let _0x3ebaee=0x0,_0x91703a=_0x531609['length'];_0x3ebaee<_0x91703a;_0x3ebaee++){let _0x1a6869=_0x531609[_0x3ebaee],_0x431cc5=_0xb7a09a['geoPackage'][_0x1a6869],_0x5ccdf0=_0x431cc5['vertexPackage'],_0x35d1dd=_0x431cc5['arrIndexPackage'],_0x19beab=_0x431cc5['pickInfo'],_0x2b4977;_0x35d1dd['length']>0x0&&(_0x2b4977=_0x1048b4[_0x35d1dd[0x0]['materialCode']]);let _0x2fbd13=Cesium['defined'](_0x25e98b)?_0x25e98b:_0x21c964(_0x5ccdf0,_0x167b39);const _0x3326a5=_0x5c4187[_0x10e7f4['fileType']]({'layer':_0x10e7f4,'vertexPackage':_0x5ccdf0,'arrIndexPackage':_0x35d1dd,'pickInfo':_0x19beab,'modelMatrix':_0x167b39,'geoMatrix':_0x5bf181,'boundingVolume':_0x2fbd13,'material':_0x2b4977,'edgeGeometry':_0x431cc5['edgeGeometry'],'geoName':_0x1a6869});_0x173009['renderEntities']['push'](_0x3326a5);}}if(!Cesium['defined'](_0x173009['boundingVolume'])&&_0x173009['renderEntities']['length']>0x0){let _0x2be5cc=[];for(let _0x4fa99d=0x0,_0x9a7a5f=_0x173009['renderEntities']['length'];_0x4fa99d<_0x9a7a5f;_0x4fa99d++){_0x2be5cc['push'](_0x173009['renderEntities'][_0x4fa99d]['boundingVolume']);}_0x173009['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x2be5cc),'isCalc':!![]};}}function _0x5750e2(_0x33f2b9,_0x204030,_0x47203d){let _0x5333cb=_0x204030['groupNode'],_0x4cdab8=[];for(let _0x51a0b7=0x0,_0x230b73=_0x5333cb['pageLods']['length'];_0x51a0b7<_0x230b73;_0x51a0b7++){let _0x288512={},_0x5e9c8e=_0x5333cb['pageLods'][_0x51a0b7];_0x288512['rangeMode']=_0x5e9c8e['rangeMode'],_0x288512['childTile']=_0x5e9c8e['childTile'],_0x288512['rangeList']=_0x5e9c8e['rangeList'],_0x288512['isLeafTile']=_0x288512['childTile']==='',_0x288512['renderEntities']=[];if(_0x5e9c8e['boundingSphere']&&(!_0x288512['isLeafTile']||_0x33f2b9['dataVersion']>0x2)){let _0xc4a126=_0x5e9c8e['boundingSphere']['center'],_0x5631c3=_0x5e9c8e['boundingSphere']['radius'];_0x288512['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0xc4a126['x'],_0xc4a126['y'],_0xc4a126['z']),'radius':_0x5631c3},'isCalc':![]};}_0x5e9c8e['obb']&&(_0x288512['boundingVolume']=_0x288512['boundingVolume']||{},_0x288512['boundingVolume']['obb']=_0x5e9c8e['obb']),_0x138f1a(_0x33f2b9,_0x204030,_0x47203d,_0x5e9c8e,_0x288512),_0x4cdab8['push'](_0x288512);}return _0x4cdab8;}_0x3ab49b['parse']=function(_0x4ccaf4,_0xbcc8c,_0x2b5de2){if(!Cesium['defined'](_0xbcc8c))return;_0x4ccaf4['dataVersion']=_0xbcc8c['version'];let _0x3c5cc4=_0x2803ef(_0x4ccaf4['context'],_0xbcc8c,_0x2b5de2),_0x3b098e=_0x5750e2(_0x4ccaf4,_0xbcc8c,_0x3c5cc4);return _0x3b098e;};export default _0x3ab49b;