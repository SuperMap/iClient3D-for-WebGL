const _0x3b9d9e=(function(){let _0x11f2d7=!![];return function(_0xc0e334,_0x52f7bb){const _0x42a244=_0x11f2d7?function(){if(_0x52f7bb){const _0x464aef=_0x52f7bb['apply'](_0xc0e334,arguments);return _0x52f7bb=null,_0x464aef;}}:function(){};return _0x11f2d7=![],_0x42a244;};}()),_0x1b433b=_0x3b9d9e(this,function(){return _0x1b433b['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x1b433b)['search']('(((.+)+)+)+$');});_0x1b433b();import _0x47f428 from'./DDSTexture.js';import _0x35a1ca from'./MaterialPass.js';import _0x5581b3 from'./Factory/S3MContentFactory.js';import _0x3c96a8 from'./Enum/VertexCompressOption.js';import _0x4775cd from'../Core/CRNTranscoder.js';import _0x1f3d14 from'./Enum/S3MPixelFormat.js';function _0x811091(){}function _0x526c0a(_0xf88cca,_0x502cd6,_0x539a50){let _0x2f16e7={},_0x54540d=_0x502cd6['materials']['material'];for(let _0x457b90=0x0,_0x5d7c2a=_0x54540d['length'];_0x457b90<_0x5d7c2a;_0x457b90++){let _0x4f8433=_0x54540d[_0x457b90]['material'],_0x44f3d4=_0x4f8433['id'],_0x16ed12=new _0x35a1ca();_0x2f16e7[_0x44f3d4]=_0x16ed12;let _0x51df16=Cesium['defaultValue'](_0x4f8433['ambient'],Cesium['Color']['WHITE']);_0x16ed12['ambientColor']=new Cesium['Color'](_0x51df16['r'],_0x51df16['g'],_0x51df16['b'],_0x51df16['a']);let _0x2f3ed9=Cesium['defaultValue'](_0x4f8433['diffuse'],Cesium['Color']['WHITE']);_0x16ed12['diffuseColor']=new Cesium['Color'](_0x2f3ed9['r'],_0x2f3ed9['g'],_0x2f3ed9['b'],_0x2f3ed9['a']);let _0x521772=Cesium['defaultValue'](_0x4f8433['specular'],Cesium['Color']['WHITE']);_0x16ed12['specularColor']=new Cesium['Color'](_0x521772['r'],_0x521772['g'],_0x521772['b'],_0x521772['a']),_0x16ed12['shininess']=_0x4f8433['shininess'],_0x16ed12['bTransparentSorting']=_0x4f8433['transparentsorting'],_0x16ed12['alphaMode']=_0x4f8433['alphaMode'];let _0x324cc0=_0x4f8433['textureunitstates'],_0x46c4b8=_0x324cc0['length'];for(let _0x2a9e84=0x0;_0x2a9e84<_0x46c4b8;_0x2a9e84++){let _0x303645=_0x324cc0[_0x2a9e84]['textureunitstate'],_0xc1a100=_0x303645['id'],_0x52d226=_0x303645['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x15d0f7=_0x303645['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x16ed12['texMatrix']=Cesium['Matrix4']['unpack'](_0x303645['texmodmatrix']);let _0x31abdb=_0x502cd6['texturePackage'][_0xc1a100];if(Cesium['defined'](_0x31abdb)&&Cesium['defined'](_0x31abdb['arrayBufferView'])&&_0x31abdb['arrayBufferView']['byteLength']>0x0){_0x31abdb['wrapS']=_0x52d226,_0x31abdb['wrapT']=_0x15d0f7;let _0x59845c=_0x539a50['fileName']+_0xc1a100,_0x1f8cc0=_0xf88cca['textureCache']['getTexture'](_0x59845c);if(!Cesium['defined'](_0x1f8cc0)){_0x31abdb['isTexBlock']=![];switch(_0x31abdb['compressType']){case _0x1f3d14['NONE']:_0x1f8cc0=new Cesium['Texture']({'context':_0xf88cca,'flipY':![],'pixelFormat':_0x31abdb['internalFormat'],'source':_0x31abdb}),_0xf88cca['textureCache']['addTexture'](_0x59845c,_0x1f8cc0);break;case _0x1f3d14['CRN_DXT5']:const _0x36c3e3=_0x4775cd['transcode']({'data':_0x31abdb['arrayBufferView'],'bMipMap':!![]});_0x31abdb['arrayBufferView']=_0x36c3e3['bufferView'],_0x1f8cc0=new _0x47f428(_0xf88cca,_0xc1a100,_0x31abdb),_0xf88cca['textureCache']['addTexture'](_0x59845c,_0x1f8cc0);break;default:_0x1f8cc0=new _0x47f428(_0xf88cca,_0xc1a100,_0x31abdb),_0xf88cca['textureCache']['addTexture'](_0x59845c,_0x1f8cc0);break;}}_0x16ed12['textures']['push'](_0x1f8cc0);}}}return _0x2f16e7;}function _0x236aa3(_0x2cf6a9,_0x2ccc23){let _0x5254ab=new Cesium['BoundingSphere'](),_0x819295=new Cesium['Cartesian3'](),_0x5d6891=_0x2cf6a9['vertexAttributes'][0x0],_0x4e2a93=_0x5d6891['componentsPerAttribute'],_0x14c203=Cesium['defined'](_0x2cf6a9['compressOptions'])&&(_0x2cf6a9['compressOptions']&_0x3c96a8['SVC_Vertex'])===_0x3c96a8['SVC_Vertex'],_0x5eacf2=0x1,_0x248868,_0x5ea208;_0x14c203?(_0x5eacf2=_0x2cf6a9['vertCompressConstant'],_0x248868=new Cesium['Cartesian3'](_0x2cf6a9['minVerticesValue']['x'],_0x2cf6a9['minVerticesValue']['y'],_0x2cf6a9['minVerticesValue']['z']),_0x5ea208=new Uint16Array(_0x5d6891['typedArray']['buffer'],_0x5d6891['typedArray']['byteOffset'],_0x5d6891['typedArray']['byteLength']/0x2)):_0x5ea208=new Float32Array(_0x5d6891['typedArray']['buffer'],_0x5d6891['typedArray']['byteOffset'],_0x5d6891['typedArray']['byteLength']/0x4);let _0x19ecae=[];for(let _0x57be8a=0x0;_0x57be8a<_0x2cf6a9['verticesCount'];_0x57be8a++){Cesium['Cartesian3']['fromArray'](_0x5ea208,_0x4e2a93*_0x57be8a,_0x819295),_0x14c203&&(_0x819295=Cesium['Cartesian3']['multiplyByScalar'](_0x819295,_0x5eacf2,_0x819295),_0x819295=Cesium['Cartesian3']['add'](_0x819295,_0x248868,_0x819295)),_0x19ecae['push'](Cesium['Cartesian3']['clone'](_0x819295));}return Cesium['BoundingSphere']['fromPoints'](_0x19ecae,_0x5254ab),Cesium['BoundingSphere']['transform'](_0x5254ab,_0x2ccc23,_0x5254ab),_0x19ecae['length']=0x0,_0x5254ab;}let _0x37d15e=new Cesium['Cartesian3']();function _0x3372dd(_0x132b6b,_0x123fcc){let _0x29165b=new Cesium['BoundingSphere'](),_0x3b6b9e=_0x132b6b['instanceBounds'];if(!Cesium['defined'](_0x3b6b9e))return _0x29165b;let _0x5b8ff5=new Cesium['Cartesian3'](_0x3b6b9e[0x0],_0x3b6b9e[0x1],_0x3b6b9e[0x2]),_0xc985cf=new Cesium['Cartesian3'](_0x3b6b9e[0x3],_0x3b6b9e[0x4],_0x3b6b9e[0x5]),_0x48f1e1=Cesium['Cartesian3']['lerp'](_0x5b8ff5,_0xc985cf,0.5,_0x37d15e),_0xb53884=Cesium['Cartesian3']['distance'](_0x48f1e1,_0x5b8ff5);return _0x29165b['center']=_0x48f1e1,_0x29165b['radius']=_0xb53884,Cesium['BoundingSphere']['transform'](_0x29165b,_0x123fcc,_0x29165b),_0x29165b;}function _0x1686d1(_0x3f81aa,_0x1c57a2){if(_0x3f81aa['instanceIndex']>-0x1)return _0x3372dd(_0x3f81aa,_0x1c57a2);return _0x236aa3(_0x3f81aa,_0x1c57a2);}function _0x273c29(_0x168538,_0x20f333){if(_0x168538['center']){const _0x77a52d=new Cesium['Matrix3'](),_0x2a5b42=new Cesium['Cartesian3'](_0x168538['center']['x'],_0x168538['center']['y'],_0x168538['center']['z']);Cesium['Matrix4']['multiplyByPoint'](_0x20f333,_0x2a5b42,_0x2a5b42);const _0x1d9356=new Cesium['Cartesian4'](_0x168538['xExtent']['x'],_0x168538['xExtent']['y'],_0x168538['xExtent']['z'],0x0),_0x525adb=new Cesium['Cartesian4'](_0x168538['yExtent']['x'],_0x168538['yExtent']['y'],_0x168538['yExtent']['z'],0x0),_0x1e65b2=new Cesium['Cartesian4'](_0x168538['zExtent']['x'],_0x168538['zExtent']['y'],_0x168538['zExtent']['z'],0x0);return Cesium['Matrix4']['multiplyByVector'](_0x20f333,_0x1d9356,_0x1d9356),Cesium['Matrix4']['multiplyByVector'](_0x20f333,_0x525adb,_0x525adb),Cesium['Matrix4']['multiplyByVector'](_0x20f333,_0x1e65b2,_0x1e65b2),Cesium['Matrix3']['setColumn'](_0x77a52d,0x0,_0x1d9356,_0x77a52d),Cesium['Matrix3']['setColumn'](_0x77a52d,0x1,_0x525adb,_0x77a52d),Cesium['Matrix3']['setColumn'](_0x77a52d,0x2,_0x1e65b2,_0x77a52d),new Cesium['OrientedBoundingBox'](_0x2a5b42,_0x77a52d);}const _0x51642f=[];_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['min']['x'],_0x168538['min']['y'],_0x168538['min']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['min']['x'],_0x168538['min']['y'],_0x168538['max']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['min']['x'],_0x168538['max']['y'],_0x168538['min']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['min']['x'],_0x168538['max']['y'],_0x168538['max']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['max']['x'],_0x168538['min']['y'],_0x168538['min']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['max']['x'],_0x168538['min']['y'],_0x168538['max']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['max']['x'],_0x168538['max']['y'],_0x168538['min']['z'])),_0x51642f['push'](new Cesium['Cartesian3'](_0x168538['max']['x'],_0x168538['max']['y'],_0x168538['max']['z']));for(let _0x78e824=0x0;_0x78e824<0x8;_0x78e824++){_0x51642f[_0x78e824]=Cesium['Matrix4']['multiplyByPoint'](_0x20f333,_0x51642f[_0x78e824],_0x51642f[_0x78e824]);}return Cesium['OrientedBoundingBox']['fromPoints'](_0x51642f);}function _0x594354(_0x34a644,_0x256bc7,_0x1e96b0,_0x5851cd,_0x257c51){let _0x31b1ae=_0x5851cd['geodes'];for(let _0x56ad9b=0x0,_0x165d79=_0x31b1ae['length'];_0x56ad9b<_0x165d79;_0x56ad9b++){let _0x41ce6b=_0x31b1ae[_0x56ad9b],_0x3d066a=_0x41ce6b['matrix'],_0x18836f=Cesium['Matrix4']['multiply'](_0x34a644['modelMatrix'],_0x3d066a,new Cesium['Matrix4']()),_0x10611f;if(Cesium['defined'](_0x257c51['boundingVolume'])){if(Cesium['defined'](_0x257c51['boundingVolume']['obb']))_0x10611f=_0x273c29(_0x257c51['boundingVolume']['obb'],_0x34a644['modelMatrix']);else Cesium['defined'](_0x257c51['boundingVolume']['sphere'])&&(_0x10611f=new Cesium['BoundingSphere'](_0x257c51['boundingVolume']['sphere']['center'],_0x257c51['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0x10611f,_0x34a644['modelMatrix'],_0x10611f));}let _0x144aec=_0x41ce6b['skeletonNames'];for(let _0x1b72a8=0x0,_0x46b855=_0x144aec['length'];_0x1b72a8<_0x46b855;_0x1b72a8++){let _0x1e87f9=_0x144aec[_0x1b72a8],_0x46de18=_0x256bc7['geoPackage'][_0x1e87f9],_0x5d545d=_0x46de18['vertexPackage'],_0x2a9ec9=_0x46de18['arrIndexPackage'],_0x2a3e29=_0x46de18['pickInfo'],_0x282206;_0x2a9ec9['length']>0x0&&(_0x282206=_0x1e96b0[_0x2a9ec9[0x0]['materialCode']]);let _0x5e9b7c=Cesium['defined'](_0x10611f)?_0x10611f:_0x1686d1(_0x5d545d,_0x18836f);const _0x2065ea=_0x5581b3[_0x34a644['fileType']]({'layer':_0x34a644,'vertexPackage':_0x5d545d,'arrIndexPackage':_0x2a9ec9,'pickInfo':_0x2a3e29,'modelMatrix':_0x18836f,'geoMatrix':_0x3d066a,'boundingVolume':_0x5e9b7c,'material':_0x282206,'edgeGeometry':_0x46de18['edgeGeometry'],'geoName':_0x1e87f9});_0x257c51['renderEntities']['push'](_0x2065ea);}}if(!Cesium['defined'](_0x257c51['boundingVolume'])&&_0x257c51['renderEntities']['length']>0x0){let _0x578710=[];for(let _0x47d537=0x0,_0x44525b=_0x257c51['renderEntities']['length'];_0x47d537<_0x44525b;_0x47d537++){_0x578710['push'](_0x257c51['renderEntities'][_0x47d537]['boundingVolume']);}_0x257c51['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x578710),'isCalc':!![]};}}function _0x5e522e(_0x48b601,_0x304dca,_0x4d22d1){let _0x442e=_0x304dca['groupNode'],_0x4d3d12=[];for(let _0x270b34=0x0,_0x5f15bf=_0x442e['pageLods']['length'];_0x270b34<_0x5f15bf;_0x270b34++){let _0x2f08cd={},_0x981ef4=_0x442e['pageLods'][_0x270b34];_0x2f08cd['rangeMode']=_0x981ef4['rangeMode'],_0x2f08cd['childTile']=_0x981ef4['childTile'],_0x2f08cd['rangeList']=_0x981ef4['rangeList'],_0x2f08cd['isLeafTile']=_0x2f08cd['childTile']==='',_0x2f08cd['renderEntities']=[];if(_0x981ef4['boundingSphere']&&(!_0x2f08cd['isLeafTile']||_0x48b601['dataVersion']>0x2)){let _0x4878af=_0x981ef4['boundingSphere']['center'],_0x241b23=_0x981ef4['boundingSphere']['radius'];_0x2f08cd['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0x4878af['x'],_0x4878af['y'],_0x4878af['z']),'radius':_0x241b23},'isCalc':![]};}_0x981ef4['obb']&&(_0x2f08cd['boundingVolume']=_0x2f08cd['boundingVolume']||{},_0x2f08cd['boundingVolume']['obb']=_0x981ef4['obb']),_0x594354(_0x48b601,_0x304dca,_0x4d22d1,_0x981ef4,_0x2f08cd),_0x4d3d12['push'](_0x2f08cd);}return _0x4d3d12;}_0x811091['parse']=function(_0x5c311d,_0x373dc6,_0x292571){if(!Cesium['defined'](_0x373dc6))return;_0x5c311d['dataVersion']=_0x373dc6['version'];let _0x3caa4b=_0x526c0a(_0x5c311d['context'],_0x373dc6,_0x292571),_0x1f0fa1=_0x5e522e(_0x5c311d,_0x373dc6,_0x3caa4b);return _0x1f0fa1;};export default _0x811091;