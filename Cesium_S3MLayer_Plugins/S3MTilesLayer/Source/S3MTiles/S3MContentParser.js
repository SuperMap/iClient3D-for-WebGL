const _0x31286f=(function(){let _0x56bc23=!![];return function(_0x1c1572,_0x546e04){const _0x433917=_0x56bc23?function(){if(_0x546e04){const _0x3fc578=_0x546e04['apply'](_0x1c1572,arguments);return _0x546e04=null,_0x3fc578;}}:function(){};return _0x56bc23=![],_0x433917;};}()),_0x1b0217=_0x31286f(this,function(){return _0x1b0217['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x1b0217)['search']('(((.+)+)+)+$');});_0x1b0217();import _0x47e07d from'./DDSTexture.js';import _0x5486e4 from'./MaterialPass.js';import _0xbc6dc6 from'./Factory/S3MContentFactory.js';import _0x4b81b7 from'./Enum/VertexCompressOption.js';import _0x16ee05 from'../Core/CRNTranscoder.js';import _0x4154d6 from'./Enum/S3MPixelFormat.js';function _0x1f3170(){}function _0x3ed504(_0x34a3eb,_0x276b55,_0x3436fa){let _0x944955={},_0x56803e=_0x276b55['materials']['material'];for(let _0x4d1345=0x0,_0x50c058=_0x56803e['length'];_0x4d1345<_0x50c058;_0x4d1345++){let _0x1515c2=_0x56803e[_0x4d1345]['material'],_0x280e62=_0x1515c2['id'],_0x20501a=new _0x5486e4();_0x944955[_0x280e62]=_0x20501a;let _0x3cee74=Cesium['defaultValue'](_0x1515c2['ambient'],Cesium['Color']['WHITE']);_0x20501a['ambientColor']=new Cesium['Color'](_0x3cee74['r'],_0x3cee74['g'],_0x3cee74['b'],_0x3cee74['a']);let _0x32f46b=Cesium['defaultValue'](_0x1515c2['diffuse'],Cesium['Color']['WHITE']);_0x20501a['diffuseColor']=new Cesium['Color'](_0x32f46b['r'],_0x32f46b['g'],_0x32f46b['b'],_0x32f46b['a']);let _0x1f1a49=Cesium['defaultValue'](_0x1515c2['specular'],Cesium['Color']['WHITE']);_0x20501a['specularColor']=new Cesium['Color'](_0x1f1a49['r'],_0x1f1a49['g'],_0x1f1a49['b'],_0x1f1a49['a']),_0x20501a['shininess']=_0x1515c2['shininess'],_0x20501a['bTransparentSorting']=_0x1515c2['transparentsorting'],_0x20501a['alphaMode']=_0x1515c2['alphaMode'];let _0x39c94c=_0x1515c2['textureunitstates'],_0x39c73b=_0x39c94c['length'];for(let _0x57ebb2=0x0;_0x57ebb2<_0x39c73b;_0x57ebb2++){let _0x55fccd=_0x39c94c[_0x57ebb2]['textureunitstate'],_0x43dba=_0x55fccd['id'],_0x2673c8=_0x55fccd['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x2ae006=_0x55fccd['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x20501a['texMatrix']=Cesium['Matrix4']['unpack'](_0x55fccd['texmodmatrix']);let _0x1cb818=_0x276b55['texturePackage'][_0x43dba];if(Cesium['defined'](_0x1cb818)&&Cesium['defined'](_0x1cb818['arrayBufferView'])&&_0x1cb818['arrayBufferView']['byteLength']>0x0){_0x1cb818['wrapS']=_0x2673c8,_0x1cb818['wrapT']=_0x2ae006;let _0x4566eb=_0x3436fa['fileName']+_0x43dba,_0x5496f5=_0x34a3eb['textureCache']['getTexture'](_0x4566eb);if(!Cesium['defined'](_0x5496f5)){_0x1cb818['isTexBlock']=![];switch(_0x1cb818['compressType']){case _0x4154d6['CRN_DXT5']:const _0x54ead4=_0x16ee05['transcode']({'data':_0x1cb818['arrayBufferView'],'bMipMap':!![]});_0x1cb818['arrayBufferView']=_0x54ead4['bufferView'],_0x5496f5=new _0x47e07d(_0x34a3eb,_0x43dba,_0x1cb818),_0x34a3eb['textureCache']['addTexture'](_0x4566eb,_0x5496f5);break;default:_0x5496f5=new _0x47e07d(_0x34a3eb,_0x43dba,_0x1cb818),_0x34a3eb['textureCache']['addTexture'](_0x4566eb,_0x5496f5);break;}}_0x20501a['textures']['push'](_0x5496f5);}}}return _0x944955;}function _0x559321(_0x14717d,_0x50b173){let _0x4a09a7=new Cesium['BoundingSphere'](),_0x7f76d5=new Cesium['Cartesian3'](),_0x1afe0=_0x14717d['vertexAttributes'][0x0],_0x5674c7=_0x1afe0['componentsPerAttribute'],_0x32bb3f=Cesium['defined'](_0x14717d['compressOptions'])&&(_0x14717d['compressOptions']&_0x4b81b7['SVC_Vertex'])===_0x4b81b7['SVC_Vertex'],_0x4675d5=0x1,_0x59e840,_0x3fa6ee;_0x32bb3f?(_0x4675d5=_0x14717d['vertCompressConstant'],_0x59e840=new Cesium['Cartesian3'](_0x14717d['minVerticesValue']['x'],_0x14717d['minVerticesValue']['y'],_0x14717d['minVerticesValue']['z']),_0x3fa6ee=new Uint16Array(_0x1afe0['typedArray']['buffer'],_0x1afe0['typedArray']['byteOffset'],_0x1afe0['typedArray']['byteLength']/0x2)):_0x3fa6ee=new Float32Array(_0x1afe0['typedArray']['buffer'],_0x1afe0['typedArray']['byteOffset'],_0x1afe0['typedArray']['byteLength']/0x4);let _0x4eb138=[];for(let _0xe61f26=0x0;_0xe61f26<_0x14717d['verticesCount'];_0xe61f26++){Cesium['Cartesian3']['fromArray'](_0x3fa6ee,_0x5674c7*_0xe61f26,_0x7f76d5),_0x32bb3f&&(_0x7f76d5=Cesium['Cartesian3']['multiplyByScalar'](_0x7f76d5,_0x4675d5,_0x7f76d5),_0x7f76d5=Cesium['Cartesian3']['add'](_0x7f76d5,_0x59e840,_0x7f76d5)),_0x4eb138['push'](Cesium['Cartesian3']['clone'](_0x7f76d5));}return Cesium['BoundingSphere']['fromPoints'](_0x4eb138,_0x4a09a7),Cesium['BoundingSphere']['transform'](_0x4a09a7,_0x50b173,_0x4a09a7),_0x4eb138['length']=0x0,_0x4a09a7;}let _0x3eb3b9=new Cesium['Cartesian3']();function _0x1feff7(_0xd3e59e,_0x5bc132){let _0x4423c4=new Cesium['BoundingSphere'](),_0x31c7db=_0xd3e59e['instanceBounds'];if(!Cesium['defined'](_0x31c7db))return _0x4423c4;let _0x49d5cb=new Cesium['Cartesian3'](_0x31c7db[0x0],_0x31c7db[0x1],_0x31c7db[0x2]),_0x30266f=new Cesium['Cartesian3'](_0x31c7db[0x3],_0x31c7db[0x4],_0x31c7db[0x5]),_0x372e3c=Cesium['Cartesian3']['lerp'](_0x49d5cb,_0x30266f,0.5,_0x3eb3b9),_0xfd74ef=Cesium['Cartesian3']['distance'](_0x372e3c,_0x49d5cb);return _0x4423c4['center']=_0x372e3c,_0x4423c4['radius']=_0xfd74ef,Cesium['BoundingSphere']['transform'](_0x4423c4,_0x5bc132,_0x4423c4),_0x4423c4;}function _0x3b3055(_0x1d214f,_0x25a62f){if(_0x1d214f['instanceIndex']>-0x1)return _0x1feff7(_0x1d214f,_0x25a62f);return _0x559321(_0x1d214f,_0x25a62f);}function _0x500486(_0x27636a,_0x173525){if(_0x27636a['center']){const _0x3c7f4b=new Cesium['Matrix3'](),_0xc624fd=new Cesium['Cartesian3'](_0x27636a['center']['x'],_0x27636a['center']['y'],_0x27636a['center']['z']);Cesium['Matrix4']['multiplyByPoint'](_0x173525,_0xc624fd,_0xc624fd);const _0x370252=new Cesium['Cartesian4'](_0x27636a['xExtent']['x'],_0x27636a['xExtent']['y'],_0x27636a['xExtent']['z'],0x0),_0x57a120=new Cesium['Cartesian4'](_0x27636a['yExtent']['x'],_0x27636a['yExtent']['y'],_0x27636a['yExtent']['z'],0x0),_0x47c091=new Cesium['Cartesian4'](_0x27636a['zExtent']['x'],_0x27636a['zExtent']['y'],_0x27636a['zExtent']['z'],0x0);return Cesium['Matrix4']['multiplyByVector'](_0x173525,_0x370252,_0x370252),Cesium['Matrix4']['multiplyByVector'](_0x173525,_0x57a120,_0x57a120),Cesium['Matrix4']['multiplyByVector'](_0x173525,_0x47c091,_0x47c091),Cesium['Matrix3']['setColumn'](_0x3c7f4b,0x0,_0x370252,_0x3c7f4b),Cesium['Matrix3']['setColumn'](_0x3c7f4b,0x1,_0x57a120,_0x3c7f4b),Cesium['Matrix3']['setColumn'](_0x3c7f4b,0x2,_0x47c091,_0x3c7f4b),new Cesium['OrientedBoundingBox'](_0xc624fd,_0x3c7f4b);}const _0x1b2738=[];_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['min']['x'],_0x27636a['min']['y'],_0x27636a['min']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['min']['x'],_0x27636a['min']['y'],_0x27636a['max']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['min']['x'],_0x27636a['max']['y'],_0x27636a['min']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['min']['x'],_0x27636a['max']['y'],_0x27636a['max']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['max']['x'],_0x27636a['min']['y'],_0x27636a['min']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['max']['x'],_0x27636a['min']['y'],_0x27636a['max']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['max']['x'],_0x27636a['max']['y'],_0x27636a['min']['z'])),_0x1b2738['push'](new Cesium['Cartesian3'](_0x27636a['max']['x'],_0x27636a['max']['y'],_0x27636a['max']['z']));for(let _0x1ba064=0x0;_0x1ba064<0x8;_0x1ba064++){_0x1b2738[_0x1ba064]=Cesium['Matrix4']['multiplyByPoint'](_0x173525,_0x1b2738[_0x1ba064],_0x1b2738[_0x1ba064]);}return Cesium['OrientedBoundingBox']['fromPoints'](_0x1b2738);}function _0x4d6d8e(_0x13118f,_0x3c8c31,_0x4e477d,_0x386132,_0x584e8d){let _0x4236ed=_0x386132['geodes'];for(let _0x197857=0x0,_0x5636e3=_0x4236ed['length'];_0x197857<_0x5636e3;_0x197857++){let _0x8e70f7=_0x4236ed[_0x197857],_0x519073=_0x8e70f7['matrix'],_0x50e434=Cesium['Matrix4']['multiply'](_0x13118f['modelMatrix'],_0x519073,new Cesium['Matrix4']()),_0x435b04;if(Cesium['defined'](_0x584e8d['boundingVolume'])){if(Cesium['defined'](_0x584e8d['boundingVolume']['obb']))_0x435b04=_0x500486(_0x584e8d['boundingVolume']['obb'],_0x13118f['modelMatrix']);else Cesium['defined'](_0x584e8d['boundingVolume']['sphere'])&&(_0x435b04=new Cesium['BoundingSphere'](_0x584e8d['boundingVolume']['sphere']['center'],_0x584e8d['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0x435b04,_0x13118f['modelMatrix'],_0x435b04));}let _0x25db3c=_0x8e70f7['skeletonNames'];for(let _0x3aab05=0x0,_0x579b6f=_0x25db3c['length'];_0x3aab05<_0x579b6f;_0x3aab05++){let _0x1abf37=_0x25db3c[_0x3aab05],_0x33aef7=_0x3c8c31['geoPackage'][_0x1abf37],_0x50bd07=_0x33aef7['vertexPackage'],_0x35be8e=_0x33aef7['arrIndexPackage'],_0x56d3e3=_0x33aef7['pickInfo'],_0x30a400;_0x35be8e['length']>0x0&&(_0x30a400=_0x4e477d[_0x35be8e[0x0]['materialCode']]);let _0x50b5f9=Cesium['defined'](_0x435b04)?_0x435b04:_0x3b3055(_0x50bd07,_0x50e434);const _0x1dd251=_0xbc6dc6[_0x13118f['fileType']]({'layer':_0x13118f,'vertexPackage':_0x50bd07,'arrIndexPackage':_0x35be8e,'pickInfo':_0x56d3e3,'modelMatrix':_0x50e434,'geoMatrix':_0x519073,'boundingVolume':_0x50b5f9,'material':_0x30a400,'edgeGeometry':_0x33aef7['edgeGeometry'],'geoName':_0x1abf37});_0x584e8d['renderEntities']['push'](_0x1dd251);}}if(!Cesium['defined'](_0x584e8d['boundingVolume'])&&_0x584e8d['renderEntities']['length']>0x0){let _0x4a861b=[];for(let _0xeac5cc=0x0,_0x182467=_0x584e8d['renderEntities']['length'];_0xeac5cc<_0x182467;_0xeac5cc++){_0x4a861b['push'](_0x584e8d['renderEntities'][_0xeac5cc]['boundingVolume']);}_0x584e8d['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x4a861b),'isCalc':!![]};}}function _0x5ed3b3(_0x50e486,_0x4f0340,_0x5c2d64){let _0x579604=_0x4f0340['groupNode'],_0x4addf7=[];for(let _0x322fb1=0x0,_0x5ab80b=_0x579604['pageLods']['length'];_0x322fb1<_0x5ab80b;_0x322fb1++){let _0x25b727={},_0x1ca0cb=_0x579604['pageLods'][_0x322fb1];_0x25b727['rangeMode']=_0x1ca0cb['rangeMode'],_0x25b727['childTile']=_0x1ca0cb['childTile'],_0x25b727['rangeList']=_0x1ca0cb['rangeList'],_0x25b727['isLeafTile']=_0x25b727['childTile']==='',_0x25b727['renderEntities']=[];if(_0x1ca0cb['boundingSphere']&&(!_0x25b727['isLeafTile']||_0x50e486['dataVersion']>0x2)){let _0xbb7e4c=_0x1ca0cb['boundingSphere']['center'],_0x5142c2=_0x1ca0cb['boundingSphere']['radius'];_0x25b727['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0xbb7e4c['x'],_0xbb7e4c['y'],_0xbb7e4c['z']),'radius':_0x5142c2},'isCalc':![]};}_0x1ca0cb['obb']&&(_0x25b727['boundingVolume']=_0x25b727['boundingVolume']||{},_0x25b727['boundingVolume']['obb']=_0x1ca0cb['obb']),_0x4d6d8e(_0x50e486,_0x4f0340,_0x5c2d64,_0x1ca0cb,_0x25b727),_0x4addf7['push'](_0x25b727);}return _0x4addf7;}_0x1f3170['parse']=function(_0xe27817,_0x2b3151,_0x4e99f3){if(!Cesium['defined'](_0x2b3151))return;_0xe27817['dataVersion']=_0x2b3151['version'];let _0x470e9d=_0x3ed504(_0xe27817['context'],_0x2b3151,_0x4e99f3),_0x30a5f9=_0x5ed3b3(_0xe27817,_0x2b3151,_0x470e9d);return _0x30a5f9;};export default _0x1f3170;