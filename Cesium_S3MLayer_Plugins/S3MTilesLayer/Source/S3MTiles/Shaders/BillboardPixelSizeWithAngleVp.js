var _0x48f180=(function(){var _0xaab3a9=!![];return function(_0x3a8351,_0x57ee5b){var _0x4b9acd=_0xaab3a9?function(){if(_0x57ee5b){var _0x54922e=_0x57ee5b['apply'](_0x3a8351,arguments);return _0x57ee5b=null,_0x54922e;}}:function(){};return _0xaab3a9=![],_0x4b9acd;};}()),_0x916c53=_0x48f180(this,function(){return _0x916c53['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x916c53)['search']('(((.+)+)+)+$');});_0x916c53();export default'\x0aattribute\x20vec3\x20aPosition;\x0a#ifndef\x20ICON\x0aattribute\x20vec3\x20aNormal;\x0a#endif\x0aattribute\x20vec4\x20aTexCoord0;\x0aattribute\x20vec4\x20aTexCoord1;\x0a#ifdef\x20VertexColor\x0a\x20\x20\x20\x20attribute\x20vec4\x20aColor;\x0a#endif\x0a\x0a#ifdef\x20BatchTable\x0aattribute\x20float\x20batchId;\x0a#endif\x0a\x0avarying\x20vec4\x20vColor;\x0avarying\x20vec4\x20vSecondColor;\x0avarying\x20vec4\x20vTexCoord;\x0avarying\x20vec4\x20clip_vertex;\x0auniform\x20vec4\x20uSelColor;\x0auniform\x20vec4\x20uDiffuseColor;\x0a\x0afloat\x20computerOnePixelLength()\x0a{\x0a\x09vec4\x20viewPos\x20=\x20czm_modelView\x20\x20*\x20vec4(aPosition,\x201.0);\x0a\x09vec4\x20winPos\x20=\x20czm_projection\x20*\x20viewPos;\x0a\x09float\x20dwidth\x20=\x20czm_metersPerPixel(viewPos);\x0a\x09winPos.x\x20=\x20winPos.x\x20-\x202.0\x20*\x20dwidth;\x0a\x09vec4\x20newViewPos\x20=\x20czm_inverseProjection\x20*\x20winPos;\x0a\x09return\x20length(viewPos\x20-\x20newViewPos);\x0a}\x0a\x0amat3\x20rotateZ(in\x20float\x20angle)\x0a{\x0a\x20\x20\x20\x20float\x20sina\x20=\x20sin(angle);\x0a\x20\x20\x20\x20float\x20cosa\x20=\x20cos(angle);\x0a\x20\x20\x20\x20mat3\x20rotMatrix\x20=\x20mat3(cosa,\x20sina,\x200.0,\x20-sina,\x20cosa,\x200.0,\x200.0,\x200.0,\x201.0);\x0a\x20\x20\x20\x20return\x20rotMatrix;\x0a}\x0avec4\x20computePos(vec3\x20v3Normal)\x0a{\x0a\x20\x20\x20\x20vec4\x20viewPos\x20=\x20czm_modelView\x20*\x20vec4(aPosition,\x201.0);\x0a\x20\x20\x20\x20vec4\x20origViewPos\x20=\x20czm_view\x20*\x20vec4(0.0,\x200.0,\x200.0,\x201.0);\x0a\x20\x20\x20\x20vec4\x20fixedAxis\x20=\x20viewPos\x20-\x20origViewPos;\x0a\x20\x20\x20\x20vec3\x20zAxis\x20=\x20normalize(fixedAxis.xyz);\x0a\x20\x20\x20\x20vec4\x20upView\x20=\x20vec4(0.0,\x201.0,\x200.0,\x201.0);\x0a\x20\x20\x20\x20upView\x20=\x20czm_view\x20*\x20upView;\x0a\x20\x20\x20\x20vec3\x20upViewVector\x20=\x20normalize(upView.xyz\x20-\x20origViewPos.xyz);\x0a\x20\x20\x20\x20vec3\x20xAxis\x20=\x20normalize(cross(upViewVector,\x20zAxis));\x0a\x20\x20\x20\x20vec3\x20yAxis\x20=\x20cross(zAxis,\x20xAxis);\x0a\x20\x20\x20\x20yAxis\x20=\x20normalize(yAxis);\x0a\x20\x20\x20\x20mat3\x20matrix\x20=\x20mat3(xAxis,yAxis,zAxis);\x0a\x20\x20\x20\x20vec3\x20offset\x20=\x20matrix\x20*\x20rotateZ(-czm_piOverFour\x20*\x203.0\x20+\x20aTexCoord0.z)\x20*\x20v3Normal;\x0a\x09viewPos.xyz\x20=\x20viewPos.xyz\x20+\x20offset\x20*\x20computerOnePixelLength();\x0a\x09clip_vertex\x20=\x20viewPos;\x0a\x09vec4\x20pos\x20=\x20czm_projection\x20*\x20viewPos;\x0a\x09return\x20pos;\x0a}\x0avoid\x20operation(vec4\x20operationType,\x20vec4\x20color,\x20vec4\x20selectedColor,\x20inout\x20vec4\x20vertexColor)\x0a{\x0a\x20\x20\x20\x20float\x20right_2\x20=\x20operationType.x\x20*\x200.5;\x0a\x20\x20\x20\x20float\x20right_4\x20=\x20right_2\x20*\x200.5;\x0a\x20\x20\x20\x20float\x20right_8\x20=\x20right_4\x20*\x200.5;\x0a\x20\x20\x20\x20float\x20right_16\x20=\x20right_8\x20*\x200.5;\x0a\x20\x20\x20\x20float\x20isSetColor\x20=\x20fract(right_2);\x0a\x20\x20\x20\x20if(isSetColor\x20>\x200.1)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20vertexColor\x20*=\x20color;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20float\x20isPicked\x20=\x20fract(floor(right_2)*\x200.5);\x0a\x20\x20\x20\x20if(isPicked\x20>\x200.1)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20vertexColor\x20*=\x20selectedColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20float\x20isHide\x20=\x20fract(floor(right_4)*\x200.5);\x0a\x20\x20\x20\x20if(isHide\x20>\x200.1)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20vertexColor.a\x20=\x200.0;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0avoid\x20main()\x0a{\x0a\x20\x20\x20vTexCoord.xy\x20=\x20aTexCoord0.xy;\x0a\x20\x20\x20\x20vec4\x20vertexColor\x20=\x20vec4(1.0);\x0a#ifdef\x20VertexColor\x0a\x20\x20\x20\x20vertexColor\x20=\x20aColor;\x0a#endif\x0a#ifdef\x20BatchTable\x0a\x20\x20\x20\x20vSecondColor\x20=\x20s3m_batchTable_pickColor(batchId);\x0a\x20\x20\x20\x20vec4\x20operationType\x20=\x20s3m_batchTable_operation(batchId);\x0a\x20\x20\x20\x20vec4\x20objsColor\x20=\x20s3m_batchTable_color(batchId);\x0a\x20\x20\x20\x20operation(operationType,\x20objsColor,\x20uSelColor,\x20vertexColor);\x0a#endif\x0a\x20\x20\x20vColor\x20=\x20vertexColor\x20*\x20uDiffuseColor;\x0a#ifdef\x20ICON\x0a\x20\x20\x20gl_Position\x20=\x20computePos(aTexCoord1.xyz);\x0a#else\x0a\x20\x20\x20vTexCoord.zw\x20=\x20aTexCoord1.xy;\x0a\x20\x20\x20gl_Position\x20=\x20computePos(aNormal);\x0a#endif\x0a}\x0a';