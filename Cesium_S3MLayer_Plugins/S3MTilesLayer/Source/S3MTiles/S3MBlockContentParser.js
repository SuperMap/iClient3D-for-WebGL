const _0x254c97=(function(){let _0xbce869=!![];return function(_0x5c0f43,_0x290019){const _0x68a760=_0xbce869?function(){if(_0x290019){const _0x59626f=_0x290019['apply'](_0x5c0f43,arguments);return _0x290019=null,_0x59626f;}}:function(){};return _0xbce869=![],_0x68a760;};}()),_0x322971=_0x254c97(this,function(){return _0x322971['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x322971)['search']('(((.+)+)+)+$');});_0x322971();import _0x1d875c from'./Factory/S3MContentFactory.js';import _0x27348c from'./Enum/VertexCompressOption.js';import _0x34de7a from'./MaterialManager.js';import _0x24c705 from'./SubTextureManager.js';import _0x15b80e from'./Enum/S3MPixelFormat.js';import _0x4d96f9 from'../Core/CRNTranscoder.js';function _0x2e2b0b(){}function _0x4a4a46(_0x2caa6c,_0x5881c9,_0xdc84cd){let _0x5bacf0=_0x2caa6c['context'],_0x505ffe=_0x2caa6c['_materialManager'];!_0x505ffe&&(_0x505ffe=_0x2caa6c['_materialManager']=new _0x34de7a());let _0x5bcd42=_0x2caa6c['_subTextureManager'];!_0x2caa6c['_subTextureManager']&&(_0x2caa6c['_subTextureManager']=_0x24c705['getSingleInstance']());let _0x5b05ee=_0x5881c9['materials']['material'];for(let _0x40aa1b=0x0,_0x30e375=_0x5b05ee['length'];_0x40aa1b<_0x30e375;_0x40aa1b++){let _0x2d6f72=_0x5b05ee[_0x40aa1b]['material'],_0x1339c7=_0x2d6f72['id'],_0x28618e=_0x505ffe['create'](_0x1339c7);_0x28618e['layerId']=_0x2caa6c['id'],_0x28618e['tile']=_0xdc84cd;let _0x443c44=_0x2d6f72['ambient'];_0x28618e['ambientColor']=new Cesium['Color'](_0x443c44['r'],_0x443c44['g'],_0x443c44['b'],_0x443c44['a']);let _0xe143b3=_0x2d6f72['diffuse'];_0x28618e['diffuseColor']=new Cesium['Color'](_0xe143b3['r'],_0xe143b3['g'],_0xe143b3['b'],_0xe143b3['a']);let _0x2be597=_0x2d6f72['specular'];_0x28618e['specularColor']=new Cesium['Color'](_0x2be597['r'],_0x2be597['g'],_0x2be597['b'],_0x2be597['a']),_0x28618e['shininess']=_0x2d6f72['shininess'],_0x28618e['bTransparentSorting']=_0x2d6f72['transparentsorting'],_0x28618e['id']=_0x1339c7;let _0x598a48=_0x2d6f72['textureunitstates'],_0x22b604=_0x598a48['length'];for(let _0x2668aa=0x0;_0x2668aa<0x1;_0x2668aa++){let _0x274713=_0x598a48[_0x2668aa]['textureunitstate'],_0x5a9f74=_0x274713['id'],_0x3bd2e5=_0x274713['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x7969f9=_0x274713['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x28618e['texMatrix']=Cesium['Matrix4']['unpack'](_0x274713['texmodmatrix']);let _0x4de9cb=_0x5881c9['texturePackage'][_0x5a9f74];if(_0x4de9cb){_0x4de9cb['wrapS']=_0x3bd2e5,_0x4de9cb['wrapT']=_0x7969f9;if(_0x4de9cb['compressType']===_0x15b80e['CRN_DXT5']&&_0x4de9cb['textureData']){const _0x1b4924=_0x4d96f9['transcode']({'data':_0x4de9cb['textureData'],'bMipMap':!![]});_0x4de9cb['textureData']=_0x1b4924['bufferView'];}_0x28618e['createTexture'](_0x2caa6c,_0xdc84cd,_0x4de9cb,_0x2668aa,_0x5881c9);}}}return _0x5b05ee;}function _0x590f0d(_0x13dc0b,_0x14e9b9){let _0x3d8a10=new Cesium['BoundingSphere'](),_0x9dccb=new Cesium['Cartesian3'](),_0x38e276=_0x13dc0b['vertexAttributes'][0x0],_0x40e836=_0x38e276['componentsPerAttribute'],_0x4cc6e3=Cesium['defined'](_0x13dc0b['compressOptions'])&&(_0x13dc0b['compressOptions']&_0x27348c['SVC_Vertex'])===_0x27348c['SVC_Vertex'],_0x3c1c37=0x1,_0x492e85,_0x211970;_0x4cc6e3?(_0x3c1c37=_0x13dc0b['vertCompressConstant'],_0x492e85=new Cesium['Cartesian3'](_0x13dc0b['minVerticesValue']['x'],_0x13dc0b['minVerticesValue']['y'],_0x13dc0b['minVerticesValue']['z']),_0x211970=new Uint16Array(_0x38e276['typedArray']['buffer'],_0x38e276['typedArray']['byteOffset'],_0x38e276['typedArray']['byteLength']/0x2)):_0x211970=new Float32Array(_0x38e276['typedArray']['buffer'],_0x38e276['typedArray']['byteOffset'],_0x38e276['typedArray']['byteLength']/0x4);let _0x319f1f=[];for(let _0x4b07a3=0x0;_0x4b07a3<_0x13dc0b['verticesCount'];_0x4b07a3++){Cesium['Cartesian3']['fromArray'](_0x211970,_0x40e836*_0x4b07a3,_0x9dccb),_0x4cc6e3&&(_0x9dccb=Cesium['Cartesian3']['multiplyByScalar'](_0x9dccb,_0x3c1c37,_0x9dccb),_0x9dccb=Cesium['Cartesian3']['add'](_0x9dccb,_0x492e85,_0x9dccb)),_0x319f1f['push'](Cesium['Cartesian3']['clone'](_0x9dccb));}return Cesium['BoundingSphere']['fromPoints'](_0x319f1f,_0x3d8a10),Cesium['BoundingSphere']['transform'](_0x3d8a10,_0x14e9b9,_0x3d8a10),_0x319f1f['length']=0x0,_0x3d8a10;}let _0xe93aeb=new Cesium['Cartesian3']();function _0x4fc08f(_0xd8339d){let _0x3c3f22=new Cesium['BoundingSphere'](),_0x10093b=_0xd8339d['instanceBounds'];if(!Cesium['defined'](_0x10093b))return _0x3c3f22;let _0x3b6c88=new Cesium['Cartesian3'](_0x10093b[0x0],_0x10093b[0x1],_0x10093b[0x2]),_0x113a41=new Cesium['Carteisan3'](_0x10093b[0x3],_0x10093b[0x4],_0x10093b[0x5]),_0x5e88ff=new Cesium['Cartesian3']['lerp'](_0x3b6c88,_0x113a41,0.5,_0xe93aeb),_0x4b3e22=new Cesium['Cartesian3']['distance'](_0x5e88ff,_0x3b6c88);return _0x3c3f22['center']=_0x5e88ff,_0x3c3f22['radius']=_0x4b3e22,_0x3c3f22;}function _0x1c3575(_0x435068,_0x496580){if(_0x435068['instanceIndex']>-0x1)return _0x4fc08f(_0x435068);return _0x590f0d(_0x435068,_0x496580);}function _0xe72453(_0x18c973,_0x5c7686,_0x24f1a8,_0x1e6076){let _0x1b173f=_0x24f1a8['geodes'];for(let _0x527f94=0x0,_0x55db65=_0x1b173f['length'];_0x527f94<_0x55db65;_0x527f94++){let _0x4e7ec6=_0x1b173f[_0x527f94],_0x5c002c=_0x4e7ec6['matrix'],_0x1b8e9c=Cesium['Matrix4']['multiply'](_0x18c973['modelMatrix'],_0x5c002c,new Cesium['Matrix4']()),_0xb49a27;Cesium['defined'](_0x1e6076['boundingVolume'])&&(_0xb49a27=new Cesium['BoundingSphere'](_0x1e6076['boundingVolume']['sphere']['center'],_0x1e6076['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0xb49a27,_0x18c973['modelMatrix'],_0xb49a27));let _0x19568f=_0x4e7ec6['skeletonNames'];for(let _0x57b22d=0x0,_0x56f9ee=_0x19568f['length'];_0x57b22d<_0x56f9ee;_0x57b22d++){let _0xee4ddc=_0x19568f[_0x57b22d],_0x272444=_0x5c7686['geoPackage'][_0xee4ddc],_0x21306e=_0x272444['vertexPackage'],_0x687fab=_0x272444['arrIndexPackage'],_0x3897e2=_0x272444['pickInfo'],_0x176b17;_0x687fab['length']>0x0&&(_0x176b17=_0x18c973['_materialManager']['create'](_0x687fab[0x0]['materialCode']));let _0x566234=Cesium['defined'](_0xb49a27)?_0xb49a27:_0x1c3575(_0x21306e,_0x1b8e9c);const _0x263f3d=_0x1d875c[_0x18c973['fileType']]({'layer':_0x18c973,'vertexPackage':_0x21306e,'arrIndexPackage':_0x687fab,'pickInfo':_0x3897e2,'modelMatrix':_0x1b8e9c,'geoMatrix':_0x5c002c,'boundingVolume':_0x566234,'material':_0x176b17,'edgeGeometry':_0x272444['edgeGeometry'],'geoName':_0xee4ddc});_0x1e6076['renderEntities']['push'](_0x263f3d);}}if(!Cesium['defined'](_0x1e6076['boundingVolume'])&&_0x1e6076['renderEntities']['length']>0x0){let _0x55c8cd=[];for(let _0x3355fb=0x0,_0x3f5fec=_0x1e6076['renderEntities']['length'];_0x3355fb<_0x3f5fec;_0x3355fb++){_0x55c8cd['push'](_0x1e6076['renderEntities'][_0x3355fb]['boundingVolume']);}_0x1e6076['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x55c8cd),'isCalc':!![]};}}function _0x108d3b(_0x240904,_0x21a5a1){let _0x37c916=_0x21a5a1['groupNode'],_0x2d843a=[];for(let _0x49bba4=0x0,_0x6bce5e=_0x37c916['pageLods']['length'];_0x49bba4<_0x6bce5e;_0x49bba4++){let _0x422cb6={},_0x5bc92e=_0x37c916['pageLods'][_0x49bba4];_0x422cb6['rangeMode']=_0x5bc92e['rangeMode'],_0x422cb6['childTile']=_0x5bc92e['childTile'],_0x422cb6['rangeList']=_0x5bc92e['rangeList'],_0x422cb6['isLeafTile']=_0x422cb6['childTile']==='',_0x422cb6['renderEntities']=[];if(_0x5bc92e['boundingSphere']&&!_0x422cb6['isLeafTile']){let _0x2e2e17=_0x5bc92e['boundingSphere']['center'],_0x2c2870=_0x5bc92e['boundingSphere']['radius'];_0x422cb6['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0x2e2e17['x'],_0x2e2e17['y'],_0x2e2e17['z']),'radius':_0x2c2870},'isCalc':![]};}_0x5bc92e['obb']&&(_0x422cb6['boundingVolume']=_0x422cb6['boundingVolume']||{},_0x422cb6['boundingVolume']['obb']=_0x5bc92e['obb']),_0xe72453(_0x240904,_0x21a5a1,_0x5bc92e,_0x422cb6),_0x2d843a['push'](_0x422cb6);}return _0x2d843a;}_0x2e2b0b['parse']=function(_0x3b99cc,_0x27c0e4,_0x2dcbdc){if(!Cesium['defined'](_0x2dcbdc))return;_0x3b99cc['dataVersion']=_0x2dcbdc['version'],_0x4a4a46(_0x3b99cc,_0x2dcbdc,_0x27c0e4);let _0x599624=_0x108d3b(_0x3b99cc,_0x2dcbdc);return _0x599624;};export default _0x2e2b0b;