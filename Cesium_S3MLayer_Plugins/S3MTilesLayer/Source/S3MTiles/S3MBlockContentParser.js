const _0x510d11=(function(){let _0x116f76=!![];return function(_0x4e9775,_0xa26daf){const _0x3918ca=_0x116f76?function(){if(_0xa26daf){const _0x3fcd8d=_0xa26daf['apply'](_0x4e9775,arguments);return _0xa26daf=null,_0x3fcd8d;}}:function(){};return _0x116f76=![],_0x3918ca;};}()),_0x5c7b0d=_0x510d11(this,function(){return _0x5c7b0d['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x5c7b0d)['search']('(((.+)+)+)+$');});_0x5c7b0d();import _0x44c338 from'./Factory/S3MContentFactory.js';import _0x3aac30 from'./Enum/VertexCompressOption.js';import _0x44a9d3 from'./MaterialManager.js';import _0x52c003 from'./SubTextureManager.js';import _0x278f07 from'./Enum/S3MPixelFormat.js';import _0x588147 from'../Core/CRNTranscoder.js';function _0x1dd08f(){}function _0x117edd(_0x4dd18c,_0x4b3de5,_0x58128b){let _0x4db061=_0x4dd18c['context'],_0x3d8908=_0x4dd18c['_materialManager'];!_0x3d8908&&(_0x3d8908=_0x4dd18c['_materialManager']=new _0x44a9d3());let _0x36860e=_0x4dd18c['_subTextureManager'];!_0x4dd18c['_subTextureManager']&&(_0x4dd18c['_subTextureManager']=_0x52c003['getSingleInstance']());let _0x30093e=_0x4b3de5['materials']['material'];for(let _0x2aa42f=0x0,_0x5b4e0c=_0x30093e['length'];_0x2aa42f<_0x5b4e0c;_0x2aa42f++){let _0x28fcb5=_0x30093e[_0x2aa42f]['material'],_0xe247e4=_0x28fcb5['id'],_0x2540f0=_0x3d8908['create'](_0xe247e4);_0x2540f0['layerId']=_0x4dd18c['id'],_0x2540f0['tile']=_0x58128b;let _0x120e11=_0x28fcb5['ambient'];_0x2540f0['ambientColor']=new Cesium['Color'](_0x120e11['r'],_0x120e11['g'],_0x120e11['b'],_0x120e11['a']);let _0x1ea294=_0x28fcb5['diffuse'];_0x2540f0['diffuseColor']=new Cesium['Color'](_0x1ea294['r'],_0x1ea294['g'],_0x1ea294['b'],_0x1ea294['a']);let _0x356f53=_0x28fcb5['specular'];_0x2540f0['specularColor']=new Cesium['Color'](_0x356f53['r'],_0x356f53['g'],_0x356f53['b'],_0x356f53['a']),_0x2540f0['shininess']=_0x28fcb5['shininess'],_0x2540f0['bTransparentSorting']=_0x28fcb5['transparentsorting'],_0x2540f0['id']=_0xe247e4;let _0x1d6ad0=_0x28fcb5['textureunitstates'],_0x4a75d3=_0x1d6ad0['length'];for(let _0x7e9d40=0x0;_0x7e9d40<0x1;_0x7e9d40++){let _0x27fd74=_0x1d6ad0[_0x7e9d40]['textureunitstate'],_0x380c76=_0x27fd74['id'],_0xf2e2cf=_0x27fd74['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x4181f5=_0x27fd74['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x2540f0['texMatrix']=Cesium['Matrix4']['unpack'](_0x27fd74['texmodmatrix']);let _0x43bb38=_0x4b3de5['texturePackage'][_0x380c76];if(_0x43bb38){_0x43bb38['wrapS']=_0xf2e2cf,_0x43bb38['wrapT']=_0x4181f5;if(_0x43bb38['compressType']===_0x278f07['CRN_DXT5']&&_0x43bb38['textureData']){const _0x5a9d67=_0x588147['transcode']({'data':_0x43bb38['textureData'],'bMipMap':!![]});_0x43bb38['textureData']=_0x5a9d67['bufferView'];}_0x2540f0['createTexture'](_0x4dd18c,_0x58128b,_0x43bb38,_0x7e9d40,_0x4b3de5);}}}return _0x30093e;}function _0x31eb5d(_0x694e68,_0x5ba360){let _0x2a0616=new Cesium['BoundingSphere'](),_0x2a4a68=new Cesium['Cartesian3'](),_0x9ff66f=_0x694e68['vertexAttributes'][0x0],_0x2d737f=_0x9ff66f['componentsPerAttribute'],_0x2ee90a=Cesium['defined'](_0x694e68['compressOptions'])&&(_0x694e68['compressOptions']&_0x3aac30['SVC_Vertex'])===_0x3aac30['SVC_Vertex'],_0x251516=0x1,_0x2c3fb4,_0x1ee89e;_0x2ee90a?(_0x251516=_0x694e68['vertCompressConstant'],_0x2c3fb4=new Cesium['Cartesian3'](_0x694e68['minVerticesValue']['x'],_0x694e68['minVerticesValue']['y'],_0x694e68['minVerticesValue']['z']),_0x1ee89e=new Uint16Array(_0x9ff66f['typedArray']['buffer'],_0x9ff66f['typedArray']['byteOffset'],_0x9ff66f['typedArray']['byteLength']/0x2)):_0x1ee89e=new Float32Array(_0x9ff66f['typedArray']['buffer'],_0x9ff66f['typedArray']['byteOffset'],_0x9ff66f['typedArray']['byteLength']/0x4);let _0x643e1e=[];for(let _0x6c80ca=0x0;_0x6c80ca<_0x694e68['verticesCount'];_0x6c80ca++){Cesium['Cartesian3']['fromArray'](_0x1ee89e,_0x2d737f*_0x6c80ca,_0x2a4a68),_0x2ee90a&&(_0x2a4a68=Cesium['Cartesian3']['multiplyByScalar'](_0x2a4a68,_0x251516,_0x2a4a68),_0x2a4a68=Cesium['Cartesian3']['add'](_0x2a4a68,_0x2c3fb4,_0x2a4a68)),_0x643e1e['push'](Cesium['Cartesian3']['clone'](_0x2a4a68));}return Cesium['BoundingSphere']['fromPoints'](_0x643e1e,_0x2a0616),Cesium['BoundingSphere']['transform'](_0x2a0616,_0x5ba360,_0x2a0616),_0x643e1e['length']=0x0,_0x2a0616;}let _0x3c5687=new Cesium['Cartesian3']();function _0x2b8396(_0x1bb779){let _0x55aab7=new Cesium['BoundingSphere'](),_0x4a7ae8=_0x1bb779['instanceBounds'];if(!Cesium['defined'](_0x4a7ae8))return _0x55aab7;let _0x3903f6=new Cesium['Cartesian3'](_0x4a7ae8[0x0],_0x4a7ae8[0x1],_0x4a7ae8[0x2]),_0x2fb116=new Cesium['Carteisan3'](_0x4a7ae8[0x3],_0x4a7ae8[0x4],_0x4a7ae8[0x5]),_0x5b94f9=new Cesium['Cartesian3']['lerp'](_0x3903f6,_0x2fb116,0.5,_0x3c5687),_0x3faac8=new Cesium['Cartesian3']['distance'](_0x5b94f9,_0x3903f6);return _0x55aab7['center']=_0x5b94f9,_0x55aab7['radius']=_0x3faac8,_0x55aab7;}function _0x190027(_0x11bf08,_0x1f1ce9){if(_0x11bf08['instanceIndex']>-0x1)return _0x2b8396(_0x11bf08);return _0x31eb5d(_0x11bf08,_0x1f1ce9);}function _0x40bf52(_0x5521ed,_0x5ca173,_0x59f8f0,_0xb4a8bf){let _0x1a08f8=_0x59f8f0['geodes'];for(let _0x235b3e=0x0,_0x3a52e2=_0x1a08f8['length'];_0x235b3e<_0x3a52e2;_0x235b3e++){let _0x3848d3=_0x1a08f8[_0x235b3e],_0x1845c0=_0x3848d3['matrix'],_0x49b214=Cesium['Matrix4']['multiply'](_0x5521ed['modelMatrix'],_0x1845c0,new Cesium['Matrix4']()),_0x2359e0;Cesium['defined'](_0xb4a8bf['boundingVolume'])&&(_0x2359e0=new Cesium['BoundingSphere'](_0xb4a8bf['boundingVolume']['sphere']['center'],_0xb4a8bf['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0x2359e0,_0x5521ed['modelMatrix'],_0x2359e0));let _0x4fb93e=_0x3848d3['skeletonNames'];for(let _0x26b006=0x0,_0x5040e1=_0x4fb93e['length'];_0x26b006<_0x5040e1;_0x26b006++){let _0x22a975=_0x4fb93e[_0x26b006],_0x52701b=_0x5ca173['geoPackage'][_0x22a975],_0x43c711=_0x52701b['vertexPackage'],_0xde0b34=_0x52701b['arrIndexPackage'],_0x4d7c26=_0x52701b['pickInfo'],_0x4b69d2;_0xde0b34['length']>0x0&&(_0x4b69d2=_0x5521ed['_materialManager']['create'](_0xde0b34[0x0]['materialCode']));let _0x1983ee=Cesium['defined'](_0x2359e0)?_0x2359e0:_0x190027(_0x43c711,_0x49b214);const _0x53f266=_0x44c338[_0x5521ed['fileType']]({'layer':_0x5521ed,'vertexPackage':_0x43c711,'arrIndexPackage':_0xde0b34,'pickInfo':_0x4d7c26,'modelMatrix':_0x49b214,'geoMatrix':_0x1845c0,'boundingVolume':_0x1983ee,'material':_0x4b69d2,'edgeGeometry':_0x52701b['edgeGeometry'],'geoName':_0x22a975});_0xb4a8bf['renderEntities']['push'](_0x53f266);}}if(!Cesium['defined'](_0xb4a8bf['boundingVolume'])&&_0xb4a8bf['renderEntities']['length']>0x0){let _0x26a20e=[];for(let _0x50a95e=0x0,_0xca4a7f=_0xb4a8bf['renderEntities']['length'];_0x50a95e<_0xca4a7f;_0x50a95e++){_0x26a20e['push'](_0xb4a8bf['renderEntities'][_0x50a95e]['boundingVolume']);}_0xb4a8bf['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x26a20e),'isCalc':!![]};}}function _0x313d4b(_0x3fab3b,_0x5a4ff4){let _0x575ace=_0x5a4ff4['groupNode'],_0xbf6e3f=[];for(let _0x15a652=0x0,_0x2a9159=_0x575ace['pageLods']['length'];_0x15a652<_0x2a9159;_0x15a652++){let _0x11c854={},_0x5f548d=_0x575ace['pageLods'][_0x15a652];_0x11c854['rangeMode']=_0x5f548d['rangeMode'],_0x11c854['childTile']=_0x5f548d['childTile'],_0x11c854['rangeList']=_0x5f548d['rangeList'],_0x11c854['isLeafTile']=_0x11c854['childTile']==='',_0x11c854['renderEntities']=[];if(_0x5f548d['boundingSphere']&&!_0x11c854['isLeafTile']){let _0x23085c=_0x5f548d['boundingSphere']['center'],_0x5e2b1e=_0x5f548d['boundingSphere']['radius'];_0x11c854['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0x23085c['x'],_0x23085c['y'],_0x23085c['z']),'radius':_0x5e2b1e},'isCalc':![]};}_0x5f548d['obb']&&(_0x11c854['boundingVolume']=_0x11c854['boundingVolume']||{},_0x11c854['boundingVolume']['obb']=_0x5f548d['obb']),_0x40bf52(_0x3fab3b,_0x5a4ff4,_0x5f548d,_0x11c854),_0xbf6e3f['push'](_0x11c854);}return _0xbf6e3f;}_0x1dd08f['parse']=function(_0x3a719c,_0x4a936d,_0x382bba){if(!Cesium['defined'](_0x382bba))return;_0x3a719c['dataVersion']=_0x382bba['version'],_0x117edd(_0x3a719c,_0x382bba,_0x4a936d);let _0x22095b=_0x313d4b(_0x3a719c,_0x382bba);return _0x22095b;};export default _0x1dd08f;