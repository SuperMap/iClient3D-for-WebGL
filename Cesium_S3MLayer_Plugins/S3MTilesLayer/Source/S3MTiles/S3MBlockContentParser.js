const _0x408445=(function(){let _0xdea96f=!![];return function(_0x574d77,_0x5416e1){const _0x568718=_0xdea96f?function(){if(_0x5416e1){const _0x4b4cd9=_0x5416e1['apply'](_0x574d77,arguments);return _0x5416e1=null,_0x4b4cd9;}}:function(){};return _0xdea96f=![],_0x568718;};}()),_0x1f72e0=_0x408445(this,function(){return _0x1f72e0['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x1f72e0)['search']('(((.+)+)+)+$');});_0x1f72e0();import _0x4a18a8 from'./Factory/S3MContentFactory.js';import _0x572707 from'./Enum/VertexCompressOption.js';import _0x2bf744 from'./MaterialManager.js';import _0x2d378b from'./SubTextureManager.js';import _0x1d85af from'./Enum/S3MPixelFormat.js';import _0x446e1c from'../Core/CRNTranscoder.js';function _0x302b63(){}function _0x40254f(_0x5852f2,_0x80125c,_0x3be0b0){let _0x55f3ac=_0x5852f2['context'],_0xed666c=_0x5852f2['_materialManager'];!_0xed666c&&(_0xed666c=_0x5852f2['_materialManager']=new _0x2bf744());let _0x75e604=_0x5852f2['_subTextureManager'];!_0x5852f2['_subTextureManager']&&(_0x5852f2['_subTextureManager']=_0x2d378b['getSingleInstance']());let _0x4c4a28=_0x80125c['materials']['material'];for(let _0x20d656=0x0,_0x314efa=_0x4c4a28['length'];_0x20d656<_0x314efa;_0x20d656++){let _0x5066bd=_0x4c4a28[_0x20d656]['material'],_0x59a9ad=_0x5066bd['id'],_0x32b465=_0xed666c['create'](_0x59a9ad);_0x32b465['layerId']=_0x5852f2['id'],_0x32b465['tile']=_0x3be0b0;let _0x169f26=_0x5066bd['ambient'];_0x32b465['ambientColor']=new Cesium['Color'](_0x169f26['r'],_0x169f26['g'],_0x169f26['b'],_0x169f26['a']);let _0x20d80c=_0x5066bd['diffuse'];_0x32b465['diffuseColor']=new Cesium['Color'](_0x20d80c['r'],_0x20d80c['g'],_0x20d80c['b'],_0x20d80c['a']);let _0x23bf23=_0x5066bd['specular'];_0x32b465['specularColor']=new Cesium['Color'](_0x23bf23['r'],_0x23bf23['g'],_0x23bf23['b'],_0x23bf23['a']),_0x32b465['shininess']=_0x5066bd['shininess'],_0x32b465['bTransparentSorting']=_0x5066bd['transparentsorting'],_0x32b465['id']=_0x59a9ad;let _0x392c4d=_0x5066bd['textureunitstates'],_0x1d3762=_0x392c4d['length'];for(let _0x2f2e1a=0x0;_0x2f2e1a<0x1;_0x2f2e1a++){let _0x32d48d=_0x392c4d[_0x2f2e1a]['textureunitstate'],_0x455b54=_0x32d48d['id'],_0x51d842=_0x32d48d['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'],_0x530645=_0x32d48d['addressmode']['v']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap']['CLAMP_TO_EDGE'];_0x32b465['texMatrix']=Cesium['Matrix4']['unpack'](_0x32d48d['texmodmatrix']);let _0x4d6d05=_0x80125c['texturePackage'][_0x455b54];if(_0x4d6d05){_0x4d6d05['wrapS']=_0x51d842,_0x4d6d05['wrapT']=_0x530645;if(_0x4d6d05['compressType']===_0x1d85af['CRN_DXT5']&&_0x4d6d05['textureData']){const _0x515403=_0x446e1c['transcode']({'data':_0x4d6d05['textureData'],'bMipMap':!![]});_0x4d6d05['textureData']=_0x515403['bufferView'];}_0x32b465['createTexture'](_0x5852f2,_0x3be0b0,_0x4d6d05,_0x2f2e1a,_0x80125c);}}}return _0x4c4a28;}function _0xe6319(_0x39c01f,_0x5cfda2){let _0x4bb682=new Cesium['BoundingSphere'](),_0x834273=new Cesium['Cartesian3'](),_0x3aea80=_0x39c01f['vertexAttributes'][0x0],_0x1370fb=_0x3aea80['componentsPerAttribute'],_0x4c70a5=Cesium['defined'](_0x39c01f['compressOptions'])&&(_0x39c01f['compressOptions']&_0x572707['SVC_Vertex'])===_0x572707['SVC_Vertex'],_0x3a327b=0x1,_0xb74875,_0xe8d9b2;_0x4c70a5?(_0x3a327b=_0x39c01f['vertCompressConstant'],_0xb74875=new Cesium['Cartesian3'](_0x39c01f['minVerticesValue']['x'],_0x39c01f['minVerticesValue']['y'],_0x39c01f['minVerticesValue']['z']),_0xe8d9b2=new Uint16Array(_0x3aea80['typedArray']['buffer'],_0x3aea80['typedArray']['byteOffset'],_0x3aea80['typedArray']['byteLength']/0x2)):_0xe8d9b2=new Float32Array(_0x3aea80['typedArray']['buffer'],_0x3aea80['typedArray']['byteOffset'],_0x3aea80['typedArray']['byteLength']/0x4);let _0x2ee3ec=[];for(let _0x258de4=0x0;_0x258de4<_0x39c01f['verticesCount'];_0x258de4++){Cesium['Cartesian3']['fromArray'](_0xe8d9b2,_0x1370fb*_0x258de4,_0x834273),_0x4c70a5&&(_0x834273=Cesium['Cartesian3']['multiplyByScalar'](_0x834273,_0x3a327b,_0x834273),_0x834273=Cesium['Cartesian3']['add'](_0x834273,_0xb74875,_0x834273)),_0x2ee3ec['push'](Cesium['Cartesian3']['clone'](_0x834273));}return Cesium['BoundingSphere']['fromPoints'](_0x2ee3ec,_0x4bb682),Cesium['BoundingSphere']['transform'](_0x4bb682,_0x5cfda2,_0x4bb682),_0x2ee3ec['length']=0x0,_0x4bb682;}let _0x51316d=new Cesium['Cartesian3']();function _0x5318a(_0x202516){let _0xe44e9e=new Cesium['BoundingSphere'](),_0x9ed02a=_0x202516['instanceBounds'];if(!Cesium['defined'](_0x9ed02a))return _0xe44e9e;let _0x5ea72b=new Cesium['Cartesian3'](_0x9ed02a[0x0],_0x9ed02a[0x1],_0x9ed02a[0x2]),_0x4faf1d=new Cesium['Carteisan3'](_0x9ed02a[0x3],_0x9ed02a[0x4],_0x9ed02a[0x5]),_0x41ca67=new Cesium['Cartesian3']['lerp'](_0x5ea72b,_0x4faf1d,0.5,_0x51316d),_0xb0446f=new Cesium['Cartesian3']['distance'](_0x41ca67,_0x5ea72b);return _0xe44e9e['center']=_0x41ca67,_0xe44e9e['radius']=_0xb0446f,_0xe44e9e;}function _0x1369b6(_0x2c342e,_0x444662){if(_0x2c342e['instanceIndex']>-0x1)return _0x5318a(_0x2c342e);return _0xe6319(_0x2c342e,_0x444662);}function _0x2c726a(_0x25817b,_0xf64891,_0x490682,_0x28145a){let _0x52a520=_0x490682['geodes'];for(let _0x1b4940=0x0,_0x1b69e6=_0x52a520['length'];_0x1b4940<_0x1b69e6;_0x1b4940++){let _0x2bace1=_0x52a520[_0x1b4940],_0x41365a=_0x2bace1['matrix'],_0x151de9=Cesium['Matrix4']['multiply'](_0x25817b['modelMatrix'],_0x41365a,new Cesium['Matrix4']()),_0x7174c9;Cesium['defined'](_0x28145a['boundingVolume'])&&(_0x7174c9=new Cesium['BoundingSphere'](_0x28145a['boundingVolume']['sphere']['center'],_0x28145a['boundingVolume']['sphere']['radius']),Cesium['BoundingSphere']['transform'](_0x7174c9,_0x25817b['modelMatrix'],_0x7174c9));let _0x544ad4=_0x2bace1['skeletonNames'];for(let _0x25ceaa=0x0,_0x44421d=_0x544ad4['length'];_0x25ceaa<_0x44421d;_0x25ceaa++){let _0x3d4125=_0x544ad4[_0x25ceaa],_0x44ed0a=_0xf64891['geoPackage'][_0x3d4125],_0x3eeee9=_0x44ed0a['vertexPackage'],_0x239329=_0x44ed0a['arrIndexPackage'],_0x2e0e35=_0x44ed0a['pickInfo'],_0x588c63;_0x239329['length']>0x0&&(_0x588c63=_0x25817b['_materialManager']['create'](_0x239329[0x0]['materialCode']));let _0x30afe2=Cesium['defined'](_0x7174c9)?_0x7174c9:_0x1369b6(_0x3eeee9,_0x151de9);const _0x196585=_0x4a18a8[_0x25817b['fileType']]({'layer':_0x25817b,'vertexPackage':_0x3eeee9,'arrIndexPackage':_0x239329,'pickInfo':_0x2e0e35,'modelMatrix':_0x151de9,'geoMatrix':_0x41365a,'boundingVolume':_0x30afe2,'material':_0x588c63,'edgeGeometry':_0x44ed0a['edgeGeometry'],'geoName':_0x3d4125});_0x28145a['renderEntities']['push'](_0x196585);}}if(!Cesium['defined'](_0x28145a['boundingVolume'])&&_0x28145a['renderEntities']['length']>0x0){let _0x7bb7ae=[];for(let _0x28b346=0x0,_0x2a9788=_0x28145a['renderEntities']['length'];_0x28b346<_0x2a9788;_0x28b346++){_0x7bb7ae['push'](_0x28145a['renderEntities'][_0x28b346]['boundingVolume']);}_0x28145a['boundingVolume']={'sphere':Cesium['BoundingSphere']['fromBoundingSpheres'](_0x7bb7ae),'isCalc':!![]};}}function _0x6bf9ed(_0x6d7e14,_0x2d0d55){let _0x1fd7e9=_0x2d0d55['groupNode'],_0x3ab204=[];for(let _0x8aa690=0x0,_0x4bf91c=_0x1fd7e9['pageLods']['length'];_0x8aa690<_0x4bf91c;_0x8aa690++){let _0x5bade5={},_0xd0ba37=_0x1fd7e9['pageLods'][_0x8aa690];_0x5bade5['rangeMode']=_0xd0ba37['rangeMode'],_0x5bade5['childTile']=_0xd0ba37['childTile'],_0x5bade5['rangeList']=_0xd0ba37['rangeList'],_0x5bade5['isLeafTile']=_0x5bade5['childTile']==='',_0x5bade5['renderEntities']=[];if(_0xd0ba37['boundingSphere']&&!_0x5bade5['isLeafTile']){let _0x485373=_0xd0ba37['boundingSphere']['center'],_0x489f8c=_0xd0ba37['boundingSphere']['radius'];_0x5bade5['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0x485373['x'],_0x485373['y'],_0x485373['z']),'radius':_0x489f8c},'isCalc':![]};}_0xd0ba37['obb']&&(_0x5bade5['boundingVolume']=_0x5bade5['boundingVolume']||{},_0x5bade5['boundingVolume']['obb']=_0xd0ba37['obb']),_0x2c726a(_0x6d7e14,_0x2d0d55,_0xd0ba37,_0x5bade5),_0x3ab204['push'](_0x5bade5);}return _0x3ab204;}_0x302b63['parse']=function(_0x2d2240,_0x58e50d,_0xc1f683){if(!Cesium['defined'](_0xc1f683))return;_0x2d2240['dataVersion']=_0xc1f683['version'],_0x40254f(_0x2d2240,_0xc1f683,_0x58e50d);let _0x11bf36=_0x6bf9ed(_0x2d2240,_0xc1f683);return _0x11bf36;};export default _0x302b63;