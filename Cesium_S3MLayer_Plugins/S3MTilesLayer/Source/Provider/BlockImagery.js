var _0x29c521=(function(){var _0xdba4d7=!![];return function(_0x6674dc,_0x499a9b){var _0x125ea1=_0xdba4d7?function(){if(_0x499a9b){var _0x41a6be=_0x499a9b['apply'](_0x6674dc,arguments);return _0x499a9b=null,_0x41a6be;}}:function(){};return _0xdba4d7=![],_0x125ea1;};}()),_0x240496=_0x29c521(this,function(){return _0x240496['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x240496)['search']('(((.+)+)+)+$');});_0x240496();import _0x3bfdfc from'../ThirdParty/defer.js';let _0x444d6a=Cesium['loadImageFromTypedArray'],_0x21ca3d=Cesium['defined'],_0x13a4a5=Cesium['RequestState'],_0x1c552e=Object['assign']({'PACK':0x4,'BLOCK':0x5,'BLOCKPACK':0x6},Cesium['RequestType']);var _0x450624={'webp':'image/webp','png':'image/png'},_0x535c2c={'UNLOADED':0x0,'TRANSITIONING':0x1,'RECEIVED':0x2,'TEXTURE_LOADED':0x3,'READY':0x4,'FAILED':0x5,'INVALID':0x6,'PLACEHOLDER':0x7,'RENDERING':0x8,'RENDERED':0x9},_0x52f439=/\.dxtz/i;function _0x106bac(_0x30b334,_0x196080,_0x33b5b0){var _0x2d4fa1=new DataView(_0x30b334,_0x196080,_0x33b5b0),_0x58b8a8=0x0,_0x12e700=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0xcc7a74=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0x524cc8=_0x12e700===0x20?PixelFormat['RGBA_DXT5']:PixelFormat['RGB_DXT1'],_0x10603b=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0xc5c5ff=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0x466d83=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0x5efaae=_0x2d4fa1['getUint32'](_0x58b8a8,!![]);_0x58b8a8+=Uint32Array['BYTES_PER_ELEMENT'];var _0x4caa63=new Uint8Array(_0x30b334,_0x58b8a8+_0x196080,_0x5efaae),_0x39e8b8=pako['inflate'](_0x4caa63)['buffer'],_0x29612d=new Uint8Array(_0x39e8b8);return new CompressedTextureBuffer(_0x524cc8,_0x10603b,_0xc5c5ff,_0x29612d);}function _0x514cf8(_0x32998b,_0x5c5a4e,_0x1e16a6){var _0x1a10c9=new DataView(_0x32998b),_0x182a36=0x0,_0x50ee80=_0x1a10c9['getUint32'](_0x182a36,!![]);_0x182a36+=0x4;var _0xaedd00=_0x1a10c9['getUint32'](_0x182a36,!![]);_0x182a36+=0x4;var _0xf9e3da=_0x5c5a4e['col'],_0x257826=_0x5c5a4e['row'],_0x10357f=_0x257826*_0x5c5a4e['blockSize']+_0xf9e3da,_0x40483d=0x0,_0x38274e=0x0;for(var _0x385687=0x0;_0x385687<_0xaedd00;_0x385687++){if(_0x385687<_0x10357f)_0x40483d+=_0x1a10c9['getUint32'](_0x182a36,!![]);else{if(_0x385687===_0x10357f){_0x38274e=_0x1a10c9['getUint32'](_0x182a36,!![]),_0x182a36+=0x4;break;}}_0x182a36+=0x4;}_0x182a36=0x8+_0xaedd00*0x4;if(_0x38274e===0x0)return undefined;_0x182a36+=_0x40483d;var _0x2b42c5=_0x3bfdfc(),_0x3a54b2=_0x5c5a4e['url'];return _0x52f439['test'](_0x3a54b2)?_0x2b42c5['resolve'](_0x106bac(_0x32998b,_0x182a36,_0x38274e)):_0x444d6a({'uint8Array':new Uint8Array(_0x32998b,_0x182a36,_0x38274e),'format':_0x1e16a6,'flipY':!![]});}function _0x1e81dc(_0x4f414c,_0x3335ed){const _0x250e97=_0x3335ed['_imageryProvider'],_0x243ff3=_0x3335ed;function _0x53c2c4(_0x2ce96c){if(!_0x21ca3d(_0x2ce96c))return _0x1e7347();var _0x4826cd=_0x450624[_0x250e97['_fileExtension']],_0x526e02=_0x250e97['blockCache'][_0x4f414c['request']['quadKey']];!_0x21ca3d(_0x526e02['data'])&&(_0x526e02['data']=_0x2ce96c);_0x250e97['blockCacheQueue']['touch'](_0x526e02),_0x250e97['blockCacheQueue']['trim'](_0x250e97['blockCacheSize']);_0x21ca3d(_0x250e97['_cacheKey'])&&_0x250e97['_cacheKey']['length']>0x0&&(_0x2ce96c=decodeArrayBuffer(_0x2ce96c,_0x250e97['_cacheKey']));var _0xf8f18a=_0x514cf8(_0x2ce96c,_0x4f414c['request']['blockInfo'],_0x4826cd);!_0x21ca3d(_0xf8f18a)&&(_0x4f414c['state']=_0x535c2c['FAILED']);_0xf8f18a['then'](function(_0x509a6d){_0x4f414c['image']=_0x509a6d,_0x4f414c['state']=_0x535c2c['RECEIVED'];},_0x829a42=>{_0x4f414c['state']=_0x535c2c['FAILED'];}),_0x4f414c['request']=undefined;if(_0x21ca3d(Cesium['TileProviderError']['handleSuccess']))Cesium['TileProviderError']['handleSuccess'](_0x243ff3['_requestImageError']);else _0x21ca3d(Cesium['TileProviderError']['reportSuccess'])&&Cesium['TileProviderError']['reportSuccess'](_0x243ff3['_requestImageError']);}function _0x1e7347(_0x4ef4b4){if(_0x4f414c['request']['state']===_0x13a4a5['CANCELLED']){_0x4f414c['state']=_0x535c2c['UNLOADED'],_0x4f414c['request']=undefined;return;}_0x4f414c['state']=_0x535c2c['FAILED'],_0x4f414c['request']=undefined;const _0x157847='Failed\x20to\x20obtain\x20image\x20tile\x20X:\x20'+_0x4f414c['x']+'\x20Y:\x20'+_0x4f414c['y']+'\x20Level:\x20'+_0x4f414c['level']+'.';_0x243ff3['_requestImageError']=Cesium['TileProviderError']['handleError'](_0x243ff3['_requestImageError'],_0x250e97,_0x250e97['errorEvent'],_0x157847,_0x4f414c['x'],_0x4f414c['y'],_0x4f414c['level'],_0x3a2c91,_0x4ef4b4);}function _0x3a2c91(_0x198b0e){var _0x48b769=new Cesium['Request']({'throttle':![],'throttleByServer':!![],'type':_0x1c552e['IMAGERY']});_0x48b769['cacheEnable']=_0x198b0e,_0x4f414c['request']=_0x48b769,_0x4f414c['state']=_0x535c2c['TRANSITIONING'];var _0x9e841c=_0x250e97['requestImage'](_0x4f414c['x'],_0x4f414c['y'],_0x4f414c['level'],_0x48b769,_0x4f414c['rectangle'],_0x4f414c);if(!_0x21ca3d(_0x9e841c)){_0x4f414c['state']=_0x535c2c['UNLOADED'],_0x4f414c['request']=undefined;return;}_0x21ca3d(_0x250e97['getTileCredits'])&&(_0x4f414c['credits']=_0x250e97['getTileCredits'](_0x4f414c['x'],_0x4f414c['y'],_0x4f414c['level'])),!_0x21ca3d(_0x9e841c['then'])&&(_0x9e841c=Promise['resolve'](_0x9e841c)),_0x9e841c['then'](_0x53c2c4,_0x1e7347);}_0x3a2c91(!![]);}Cesium['ImageryLayer']['prototype']['hookRequestImageryFunc']=Cesium['ImageryLayer']['prototype']['_requestImagery'],Cesium['ImageryLayer']['prototype']['_requestImagery']=function(_0x553f01){_0x553f01['imageryLayer']['imageryProvider']['isBlock']?_0x1e81dc(_0x553f01,this):this['hookRequestImageryFunc'](_0x553f01);};export default{};