const _0x3e22a5=(function(){let _0xa9788f=!![];return function(_0x5ec3ad,_0xa4fe02){const _0x7d1a36=_0xa9788f?function(){if(_0xa4fe02){const _0x38e257=_0xa4fe02['apply'](_0x5ec3ad,arguments);return _0xa4fe02=null,_0x38e257;}}:function(){};return _0xa9788f=![],_0x7d1a36;};}()),_0x204407=_0x3e22a5(this,function(){return _0x204407['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x204407)['search']('(((.+)+)+)+$');});_0x204407();import _0x5927b2 from'./DepthFramebuffer.js';import _0x411296 from'./Shaders/ViewShedAnalysisVS.js';import _0x196820 from'./Shaders/ViewShedAnalysisFS.js';import _0x9fd52f from'./Shaders/NoLightNoTextureVS.js';import _0x312a8d from'./Shaders/NoLightNoTextureFS.js';function _0x4ca486(_0x230188){this['scene']=_0x230188,this['cameraDepthBuffer']=new _0x5927b2(_0x230188['_context']),this['globalDepthBuffer']=new _0x5927b2(_0x230188['_context']),this['segmentCount']=0x14,this['_viewPosition']=[0x0,0x0,0x0],this['_direction']=0x0,this['_pitch']=0x0,this['_horizontalFov']=0x5a,this['_verticalFov']=0x3c,this['_distance']=0x64,this['_visibleAreaColor']=new Cesium['Color'](0x0,0x1,0x0,0.5),this['_hiddenAreaColor']=new Cesium['Color'](0x1,0x0,0x0,0.5),this['_hintLineColor']=new Cesium['Color'](0x1,0x1,0x1,0x1),this['boundingSphere']=new Cesium['BoundingSphere'](),this['viewProjectionMatrix']=new Cesium['Matrix4'](),this['invViewMatrix']=new Cesium['Matrix4'](),this['renderTextureMatrix']=new Cesium['Matrix4'](),this['colorCommand']=undefined,this['stencilCommand']=undefined,this['lineCommand']=undefined,this['dirty']=![],this['isBuild']=![];}Object['defineProperties'](_0x4ca486['prototype'],{'viewPosition':{'get':function(){return this['_viewPosition'];},'set':function(_0x39b37c){this['_viewPosition']=_0x39b37c;}},'direction':{'get':function(){return this['_direction'];},'set':function(_0x2aa89d){this['_direction']=_0x2aa89d,this['dirty']=!![];}},'pitch':{'get':function(){return this['_pitch'];},'set':function(_0x216b1f){this['_pitch']=_0x216b1f,this['dirty']=!![];}},'horizontalFov':{'get':function(){return this['_horizontalFov'];},'set':function(_0x289794){this['_horizontalFov']=_0x289794,this['dirty']=!![];}},'verticalFov':{'get':function(){return this['_verticalFov'];},'set':function(_0x42cd85){this['_verticalFov']=_0x42cd85,this['dirty']=!![];}},'distance':{'get':function(){return this['_distance'];},'set':function(_0x2921b3){this['_distance']=Math['max'](_0x2921b3,0x0),this['dirty']=!![];}}}),_0x4ca486['prototype']['_updateCamera']=function(_0x5f5236){let _0x207c16=_0x5f5236['camera'],_0x30f28e=this['_horizontalFov']*Cesium['Math']['RADIANS_PER_DEGREE'],_0x5b6668=this['_verticalFov']*Cesium['Math']['RADIANS_PER_DEGREE'],_0x2c685a=Math['tan'](_0x30f28e*0.5),_0x39230a=Math['tan'](_0x5b6668*0.5),_0x4a033e=_0x2c685a/_0x39230a,_0x2373c1=this['_distance']*0.001,_0x123233=Math['max'](this['_distance'],0xa),_0x4fa2cf=this['_direction']*Cesium['Math']['RADIANS_PER_DEGREE'],_0x128e3e=this['_pitch']*Cesium['Math']['RADIANS_PER_DEGREE'],_0x408feb=Cesium['Cartesian3']['fromDegreesArrayHeights'](this['_viewPosition'])[0x0],_0x3c10e9=_0x207c16['frustum']['aspectRatio'],_0x16c266=_0x207c16['frustum']['fov'],_0x46b290=_0x207c16['frustum']['near'],_0x27dec8=_0x207c16['frustum']['far'],_0x157882=new Cesium['Cartesian3'](),_0x2f7b79=_0x207c16['heading'],_0x13e866=_0x207c16['pitch'];Cesium['Cartesian3']['clone'](_0x207c16['position'],_0x157882);let _0xcb91ab=_0x5f5236['useLogDepth'],_0x5c37d9=this['scene']['farToNearRatio'];this['cameraDepthBuffer']['isUpdate']=!![],this['cameraDepthBuffer']['beginFunc']=_0xdfd66b=>{_0xdfd66b['useLogDepth']=![],_0x3c10e9=_0x207c16['frustum']['aspectRatio'],_0x16c266=_0x207c16['frustum']['fov'],_0x46b290=_0x207c16['frustum']['near'],_0x27dec8=_0x207c16['frustum']['far'],_0x2f7b79=_0x207c16['heading'],_0x13e866=_0x207c16['pitch'],Cesium['Cartesian3']['clone'](_0x207c16['position'],_0x157882),_0x207c16['frustum']['aspectRatio']=_0x4a033e,_0x207c16['frustum']['fov']=_0x30f28e,_0x207c16['frustum']['near']=0x1,_0x207c16['frustum']['far']=_0x123233+0x1,_0x207c16['setView']({'destination':_0x408feb,'orientation':{'heading':_0x4fa2cf,'pitch':_0x128e3e,'roll':_0x207c16['roll']}});const _0x501200=this['scene']['_primitives']['_primitives'];for(let _0x76a3dd=0x0;_0x76a3dd<_0x501200['length'];++_0x76a3dd){const _0x525e1d=_0x501200[_0x76a3dd];!Cesium['defined'](_0x525e1d['fileType'])&&(_0x525e1d['preShow']=_0x525e1d['show'],_0x525e1d['show']=![]);}Cesium['Matrix4']['multiply'](_0x207c16['frustum']['projectionMatrix'],_0x207c16['viewMatrix'],this['viewProjectionMatrix']),Cesium['Matrix4']['clone'](_0x207c16['inverseViewMatrix'],this['invViewMatrix']),Cesium['Cartesian3']['clone'](Cesium['Cartesian3']['ZERO'],this['boundingSphere']['center']),this['boundingSphere']['radius']=this['_distance'],Cesium['BoundingSphere']['transform'](this['boundingSphere'],this['invViewMatrix'],this['boundingSphere']);},this['cameraDepthBuffer']['endFunc']=_0x36232c=>{_0x207c16['setView']({'destination':_0x157882,'orientation':{'heading':_0x2f7b79,'pitch':_0x13e866,'roll':_0x207c16['roll']},'convert':![]}),_0x207c16['frustum']['aspectRatio']=_0x3c10e9,_0x207c16['frustum']['fov']=_0x16c266,_0x207c16['frustum']['near']=_0x46b290,_0x207c16['frustum']['far']=_0x27dec8;const _0x21864b=this['scene']['_primitives']['_primitives'];for(let _0x2332dc=0x0;_0x2332dc<_0x21864b['length'];++_0x2332dc){const _0x365913=_0x21864b[_0x2332dc];!Cesium['defined'](_0x365913['fileType'])&&(_0x365913['show']=_0x365913['preShow']);}this['cameraDepthBuffer']['isUpdate']=![],_0x36232c['useLogDepth']=_0xcb91ab;},this['globalDepthBuffer']['isUpdate']=!![],this['globalDepthBuffer']['beginFunc']=_0x7d4c95=>{_0x7d4c95['useLogDepth']=![],_0x207c16['frustum']['near']=0xa,this['scene']['farToNearRatio']=this['scene']['logarithmicDepthFarToNearRatio'];},this['globalDepthBuffer']['endFunc']=_0x5cef79=>{if(this['scene']['view']['frustumCommandsList']['length']>0x0){let _0x52f4b5=this['scene']['view']['frustumCommandsList'][0x0];_0x207c16['frustum']['near']=_0x52f4b5['near'],_0x207c16['frustum']['far']=_0x52f4b5['far'];}let _0x384298=Cesium['Matrix4']['inverse'](_0x207c16['frustum']['projectionMatrix'],new Cesium['Matrix4']()),_0x50bab0=Cesium['Matrix4']['multiply'](_0x207c16['inverseViewMatrix'],_0x384298,new Cesium['Matrix4']());Cesium['Matrix4']['multiply'](this['viewProjectionMatrix'],_0x50bab0,this['renderTextureMatrix']),_0x5cef79['useLogDepth']=_0xcb91ab,this['scene']['farToNearRatio']=_0x5c37d9,_0x207c16['frustum']['near']=_0x46b290,_0x207c16['frustum']['far']=_0x27dec8;};};function _0x2a5ca5(_0x1f687d){const _0x1425a5=_0x1f687d['segmentCount'],_0x45bef1=_0x1f687d['segmentCount']+0x1,_0x13b602=_0x1f687d['_distance'];let _0x3349db=_0x45bef1*_0x45bef1+0x1,_0x527db9=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['FLOAT'],_0x3349db*0x3),_0x509d=_0x1f687d['_horizontalFov']*Cesium['Math']['RADIANS_PER_DEGREE'],_0xfced93=_0x1f687d['_verticalFov']*Cesium['Math']['RADIANS_PER_DEGREE'],_0xf3451=Math['tan'](_0x509d*0.5),_0x49c578=Math['tan'](_0xfced93*0.5),_0x2ab256=Math['PI']-_0x509d*0.5,_0x2feb04=_0x13b602*_0xf3451,_0x5b05ed=_0x13b602*_0x49c578,_0x17ffe2=0x0,_0x1f2b76=0x0,_0x3cf988=_0x509d/_0x1425a5,_0xb1c42a=0x3;for(let _0x2cffd0=0x0;_0x2cffd0<_0x45bef1;_0x2cffd0++){_0x17ffe2=_0x2ab256+_0x2cffd0*_0x3cf988;let _0x225432=_0x5b05ed/(_0x13b602/Math['cos'](_0x17ffe2)),_0x40820e=Math['atan'](_0x225432),_0x226d46=-_0x40820e,_0x57831e=_0x40820e*0x2/_0x1425a5;for(let _0x59d80d=0x0;_0x59d80d<_0x45bef1;_0x59d80d++){_0x1f2b76=_0x226d46+_0x59d80d*_0x57831e;let _0x5b7595=_0x13b602*Math['cos'](_0x1f2b76)*Math['sin'](_0x17ffe2),_0x351e2f=_0x13b602*Math['sin'](_0x1f2b76),_0x5201b5=_0x13b602*Math['cos'](_0x1f2b76)*Math['cos'](_0x17ffe2);_0x527db9[_0xb1c42a++]=_0x5b7595,_0x527db9[_0xb1c42a++]=_0x351e2f,_0x527db9[_0xb1c42a++]=_0x5201b5;}}return _0x527db9;}function _0x274d9d(_0xfb2350){const _0x51b0e3=_0xfb2350['segmentCount'],_0x619d7b=_0x51b0e3+0x1;let _0x59006c=_0x51b0e3*_0x51b0e3*0x3*0x2+_0x51b0e3*0x3*0x4,_0x583e20=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_SHORT'],_0x59006c),_0x3fb9fa=0x0,_0x5e280a=0x1;for(let _0x448919=0x0;_0x448919<_0x51b0e3;_0x448919++){for(let _0x86bacf=0x0;_0x86bacf<_0x51b0e3;_0x86bacf++){_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+_0x86bacf*_0x619d7b,_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+0x1+_0x86bacf*_0x619d7b,_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+(_0x86bacf+0x1)*_0x619d7b,_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+0x1+_0x86bacf*_0x619d7b,_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+0x1+(_0x86bacf+0x1)*_0x619d7b,_0x583e20[_0x3fb9fa++]=_0x5e280a+_0x448919+(_0x86bacf+0x1)*_0x619d7b;}}for(let _0x1750d1=0x0;_0x1750d1<_0x51b0e3;_0x1750d1++){_0x583e20[_0x3fb9fa++]=_0x1750d1+0x1+_0x5e280a,_0x583e20[_0x3fb9fa++]=_0x1750d1+_0x5e280a,_0x583e20[_0x3fb9fa++]=0x0,_0x583e20[_0x3fb9fa++]=0x0,_0x583e20[_0x3fb9fa++]=_0x1750d1+_0x51b0e3*_0x619d7b+_0x5e280a,_0x583e20[_0x3fb9fa++]=_0x1750d1+0x1+_0x51b0e3*_0x619d7b+_0x5e280a;}for(let _0x4780d5=0x0;_0x4780d5<_0x51b0e3;_0x4780d5++){_0x583e20[_0x3fb9fa++]=0x0,_0x583e20[_0x3fb9fa++]=_0x4780d5*_0x619d7b+_0x5e280a,_0x583e20[_0x3fb9fa++]=(_0x4780d5+0x1)*_0x619d7b+_0x5e280a,_0x583e20[_0x3fb9fa++]=_0x51b0e3+(_0x4780d5+0x1)*_0x619d7b+_0x5e280a,_0x583e20[_0x3fb9fa++]=_0x51b0e3+_0x4780d5*_0x619d7b+_0x5e280a,_0x583e20[_0x3fb9fa++]=0x0;}return _0x583e20;}function _0x170fad(_0x46a1da){const _0x121f01=_0x46a1da['segmentCount'],_0xd68a65=_0x121f01+0x1,_0x14bbf1=(0x4+_0x121f01*0x5+_0x121f01*0x2*0x3)*0x2;let _0xbb23fe=Cesium['ComponentDatatype']['createTypedArray'](Cesium['ComponentDatatype']['UNSIGNED_SHORT'],_0x14bbf1),_0xfc38c2=0x0;_0xbb23fe[_0xfc38c2++]=0x0,_0xbb23fe[_0xfc38c2++]=0x1,_0xbb23fe[_0xfc38c2++]=0x0,_0xbb23fe[_0xfc38c2++]=_0xd68a65,_0xbb23fe[_0xfc38c2++]=0x0,_0xbb23fe[_0xfc38c2++]=_0x121f01*_0xd68a65+0x1,_0xbb23fe[_0xfc38c2++]=0x0,_0xbb23fe[_0xfc38c2++]=_0xd68a65*_0xd68a65;for(let _0x45d0e9=0x0;_0x45d0e9<0x5;_0x45d0e9++){for(let _0x31bbf0=0x0;_0x31bbf0<_0x121f01;_0x31bbf0++){_0xbb23fe[_0xfc38c2++]=0x1+_0x31bbf0+_0xd68a65*0x5*_0x45d0e9,_0xbb23fe[_0xfc38c2++]=0x1+(_0x31bbf0+0x1)+_0xd68a65*0x5*_0x45d0e9;}}for(let _0x3d4cb2=0x0;_0x3d4cb2<0x5;_0x3d4cb2++){for(let _0x163132=0x0;_0x163132<_0x121f01;_0x163132++){_0xbb23fe[_0xfc38c2++]=0x1+_0xd68a65*_0x163132+_0x3d4cb2*0x5,_0xbb23fe[_0xfc38c2++]=0x1+_0xd68a65*(_0x163132+0x1)+_0x3d4cb2*0x5;}}return _0xbb23fe;}_0x4ca486['prototype']['_createCommand']=function(_0x2e9403){let _0x35171d=_0x2a5ca5(this),_0x2927e8=_0x274d9d(this),_0x1d4427=_0x170fad(this),_0x2cf1a9=_0x2e9403['context'],_0x2040ec=Cesium['Buffer']['createVertexBuffer']({'context':_0x2cf1a9,'typedArray':_0x35171d,'usage':Cesium['BufferUsage']['STATIC_DRAW']}),_0x26cc40=Cesium['Buffer']['createIndexBuffer']({'context':_0x2cf1a9,'typedArray':_0x2927e8,'usage':Cesium['BufferUsage']['STATIC_DRAW'],'indexDatatype':Cesium['IndexDatatype']['UNSIGNED_SHORT']}),_0x171693=[{'index':0x0,'vertexBuffer':_0x2040ec,'componentsPerAttribute':0x3,'componentDatatype':Cesium['ComponentDatatype']['FLOAT'],'offsetInBytes':0x0,'strideInBytes':0x3*0x4,'normalize':![]}],_0x411a78={'aPosition':0x0},_0x5ae8f1=new Cesium['VertexArray']({'context':_0x2cf1a9,'attributes':_0x171693,'indexBuffer':_0x26cc40}),_0xcea877=new Cesium['ShaderSource']({'sources':[_0x411296]}),_0x331db6=new Cesium['ShaderSource']({'sources':[_0x196820]}),_0x4df3c7=Cesium['ShaderProgram']['fromCache']({'context':_0x2cf1a9,'vertexShaderSource':_0xcea877,'fragmentShaderSource':_0x331db6,'attributeLocations':_0x411a78}),_0x2aac59=Cesium['RenderState']['fromCache']({'cull':{'enabled':![]},'depthTest':{'enabled':![]},'depthMask':![],'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['NOT_EQUAL'],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation']['DECREMENT_WRAP']},'backFunction':Cesium['StencilFunction']['NOT_EQUAL'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation']['DECREMENT_WRAP']},'reference':0x0,'mask':~0x0},'blending':Cesium['BlendingState']['ALPHA_BLEND']});this['colorCommand']=new Cesium['DrawCommand']({'primitiveType':Cesium['PrimitiveType']['TRIANGLES'],'modelMatrix':this['invViewMatrix'],'boundingVolume':this['boundingSphere'],'pass':Cesium['Pass']['OPAQUE'],'shaderProgram':_0x4df3c7,'vertexArray':_0x5ae8f1,'renderState':_0x2aac59,'owner':this,'cull':!![]}),this['colorCommand']['uniformMap']={'uVisibleAreaColor':()=>{return this['_visibleAreaColor'];},'uHiddenAreaColor':()=>{return this['_hiddenAreaColor'];},'uRenderTextureMatrix':()=>{return this['renderTextureMatrix'];},'uTextureSize':()=>{let _0xe268b5=this['cameraDepthBuffer']['depthTexture'];return new Cesium['Cartesian2'](_0xe268b5['width'],_0xe268b5['height']);},'uTexture':()=>{return this['cameraDepthBuffer']['depthTexture'];},'uGlobalDepthTexture':()=>{return this['globalDepthBuffer']['depthTexture'];}};let _0x1bdf93=Cesium['DrawCommand']['shallowClone'](this['colorCommand']);_0x1bdf93['renderState']=Cesium['RenderState']['fromCache']({'depthMask':![],'colorMask':{'red':![],'green':![],'blue':![],'alpha':![]},'depthTest':{'enabled':!![],'func':Cesium['DepthFunction']['GREATER']},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation']['INCREMENT_WRAP']},'backFunction':Cesium['StencilFunction']['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation']['DECREMENT_WRAP']},'reference':0x0,'mask':~0x0}}),this['stencilCommand']=_0x1bdf93;let _0x51b6f0=Cesium['Buffer']['createIndexBuffer']({'context':_0x2cf1a9,'typedArray':_0x1d4427,'usage':Cesium['BufferUsage']['STATIC_DRAW'],'indexDatatype':Cesium['IndexDatatype']['UNSIGNED_SHORT']});this['lineCommand']=new Cesium['DrawCommand']({'primitiveType':Cesium['PrimitiveType']['LINES'],'modelMatrix':this['invViewMatrix'],'boundingVolume':this['boundingSphere'],'pass':Cesium['Pass']['OPAQUE'],'owner':this,'cull':!![]}),this['lineCommand']['vertexArray']=new Cesium['VertexArray']({'context':_0x2cf1a9,'attributes':_0x171693,'indexBuffer':_0x51b6f0}),this['lineCommand']['shaderProgram']=Cesium['ShaderProgram']['fromCache']({'context':_0x2cf1a9,'vertexShaderSource':_0x9fd52f,'fragmentShaderSource':_0x312a8d,'attributeLocations':_0x411a78}),this['lineCommand']['renderState']=Cesium['RenderState']['fromCache']({'cull':{'enabled':![]},'depthTest':{'enabled':!![]},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),this['lineCommand']['uniformMap']={'uColor':()=>{return this['_hintLineColor'];}};},_0x4ca486['prototype']['setDistDirByPoint']=function(_0x37e187){let _0x4b3af8=this['scene']['camera'],_0x357278=_0x4b3af8['_projection'],_0x3273c6=Cesium['Cartesian3']['fromDegreesArrayHeights'](_0x37e187)[0x0],_0x115f94=Cesium['Cartesian3']['fromDegreesArrayHeights'](this['_viewPosition'])[0x0],_0x5b41e0=new Cesium['Cartesian3']();Cesium['Cartesian3']['subtract'](_0x3273c6,_0x115f94,_0x5b41e0);let _0x273b81=Cesium['Cartesian3']['magnitude'](_0x5b41e0);Cesium['Cartesian3']['normalize'](_0x5b41e0,_0x5b41e0),this['distance']=_0x273b81;let _0x204c7f=_0x4b3af8['heading'],_0x32c1c8=_0x4b3af8['pitch'],_0x5ce262=_0x4b3af8['roll'],_0x5dff0c=new Cesium['Cartesian3']();Cesium['Cartesian3']['clone'](_0x4b3af8['position'],_0x5dff0c);let _0x435d24=_0x5b41e0['clone'](),_0x3f2bb2=_0x115f94['clone']();_0x3f2bb2=Cesium['Cartesian3']['normalize'](_0x3f2bb2,_0x3f2bb2);Math['abs'](Cesium['Cartesian3']['dot'](_0x3f2bb2,_0x435d24))>=0x1&&(Math['abs'](Cesium['Cartesian3']['dot'](_0x435d24,Cesium['Cartesian3']['UNIT_Y']))<0x1?_0x3f2bb2=Cesium['Cartesian3']['clone'](Cartesian3['UNIT_Y'],_0x3f2bb2):_0x3f2bb2=Cesium['Cartesian3']['clone'](Cartesian3['UNIT_Z'],_0x3f2bb2));let _0x245bf6=new Cesium['Cartesian3']();Cesium['Cartesian3']['cross'](_0x3f2bb2,_0x435d24,_0x245bf6),_0x245bf6=Cesium['Cartesian3']['normalize'](_0x245bf6,_0x245bf6),Cesium['Cartesian3']['cross'](_0x435d24,_0x245bf6,_0x3f2bb2),_0x3f2bb2=Cesium['Cartesian3']['normalize'](_0x3f2bb2,_0x3f2bb2),_0x4b3af8['setView']({'destination':_0x115f94,'orientation':{'direction':_0x435d24,'up':_0x3f2bb2},'convert':![]}),this['direction']=_0x4b3af8['heading']*Cesium['Math']['DEGREES_PER_RADIAN'],this['pitch']=_0x4b3af8['pitch']*Cesium['Math']['DEGREES_PER_RADIAN'],_0x4b3af8['setView']({'destination':_0x5dff0c,'orientation':{'heading':_0x204c7f,'pitch':_0x32c1c8,'roll':_0x5ce262},'convert':![]});},_0x4ca486['prototype']['_destroyCommand']=function(){this['colorCommand']&&(this['colorCommand']['vertexArray']=this['colorCommand']['vertexArray']&&!this['colorCommand']['vertexArray']['isDestroyed']()&&this['colorCommand']['vertexArray']['destroy'](),this['colorCommand']['shaderProgram']=this['colorCommand']['shaderProgram']&&!this['colorCommand']['shaderProgram']['isDestroyed']()&&this['colorCommand']['shaderProgram']['destroy'](),this['colorCommand']=undefined),this['stencilCommand']&&(this['stencilCommand']['vertexArray']=this['stencilCommand']['vertexArray']&&!this['stencilCommand']['vertexArray']['isDestroyed']()&&this['stencilCommand']['vertexArray']['destroy'](),this['stencilCommand']['shaderProgram']=this['stencilCommand']['shaderProgram']&&!this['stencilCommand']['shaderProgram']['isDestroyed']()&&this['stencilCommand']['shaderProgram']['destroy'](),this['stencilCommand']=undefined),this['lineCommand']&&(this['lineCommand']['vertexArray']=this['lineCommand']['vertexArray']&&!this['lineCommand']['vertexArray']['isDestroyed']()&&this['lineCommand']['vertexArray']['destroy'](),this['lineCommand']['shaderProgram']=this['lineCommand']['shaderProgram']&&!this['lineCommand']['shaderProgram']['isDestroyed']()&&this['lineCommand']['shaderProgram']['destroy'](),this['lineCommand']=undefined);},_0x4ca486['prototype']['update']=function(_0x24b444){if(_0x24b444['fbo']||_0x24b444['passes']['pick']||_0x24b444['passes']['depth'])return;this['dirty']&&(this['dirty']=![],this['_destroyCommand'](),this['_updateCamera'](_0x24b444),this['_createCommand'](_0x24b444)),this['stencilCommand']&&_0x24b444['commandList']['push'](this['stencilCommand']),this['colorCommand']&&_0x24b444['commandList']['push'](this['colorCommand']),this['lineCommand']&&_0x24b444['commandList']['push'](this['lineCommand']);},_0x4ca486['prototype']['build']=function(){if(this['isBuild'])return;this['isBuild']=!![],this['scene']['primitives']['add'](this),this['removeListenerFunc']=this['scene']['preUpdate']['addEventListener']((_0x4ac1e1,_0x19f0d6)=>{this['cameraDepthBuffer']['renderToTexture'](_0x4ac1e1),this['globalDepthBuffer']['renderToTexture'](_0x4ac1e1);},this);},_0x4ca486['prototype']['clear']=function(){if(!this['isBuild'])return;this['isBuild']=![],this['removeListenerFunc'](),this['scene']['primitives']['remove'](this);},_0x4ca486['prototype']['isDestroyed']=function(){return![];},_0x4ca486['prototype']['destroy']=function(){this['cameraDepthBuffer']=this['cameraDepthBuffer']['destroy'](),this['globalDepthBuffer']=this['globalDepthBuffer']['destroy']();if(this['colorCommand']){let _0x1799b7=this['colorCommand']['vertexArray'],_0x1cb28b=this['colorCommand']['shaderProgram'];_0x1799b7=_0x1799b7&&!_0x1799b7['isDestroyed']()&&_0x1799b7['destroy'](),_0x1cb28b=_0x1cb28b&&!_0x1cb28b['isDestroyed']()&&_0x1cb28b['destroy'](),this['colorCommand']=undefined;}if(this['stencilCommand']){let _0x417340=this['stencilCommand']['vertexArray'],_0x4183b8=this['stencilCommand']['shaderProgram'];_0x417340=_0x417340&&!_0x417340['isDestroyed']()&&_0x417340['destroy'](),_0x4183b8=_0x4183b8&&!_0x4183b8['isDestroyed']()&&_0x4183b8['destroy'](),this['stencilCommand']=undefined;}if(this['lineCommand']){let _0x201b34=this['lineCommand']['vertexArray'],_0x3b7c05=this['lineCommand']['shaderProgram'];_0x201b34=_0x201b34&&!_0x201b34['isDestroyed']()&&_0x201b34['destroy'](),_0x3b7c05=_0x3b7c05&&!_0x3b7c05['isDestroyed']()&&_0x3b7c05['destroy'](),this['lineCommand']=undefined;}};export default _0x4ca486;