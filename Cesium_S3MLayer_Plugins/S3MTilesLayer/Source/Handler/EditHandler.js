var _0x2b695e=(function(){var _0x53db7a=!![];return function(_0x25a9c3,_0x1ccce9){var _0x4e66a9=_0x53db7a?function(){if(_0x1ccce9){var _0x292442=_0x1ccce9['apply'](_0x25a9c3,arguments);return _0x1ccce9=null,_0x292442;}}:function(){};return _0x53db7a=![],_0x4e66a9;};}()),_0x3127ae=_0x2b695e(this,function(){return _0x3127ae['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x3127ae)['search']('(((.+)+)+)+$');});_0x3127ae();import _0x17d015 from'../Ext/buildModuleUrl.js';var _0x19a7c9='referencePoint',_0x5a5dfb='referenceAddPoint',_0x764bba=function(_0x1110b6,_0x5b0079){if(!Cesium['defined'](_0x1110b6)||!Cesium['defined'](_0x5b0079))throw new Cesium['DeveloperError']('scene\x20and\x20mode\x20is\x20required!');this['handler']=new Cesium['ScreenSpaceEventHandler'](_0x1110b6['canvas']),this['scene']=_0x1110b6,this['active']=![],this['referencePointColor']=Cesium['Color']['WHITE'],this['editPointColor']=Cesium['Color']['VIOLET'],this['setEditObject'](_0x5b0079),this['_editZ']=![],this['_changedEvt']=new Cesium['Event']();};Object['defineProperties'](_0x764bba['prototype'],{'isEditZ':{'get':function(){return this['_editZ'];},'set':function(_0x2c430d){this['_editZ']=_0x2c430d;}},'changedEvt':{'get':function(){return this['_changedEvt'];}}}),_0x764bba['prototype']['setEditObject']=function(_0x4476e0){if(!Cesium['defined'](_0x4476e0['_polygon'])&&!Cesium['defined'](_0x4476e0['_polyline']))return;this['clear'](),this['_editObject']=_0x4476e0,this['_polygon']=_0x4476e0['_polygon'];if(Cesium['defined'](this['_polygon'])){var _0x2edbdd=this['_polygon']['hierarchy']['getValue'](0x0);if(!Array['isArray'](_0x2edbdd)){if(Array['isArray'](_0x2edbdd['positions']))_0x2edbdd=_0x2edbdd['positions'];else throw new Cesium['DeveloperError']('positions\x20is\x20required!');}this['_positions']=_0x2edbdd;}this['_polyline']=_0x4476e0['_polyline'];Cesium['defined'](this['_polyline'])&&(this['_positions']=this['_polyline']['positions']['getValue'](0x0));this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x52d1ea=0x0;_0x52d1ea<this['_positions']['length'];_0x52d1ea++){this['_editPoints']['add']({'id':_0x19a7c9+'_'+_0x52d1ea,'position':this['_positions'][_0x52d1ea],'image':_0x17d015('Assets/Textures/vertex-edit.png')});}this['_editPointIndex']=-0x1,this['_editPoint']=undefined,this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x52d1ea=0x0;_0x52d1ea<this['_positions']['length']-0x1;_0x52d1ea++){var _0x15b5b6=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x52d1ea],this['_positions'][_0x52d1ea+0x1],_0x15b5b6),Cesium['Cartesian3']['multiplyByScalar'](_0x15b5b6,0.5,_0x15b5b6),this['_addPositions']['push'](_0x15b5b6);}if(Cesium['defined'](this['_polygon'])){var _0x15b5b6=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x15b5b6),Cesium['Cartesian3']['multiplyByScalar'](_0x15b5b6,0.5,_0x15b5b6),this['_addPositions']['push'](_0x15b5b6);}for(var _0x52d1ea=0x0;_0x52d1ea<this['_addPositions']['length'];_0x52d1ea++){this['_addPoints']['add']({'id':_0x5a5dfb+'_'+_0x52d1ea,'position':this['_addPositions'][_0x52d1ea],'image':_0x17d015('Assets/Textures/middle-edit.png')});}this['activate']();},_0x764bba['prototype']['activate']=function(){if(this['active']==!![])return;this['active']=!![];var _0x552c48=this;this['handler']['setInputAction'](function(_0x27de7d){_0x5b73bd(_0x27de7d,_0x552c48);},Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['setInputAction'](function(_0x46d65c){_0x32a795(_0x46d65c,_0x552c48);},Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['setInputAction'](function(_0x59b2b4){_0x28e0c1(_0x59b2b4,_0x552c48);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['setInputAction'](function(_0x455dda){_0x2fa4b4(_0x455dda,_0x552c48);},Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0x764bba['prototype']['deactivate']=function(){this['active']=![],this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0x764bba['prototype']['clear']=function(){this['deactivate'](),Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll'](),Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined),Cesium['defined'](this['_editObject'])&&(this['_editObject']=undefined),Cesium['defined'](this['_polygon'])&&(this['_polygon']=undefined),Cesium['defined'](this['_polyline'])&&(this['_polyline']=undefined),Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll'](),Cesium['defined'](this['_addPositions'])&&(this['_addPositions']['length']=0x0),Cesium['defined'](this['_positions'])&&(this['_positions']=undefined);},_0x764bba['prototype']['refreshReferencePoint']=function(){Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll']();this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x558895=0x0;_0x558895<this['_positions']['length'];_0x558895++){this['_editPoints']['add']({'id':_0x19a7c9+'_'+_0x558895,'position':this['_positions'][_0x558895],'image':_0x17d015('Assets/Textures/vertex-edit.png')});}Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined);},_0x764bba['prototype']['refreshReferenceAddPoint']=function(){Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll']();this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x4acd3d=0x0;_0x4acd3d<this['_positions']['length']-0x1;_0x4acd3d++){var _0x106d53=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x4acd3d],this['_positions'][_0x4acd3d+0x1],_0x106d53),Cesium['Cartesian3']['multiplyByScalar'](_0x106d53,0.5,_0x106d53),this['_addPositions']['push'](_0x106d53);}if(Cesium['defined'](this['_polygon'])){var _0x106d53=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x106d53),Cesium['Cartesian3']['multiplyByScalar'](_0x106d53,0.5,_0x106d53),this['_addPositions']['push'](_0x106d53);}for(var _0x4acd3d=0x0;_0x4acd3d<this['_addPositions']['length'];_0x4acd3d++){this['_addPoints']['add']({'position':this['_addPositions'][_0x4acd3d],'id':_0x5a5dfb+'_'+_0x4acd3d,'image':_0x17d015('Assets/Textures/middle-edit.png')});}};function _0x131c9e(_0x416b99,_0x275fc7){var _0x245d17=_0x416b99['pick'](_0x275fc7['position']);if(Cesium['defined'](_0x245d17)){var _0x3db048=Cesium['defaultValue'](_0x245d17['id'],_0x245d17['primitive']['id']);if(Cesium['defined'](_0x245d17['primitive']))return _0x245d17;}}function _0x5b73bd(_0x23804f,_0x18d838){var _0x1f7d50=_0x18d838;if(_0x1f7d50&&_0x1f7d50['active']){var _0x1e71b8=_0x131c9e(_0x1f7d50['scene'],_0x23804f);if(Cesium['defined'](_0x1e71b8)){var _0x3b07df=_0x1e71b8['id'];if(!Cesium['defined'](_0x3b07df))return;var _0x38cc77=[];typeof _0x3b07df==='string'&&(_0x38cc77=_0x3b07df['split']('_'));if(_0x38cc77['length']==0x2){if(_0x38cc77[0x0]===_0x19a7c9)_0x1f7d50['_editPointIndex']=parseInt(_0x38cc77[0x1]),_0x1f7d50['_editPoint']=_0x1e71b8['primitive'],_0x1f7d50['_editPoint']['Color']=_0x1f7d50['editPointColor'],_0x1f7d50['scene']['_screenSpaceCameraController']['enableRotate']=![],_0x1f7d50['scene']['_screenSpaceCameraController']['enableTranslate']=![];else{if(_0x38cc77[0x0]===_0x5a5dfb){var _0x30dd84=parseInt(_0x38cc77[0x1]),_0x4c45a8=_0x1f7d50['_addPositions'],_0x4f4af1=_0x4c45a8[_0x30dd84],_0x41f974=_0x1f7d50['_positions'];_0x41f974['splice'](_0x30dd84+0x1,0x0,_0x4f4af1);var _0x8de54a=_0x1f7d50['_polyline'];Cesium['defined'](_0x8de54a)&&(_0x8de54a['positions']=new Cesium['CallbackProperty'](function(){return _0x41f974;},![]));var _0x187c80=_0x1f7d50['_polygon'];if(Cesium['defined'](_0x187c80)){var _0x2cbf15=new Cesium['CallbackProperty'](function(){return _0x41f974;},![]),_0x41f974=_0x187c80['hierarchy']['getValue'](0x0);!Array['isArray'](_0x41f974)?_0x187c80['hierarchy']['positions']=_0x2cbf15:_0x187c80['hierarchy']=_0x2cbf15;}_0x1f7d50['refreshReferencePoint'](),_0x1f7d50['refreshReferenceAddPoint']();}}}}else _0x18d838['clear']();}}function _0x32a795(_0xeb6bc4,_0x330e71){var _0xcf8462=_0x330e71;_0xcf8462&&_0xcf8462['active']&&(_0xcf8462['_editPointIndex']=-0x1,Cesium['defined'](_0xcf8462['_editPoint'])&&(_0xcf8462['_editPoint']['Color']=_0xcf8462['referencePointColor'],_0xcf8462['_editPoint']=undefined),_0xcf8462['scene']['_screenSpaceCameraController']['enableRotate']=!![],_0xcf8462['scene']['_screenSpaceCameraController']['enableTranslate']=!![],_0xcf8462['_changedEvt']['raiseEvent'](_0xcf8462['_positions']));}function _0x28e0c1(_0x42a6b2,_0x4687e3){var _0x17110d=_0x4687e3;if(_0x17110d&&_0x17110d['active']&&_0x17110d['_editPointIndex']>-0x1){if(_0x17110d['scene']['_screenSpaceCameraController']['_aggregator']['_isDown'][0x0]){var _0x3051ea=new Cesium['Cartesian2'](_0x42a6b2['endPosition']['x'],_0x42a6b2['endPosition']['y']),_0x3a68c3=_0x17110d['_polyline'],_0x53f855=_0x17110d['_polygon'],_0x32ef99=!![];Cesium['defined'](_0x3a68c3)&&(_0x32ef99=_0x3a68c3['clampToGround']);Cesium['defined'](_0x53f855)&&(_0x32ef99=!_0x53f855['perPositionHeight']);var _0x4cfde5;if(Cesium['defined'](_0x32ef99)&&_0x32ef99['_value'])_0x4cfde5=_0x17110d['scene']['pickPosition'](_0x3051ea);else{if(_0x17110d['_editZ']){var _0x16eda4=_0x17110d['scene']['camera']['getPickRay'](_0x3051ea),_0x5511e2=_0x17110d['scene']['camera']['getPickRay'](new Cesium['Cartesian2'](_0x3051ea['x']+0x5,_0x3051ea['y'])),_0x2267af=Cesium['Cartesian3']['cross'](_0x16eda4['direction'],_0x5511e2['direction'],new Cesium['Cartesian3']()),_0x3f2484=Cesium['Cartesian3']['normalize'](_0x2267af,new Cesium['Cartesian3']());if(_0x17110d['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x1aa63e=Cesium['Plane']['fromPointNormal'](_0x17110d['scene']['camera']['positionWC'],_0x3f2484),_0x2b116c=Cesium['Transforms']['convertToColumbusCartesian'](_0x17110d['_editPoint']['position']);_0x2b116c['x']=0.1;var _0x57650d=new Cesium['Ray'](_0x2b116c,Cesium['Cartesian3']['UNIT_X']),_0x1698ec=Cesium['IntersectionTests']['rayPlane'](_0x57650d,_0x1aa63e);Cesium['defined'](_0x1698ec)&&(_0x4cfde5=Cesium['Transforms']['convertTo3DCartesian'](_0x1698ec));}else{var _0x1aa63e=Cesium['Plane']['fromPointNormal'](_0x17110d['scene']['camera']['position'],_0x3f2484),_0x57650d=new Cesium['Ray'](Cesium['Cartesian3']['ZERO'],_0x17110d['_editPoint']['position']);_0x4cfde5=Cesium['IntersectionTests']['rayPlane'](_0x57650d,_0x1aa63e);}}else{var _0x57650d=_0x17110d['scene']['camera']['getPickRay'](_0x3051ea);if(_0x17110d['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x101ab7=Cesium['Transforms']['convertToColumbusCartesian'](_0x17110d['_editPoint']['position']),_0xe905af=Cesium['Plane']['fromPointNormal'](_0x101ab7,Cesium['Cartesian3']['UNIT_X']),_0x1698ec=Cesium['IntersectionTests']['rayPlane'](_0x57650d,_0xe905af);_0x4cfde5=Cesium['Transforms']['convertTo3DCartesian'](_0x1698ec);}else{var _0x329810=new Cesium['BoundingSphere'](Cesium['Cartesian3']['ZERO'],Cesium['Cartesian3']['distance'](_0x17110d['_editPoint']['position'],Cesium['Cartesian3']['ZERO'])),_0x4458cf=Cesium['IntersectionTests']['raySphere'](_0x57650d,_0x329810);_0x4cfde5=Cesium['Ray']['getPoint'](_0x57650d,_0x4458cf['start']);}}}if(!Cesium['defined'](_0x4cfde5))return;;_0x17110d['_editPoint']['position']=_0x4cfde5;var _0x1d45f5=_0x17110d['_positions'];_0x1d45f5[_0x17110d['_editPointIndex']]=_0x4cfde5,Cesium['defined'](_0x3a68c3)&&(_0x3a68c3['positions']=new Cesium['CallbackProperty'](function(){return _0x1d45f5;},![])),Cesium['defined'](_0x53f855)&&(_0x53f855['hierarchy']=new Cesium['CallbackProperty'](function(){return{'positions':_0x1d45f5,'holes':[]};},![])),_0x17110d['refreshReferenceAddPoint']();}}};function _0x47f8db(_0x464e11,_0x34b538){var _0x1f627f=_0x34b538;if(_0x1f627f&&_0x1f627f['active']){var _0x3b46d3=_0x131c9e(_0x1f627f['scene'],_0x464e11);if(Cesium['defined'](_0x3b46d3)){var _0x370851=_0x3b46d3['id'];if(!Cesium['defined'](_0x370851))return;var _0x5a54fd=[];typeof _0x370851==='string'&&(_0x5a54fd=_0x370851['split']('_'));if(_0x5a54fd['length']==0x2){if(_0x5a54fd[0x0]===_0x5a5dfb){var _0x11a68d=parseInt(_0x5a54fd[0x1]),_0x284677=_0x1f627f['_addPositions'],_0x3c7848=_0x284677[_0x11a68d],_0x3646f0=_0x1f627f['_positions'];_0x3646f0['splice'](_0x11a68d+0x1,0x0,_0x3c7848);var _0x115c47=_0x1f627f['_polyline'];Cesium['defined'](_0x115c47)&&(_0x115c47['positions']=new Cesium['CallbackProperty'](function(){return _0x3646f0;},![]));var _0x3170cd=_0x1f627f['_polygon'];if(Cesium['defined'](_0x3170cd)){var _0x14a2ce=new Cesium['CallbackProperty'](function(){return _0x3646f0;},![]),_0x3646f0=_0x3170cd['hierarchy']['getValue'](0x0);!Array['isArray'](_0x3646f0)?_0x3170cd['hierarchy']['positions']=_0x14a2ce:_0x3170cd['hierarchy']=_0x14a2ce;}_0x1f627f['refreshReferencePoint'](),_0x1f627f['refreshReferenceAddPoint']();}}}}};function _0x2fa4b4(_0x4edf4f,_0x17f7aa){var _0xf254ce=_0x17f7aa;if(_0xf254ce&&_0xf254ce['active']){var _0x1543f6=_0x131c9e(_0xf254ce['scene'],_0x4edf4f);if(Cesium['defined'](_0x1543f6)){var _0x264f4f=_0x1543f6['id'];if(!Cesium['defined'](_0x264f4f))return;var _0x2383e3=[];typeof _0x264f4f==='string'&&(_0x2383e3=_0x264f4f['split']('_'));if(_0x2383e3['length']==0x2){if(_0x2383e3[0x0]===_0x19a7c9){var _0x5aca85=parseInt(_0x2383e3[0x1]),_0x50e81e=_0xf254ce['_positions'];_0x50e81e['splice'](_0x5aca85,0x1);var _0x4f1ea6=_0xf254ce['_polyline'];Cesium['defined'](_0x4f1ea6)&&(_0x4f1ea6['positions']=new Cesium['CallbackProperty'](function(){return _0x50e81e;},![]));var _0x42ab0d=_0xf254ce['_polygon'];Cesium['defined'](_0x42ab0d)&&(_0x42ab0d['hierarchy']=new Cesium['CallbackProperty'](function(){return _0x50e81e;},![])),_0xf254ce['refreshReferencePoint'](),_0xf254ce['refreshReferenceAddPoint']();}}}}}export default _0x764bba;