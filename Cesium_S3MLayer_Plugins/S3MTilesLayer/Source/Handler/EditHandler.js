var _0x293d74=(function(){var _0x308af0=!![];return function(_0x5d460c,_0x137967){var _0x957d6e=_0x308af0?function(){if(_0x137967){var _0x5e7937=_0x137967['apply'](_0x5d460c,arguments);return _0x137967=null,_0x5e7937;}}:function(){};return _0x308af0=![],_0x957d6e;};}()),_0x31a25d=_0x293d74(this,function(){return _0x31a25d['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x31a25d)['search']('(((.+)+)+)+$');});_0x31a25d();import _0x2ffdcf from'../Ext/buildModuleUrl.js';var _0x1873fc='referencePoint',_0x2e393f='referenceAddPoint',_0xcf72=function(_0x461e2c,_0x1a4535){if(!Cesium['defined'](_0x461e2c)||!Cesium['defined'](_0x1a4535))throw new Cesium['DeveloperError']('scene\x20and\x20mode\x20is\x20required!');this['handler']=new Cesium['ScreenSpaceEventHandler'](_0x461e2c['canvas']),this['scene']=_0x461e2c,this['active']=![],this['referencePointColor']=Cesium['Color']['WHITE'],this['editPointColor']=Cesium['Color']['VIOLET'],this['setEditObject'](_0x1a4535),this['_editZ']=![],this['_changedEvt']=new Cesium['Event']();};Object['defineProperties'](_0xcf72['prototype'],{'isEditZ':{'get':function(){return this['_editZ'];},'set':function(_0x384239){this['_editZ']=_0x384239;}},'changedEvt':{'get':function(){return this['_changedEvt'];}}}),_0xcf72['prototype']['setEditObject']=function(_0x554f07){if(!Cesium['defined'](_0x554f07['_polygon'])&&!Cesium['defined'](_0x554f07['_polyline']))return;this['clear'](),this['_editObject']=_0x554f07,this['_polygon']=_0x554f07['_polygon'];if(Cesium['defined'](this['_polygon'])){var _0x40b2ca=this['_polygon']['hierarchy']['getValue'](0x0);if(!Array['isArray'](_0x40b2ca)){if(Array['isArray'](_0x40b2ca['positions']))_0x40b2ca=_0x40b2ca['positions'];else throw new Cesium['DeveloperError']('positions\x20is\x20required!');}this['_positions']=_0x40b2ca;}this['_polyline']=_0x554f07['_polyline'];Cesium['defined'](this['_polyline'])&&(this['_positions']=this['_polyline']['positions']['getValue'](0x0));this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x50d30d=0x0;_0x50d30d<this['_positions']['length'];_0x50d30d++){this['_editPoints']['add']({'id':_0x1873fc+'_'+_0x50d30d,'position':this['_positions'][_0x50d30d],'image':_0x2ffdcf('Assets/Textures/vertex-edit.png')});}this['_editPointIndex']=-0x1,this['_editPoint']=undefined,this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x50d30d=0x0;_0x50d30d<this['_positions']['length']-0x1;_0x50d30d++){var _0x1f295c=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x50d30d],this['_positions'][_0x50d30d+0x1],_0x1f295c),Cesium['Cartesian3']['multiplyByScalar'](_0x1f295c,0.5,_0x1f295c),this['_addPositions']['push'](_0x1f295c);}if(Cesium['defined'](this['_polygon'])){var _0x1f295c=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x1f295c),Cesium['Cartesian3']['multiplyByScalar'](_0x1f295c,0.5,_0x1f295c),this['_addPositions']['push'](_0x1f295c);}for(var _0x50d30d=0x0;_0x50d30d<this['_addPositions']['length'];_0x50d30d++){this['_addPoints']['add']({'id':_0x2e393f+'_'+_0x50d30d,'position':this['_addPositions'][_0x50d30d],'image':_0x2ffdcf('Assets/Textures/middle-edit.png')});}this['activate']();},_0xcf72['prototype']['activate']=function(){if(this['active']==!![])return;this['active']=!![];var _0x106d68=this;this['handler']['setInputAction'](function(_0x5a0b97){_0x566af2(_0x5a0b97,_0x106d68);},Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['setInputAction'](function(_0x149dd9){_0x299b93(_0x149dd9,_0x106d68);},Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['setInputAction'](function(_0x252aba){_0x250862(_0x252aba,_0x106d68);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['setInputAction'](function(_0x43de51){_0x512762(_0x43de51,_0x106d68);},Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0xcf72['prototype']['deactivate']=function(){this['active']=![],this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0xcf72['prototype']['clear']=function(){this['deactivate'](),Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll'](),Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined),Cesium['defined'](this['_editObject'])&&(this['_editObject']=undefined),Cesium['defined'](this['_polygon'])&&(this['_polygon']=undefined),Cesium['defined'](this['_polyline'])&&(this['_polyline']=undefined),Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll'](),Cesium['defined'](this['_addPositions'])&&(this['_addPositions']['length']=0x0),Cesium['defined'](this['_positions'])&&(this['_positions']=undefined);},_0xcf72['prototype']['refreshReferencePoint']=function(){Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll']();this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x5f2eac=0x0;_0x5f2eac<this['_positions']['length'];_0x5f2eac++){this['_editPoints']['add']({'id':_0x1873fc+'_'+_0x5f2eac,'position':this['_positions'][_0x5f2eac],'image':_0x2ffdcf('Assets/Textures/vertex-edit.png')});}Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined);},_0xcf72['prototype']['refreshReferenceAddPoint']=function(){Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll']();this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x41ddcf=0x0;_0x41ddcf<this['_positions']['length']-0x1;_0x41ddcf++){var _0x5a4801=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x41ddcf],this['_positions'][_0x41ddcf+0x1],_0x5a4801),Cesium['Cartesian3']['multiplyByScalar'](_0x5a4801,0.5,_0x5a4801),this['_addPositions']['push'](_0x5a4801);}if(Cesium['defined'](this['_polygon'])){var _0x5a4801=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x5a4801),Cesium['Cartesian3']['multiplyByScalar'](_0x5a4801,0.5,_0x5a4801),this['_addPositions']['push'](_0x5a4801);}for(var _0x41ddcf=0x0;_0x41ddcf<this['_addPositions']['length'];_0x41ddcf++){this['_addPoints']['add']({'position':this['_addPositions'][_0x41ddcf],'id':_0x2e393f+'_'+_0x41ddcf,'image':_0x2ffdcf('Assets/Textures/middle-edit.png')});}};function _0x2b616b(_0xf1f13b,_0x422fc5){var _0x3a9829=_0xf1f13b['pick'](_0x422fc5['position']);if(Cesium['defined'](_0x3a9829)){var _0x447749=Cesium['defaultValue'](_0x3a9829['id'],_0x3a9829['primitive']['id']);if(Cesium['defined'](_0x3a9829['primitive']))return _0x3a9829;}}function _0x566af2(_0x3d6afa,_0x47f37a){var _0x571469=_0x47f37a;if(_0x571469&&_0x571469['active']){var _0x569597=_0x2b616b(_0x571469['scene'],_0x3d6afa);if(Cesium['defined'](_0x569597)){var _0x24d667=_0x569597['id'];if(!Cesium['defined'](_0x24d667))return;var _0x5b0349=[];typeof _0x24d667==='string'&&(_0x5b0349=_0x24d667['split']('_'));if(_0x5b0349['length']==0x2){if(_0x5b0349[0x0]===_0x1873fc)_0x571469['_editPointIndex']=parseInt(_0x5b0349[0x1]),_0x571469['_editPoint']=_0x569597['primitive'],_0x571469['_editPoint']['Color']=_0x571469['editPointColor'],_0x571469['scene']['_screenSpaceCameraController']['enableRotate']=![],_0x571469['scene']['_screenSpaceCameraController']['enableTranslate']=![];else{if(_0x5b0349[0x0]===_0x2e393f){var _0x8329ab=parseInt(_0x5b0349[0x1]),_0x1d58c5=_0x571469['_addPositions'],_0xe42348=_0x1d58c5[_0x8329ab],_0x42f355=_0x571469['_positions'];_0x42f355['splice'](_0x8329ab+0x1,0x0,_0xe42348);var _0x4c4184=_0x571469['_polyline'];Cesium['defined'](_0x4c4184)&&(_0x4c4184['positions']=new Cesium['CallbackProperty'](function(){return _0x42f355;},![]));var _0x340ce2=_0x571469['_polygon'];if(Cesium['defined'](_0x340ce2)){var _0x2976c8=new Cesium['CallbackProperty'](function(){return _0x42f355;},![]),_0x42f355=_0x340ce2['hierarchy']['getValue'](0x0);!Array['isArray'](_0x42f355)?_0x340ce2['hierarchy']['positions']=_0x2976c8:_0x340ce2['hierarchy']=_0x2976c8;}_0x571469['refreshReferencePoint'](),_0x571469['refreshReferenceAddPoint']();}}}}else _0x47f37a['clear']();}}function _0x299b93(_0x1c9e9d,_0x167c4e){var _0x4e6f2e=_0x167c4e;_0x4e6f2e&&_0x4e6f2e['active']&&(_0x4e6f2e['_editPointIndex']=-0x1,Cesium['defined'](_0x4e6f2e['_editPoint'])&&(_0x4e6f2e['_editPoint']['Color']=_0x4e6f2e['referencePointColor'],_0x4e6f2e['_editPoint']=undefined),_0x4e6f2e['scene']['_screenSpaceCameraController']['enableRotate']=!![],_0x4e6f2e['scene']['_screenSpaceCameraController']['enableTranslate']=!![],_0x4e6f2e['_changedEvt']['raiseEvent'](_0x4e6f2e['_positions']));}function _0x250862(_0x20db98,_0x244397){var _0x5c6f8a=_0x244397;if(_0x5c6f8a&&_0x5c6f8a['active']&&_0x5c6f8a['_editPointIndex']>-0x1){if(_0x5c6f8a['scene']['_screenSpaceCameraController']['_aggregator']['_isDown'][0x0]){var _0x5b5566=new Cesium['Cartesian2'](_0x20db98['endPosition']['x'],_0x20db98['endPosition']['y']),_0x34e22a=_0x5c6f8a['_polyline'],_0x22731b=_0x5c6f8a['_polygon'],_0xb0f745=!![];Cesium['defined'](_0x34e22a)&&(_0xb0f745=_0x34e22a['clampToGround']);Cesium['defined'](_0x22731b)&&(_0xb0f745=!_0x22731b['perPositionHeight']);var _0x3fa3fc;if(Cesium['defined'](_0xb0f745)&&_0xb0f745['_value'])_0x3fa3fc=_0x5c6f8a['scene']['pickPosition'](_0x5b5566);else{if(_0x5c6f8a['_editZ']){var _0x3ed55b=_0x5c6f8a['scene']['camera']['getPickRay'](_0x5b5566),_0x408279=_0x5c6f8a['scene']['camera']['getPickRay'](new Cesium['Cartesian2'](_0x5b5566['x']+0x5,_0x5b5566['y'])),_0x19e2fc=Cesium['Cartesian3']['cross'](_0x3ed55b['direction'],_0x408279['direction'],new Cesium['Cartesian3']()),_0x2467a4=Cesium['Cartesian3']['normalize'](_0x19e2fc,new Cesium['Cartesian3']());if(_0x5c6f8a['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x2f6fd6=Cesium['Plane']['fromPointNormal'](_0x5c6f8a['scene']['camera']['positionWC'],_0x2467a4),_0x48931e=Cesium['Transforms']['convertToColumbusCartesian'](_0x5c6f8a['_editPoint']['position']);_0x48931e['x']=0.1;var _0x4a20b7=new Cesium['Ray'](_0x48931e,Cesium['Cartesian3']['UNIT_X']),_0x6896a7=Cesium['IntersectionTests']['rayPlane'](_0x4a20b7,_0x2f6fd6);Cesium['defined'](_0x6896a7)&&(_0x3fa3fc=Cesium['Transforms']['convertTo3DCartesian'](_0x6896a7));}else{var _0x2f6fd6=Cesium['Plane']['fromPointNormal'](_0x5c6f8a['scene']['camera']['position'],_0x2467a4),_0x4a20b7=new Cesium['Ray'](Cesium['Cartesian3']['ZERO'],_0x5c6f8a['_editPoint']['position']);_0x3fa3fc=Cesium['IntersectionTests']['rayPlane'](_0x4a20b7,_0x2f6fd6);}}else{var _0x4a20b7=_0x5c6f8a['scene']['camera']['getPickRay'](_0x5b5566);if(_0x5c6f8a['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x37054f=Cesium['Transforms']['convertToColumbusCartesian'](_0x5c6f8a['_editPoint']['position']),_0xf2ab14=Cesium['Plane']['fromPointNormal'](_0x37054f,Cesium['Cartesian3']['UNIT_X']),_0x6896a7=Cesium['IntersectionTests']['rayPlane'](_0x4a20b7,_0xf2ab14);_0x3fa3fc=Cesium['Transforms']['convertTo3DCartesian'](_0x6896a7);}else{var _0x303d5d=new Cesium['BoundingSphere'](Cesium['Cartesian3']['ZERO'],Cesium['Cartesian3']['distance'](_0x5c6f8a['_editPoint']['position'],Cesium['Cartesian3']['ZERO'])),_0x294753=Cesium['IntersectionTests']['raySphere'](_0x4a20b7,_0x303d5d);_0x3fa3fc=Cesium['Ray']['getPoint'](_0x4a20b7,_0x294753['start']);}}}if(!Cesium['defined'](_0x3fa3fc))return;;_0x5c6f8a['_editPoint']['position']=_0x3fa3fc;var _0x693f4c=_0x5c6f8a['_positions'];_0x693f4c[_0x5c6f8a['_editPointIndex']]=_0x3fa3fc,Cesium['defined'](_0x34e22a)&&(_0x34e22a['positions']=new Cesium['CallbackProperty'](function(){return _0x693f4c;},![])),Cesium['defined'](_0x22731b)&&(_0x22731b['hierarchy']=new Cesium['CallbackProperty'](function(){return{'positions':_0x693f4c,'holes':[]};},![])),_0x5c6f8a['refreshReferenceAddPoint']();}}};function _0x5c54fc(_0x60b00e,_0x1402d4){var _0x4effcb=_0x1402d4;if(_0x4effcb&&_0x4effcb['active']){var _0x3d4665=_0x2b616b(_0x4effcb['scene'],_0x60b00e);if(Cesium['defined'](_0x3d4665)){var _0x266721=_0x3d4665['id'];if(!Cesium['defined'](_0x266721))return;var _0x24db3c=[];typeof _0x266721==='string'&&(_0x24db3c=_0x266721['split']('_'));if(_0x24db3c['length']==0x2){if(_0x24db3c[0x0]===_0x2e393f){var _0x1e9a71=parseInt(_0x24db3c[0x1]),_0x4cc530=_0x4effcb['_addPositions'],_0x34fd05=_0x4cc530[_0x1e9a71],_0x23edca=_0x4effcb['_positions'];_0x23edca['splice'](_0x1e9a71+0x1,0x0,_0x34fd05);var _0x5e8f45=_0x4effcb['_polyline'];Cesium['defined'](_0x5e8f45)&&(_0x5e8f45['positions']=new Cesium['CallbackProperty'](function(){return _0x23edca;},![]));var _0x553bcb=_0x4effcb['_polygon'];if(Cesium['defined'](_0x553bcb)){var _0x1e5038=new Cesium['CallbackProperty'](function(){return _0x23edca;},![]),_0x23edca=_0x553bcb['hierarchy']['getValue'](0x0);!Array['isArray'](_0x23edca)?_0x553bcb['hierarchy']['positions']=_0x1e5038:_0x553bcb['hierarchy']=_0x1e5038;}_0x4effcb['refreshReferencePoint'](),_0x4effcb['refreshReferenceAddPoint']();}}}}};function _0x512762(_0x55523d,_0x50c965){var _0x2533ed=_0x50c965;if(_0x2533ed&&_0x2533ed['active']){var _0x25a73e=_0x2b616b(_0x2533ed['scene'],_0x55523d);if(Cesium['defined'](_0x25a73e)){var _0x1d23ba=_0x25a73e['id'];if(!Cesium['defined'](_0x1d23ba))return;var _0x2bc9cb=[];typeof _0x1d23ba==='string'&&(_0x2bc9cb=_0x1d23ba['split']('_'));if(_0x2bc9cb['length']==0x2){if(_0x2bc9cb[0x0]===_0x1873fc){var _0x154686=parseInt(_0x2bc9cb[0x1]),_0x27b324=_0x2533ed['_positions'];_0x27b324['splice'](_0x154686,0x1);var _0x50c505=_0x2533ed['_polyline'];Cesium['defined'](_0x50c505)&&(_0x50c505['positions']=new Cesium['CallbackProperty'](function(){return _0x27b324;},![]));var _0x39021d=_0x2533ed['_polygon'];Cesium['defined'](_0x39021d)&&(_0x39021d['hierarchy']=new Cesium['CallbackProperty'](function(){return _0x27b324;},![])),_0x2533ed['refreshReferencePoint'](),_0x2533ed['refreshReferenceAddPoint']();}}}}}export default _0xcf72;