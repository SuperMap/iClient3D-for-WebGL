var _0x51541f=(function(){var _0x21eafc=!![];return function(_0x548069,_0x2282d2){var _0x4e9763=_0x21eafc?function(){if(_0x2282d2){var _0x640a50=_0x2282d2['apply'](_0x548069,arguments);return _0x2282d2=null,_0x640a50;}}:function(){};return _0x21eafc=![],_0x4e9763;};}()),_0x44f261=_0x51541f(this,function(){return _0x44f261['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x44f261)['search']('(((.+)+)+)+$');});_0x44f261();import _0x234757 from'../Ext/buildModuleUrl.js';var _0x1d9c07='referencePoint',_0x402dac='referenceAddPoint',_0x531def=function(_0x46a467,_0x461fab){if(!Cesium['defined'](_0x46a467)||!Cesium['defined'](_0x461fab))throw new Cesium['DeveloperError']('scene\x20and\x20mode\x20is\x20required!');this['handler']=new Cesium['ScreenSpaceEventHandler'](_0x46a467['canvas']),this['scene']=_0x46a467,this['active']=![],this['referencePointColor']=Cesium['Color']['WHITE'],this['editPointColor']=Cesium['Color']['VIOLET'],this['setEditObject'](_0x461fab),this['_editZ']=![],this['_changedEvt']=new Cesium['Event']();};Object['defineProperties'](_0x531def['prototype'],{'isEditZ':{'get':function(){return this['_editZ'];},'set':function(_0x1f6817){this['_editZ']=_0x1f6817;}},'changedEvt':{'get':function(){return this['_changedEvt'];}}}),_0x531def['prototype']['setEditObject']=function(_0x17067c){if(!Cesium['defined'](_0x17067c['_polygon'])&&!Cesium['defined'](_0x17067c['_polyline']))return;this['clear'](),this['_editObject']=_0x17067c,this['_polygon']=_0x17067c['_polygon'];if(Cesium['defined'](this['_polygon'])){var _0x313c5f=this['_polygon']['hierarchy']['getValue'](0x0);if(!Array['isArray'](_0x313c5f)){if(Array['isArray'](_0x313c5f['positions']))_0x313c5f=_0x313c5f['positions'];else throw new Cesium['DeveloperError']('positions\x20is\x20required!');}this['_positions']=_0x313c5f;}this['_polyline']=_0x17067c['_polyline'];Cesium['defined'](this['_polyline'])&&(this['_positions']=this['_polyline']['positions']['getValue'](0x0));this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x552f5f=0x0;_0x552f5f<this['_positions']['length'];_0x552f5f++){this['_editPoints']['add']({'id':_0x1d9c07+'_'+_0x552f5f,'position':this['_positions'][_0x552f5f],'image':_0x234757('Assets/Textures/vertex-edit.png')});}this['_editPointIndex']=-0x1,this['_editPoint']=undefined,this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x552f5f=0x0;_0x552f5f<this['_positions']['length']-0x1;_0x552f5f++){var _0x3eac1d=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x552f5f],this['_positions'][_0x552f5f+0x1],_0x3eac1d),Cesium['Cartesian3']['multiplyByScalar'](_0x3eac1d,0.5,_0x3eac1d),this['_addPositions']['push'](_0x3eac1d);}if(Cesium['defined'](this['_polygon'])){var _0x3eac1d=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x3eac1d),Cesium['Cartesian3']['multiplyByScalar'](_0x3eac1d,0.5,_0x3eac1d),this['_addPositions']['push'](_0x3eac1d);}for(var _0x552f5f=0x0;_0x552f5f<this['_addPositions']['length'];_0x552f5f++){this['_addPoints']['add']({'id':_0x402dac+'_'+_0x552f5f,'position':this['_addPositions'][_0x552f5f],'image':_0x234757('Assets/Textures/middle-edit.png')});}this['activate']();},_0x531def['prototype']['activate']=function(){if(this['active']==!![])return;this['active']=!![];var _0x2d2311=this;this['handler']['setInputAction'](function(_0x43d04b){_0x14ddfd(_0x43d04b,_0x2d2311);},Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['setInputAction'](function(_0x5f2493){_0x4a6c72(_0x5f2493,_0x2d2311);},Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['setInputAction'](function(_0x692153){_0x45069f(_0x692153,_0x2d2311);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['setInputAction'](function(_0x4ccdff){_0x5dbe9b(_0x4ccdff,_0x2d2311);},Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0x531def['prototype']['deactivate']=function(){this['active']=![],this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_DOWN']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_UP']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']);},_0x531def['prototype']['clear']=function(){this['deactivate'](),Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll'](),Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined),Cesium['defined'](this['_editObject'])&&(this['_editObject']=undefined),Cesium['defined'](this['_polygon'])&&(this['_polygon']=undefined),Cesium['defined'](this['_polyline'])&&(this['_polyline']=undefined),Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll'](),Cesium['defined'](this['_addPositions'])&&(this['_addPositions']['length']=0x0),Cesium['defined'](this['_positions'])&&(this['_positions']=undefined);},_0x531def['prototype']['refreshReferencePoint']=function(){Cesium['defined'](this['_editPoints'])&&this['_editPoints']['removeAll']();this['_editPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x4b7852=0x0;_0x4b7852<this['_positions']['length'];_0x4b7852++){this['_editPoints']['add']({'id':_0x1d9c07+'_'+_0x4b7852,'position':this['_positions'][_0x4b7852],'image':_0x234757('Assets/Textures/vertex-edit.png')});}Cesium['defined'](this['_editPointIndex'])&&(this['_editPointIndex']=-0x1),Cesium['defined'](this['_editPoint'])&&(this['_editPoint']=undefined);},_0x531def['prototype']['refreshReferenceAddPoint']=function(){Cesium['defined'](this['_addPoints'])&&this['_addPoints']['removeAll']();this['_addPositions']=[],this['_addPoints']=this['scene']['primitives']['add'](new Cesium['BillboardCollection']({'depthTestEnable':![]}));for(var _0x1e114d=0x0;_0x1e114d<this['_positions']['length']-0x1;_0x1e114d++){var _0x178bb1=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][_0x1e114d],this['_positions'][_0x1e114d+0x1],_0x178bb1),Cesium['Cartesian3']['multiplyByScalar'](_0x178bb1,0.5,_0x178bb1),this['_addPositions']['push'](_0x178bb1);}if(Cesium['defined'](this['_polygon'])){var _0x178bb1=new Cesium['Cartesian3']();Cesium['Cartesian3']['add'](this['_positions'][0x0],this['_positions'][this['_positions']['length']-0x1],_0x178bb1),Cesium['Cartesian3']['multiplyByScalar'](_0x178bb1,0.5,_0x178bb1),this['_addPositions']['push'](_0x178bb1);}for(var _0x1e114d=0x0;_0x1e114d<this['_addPositions']['length'];_0x1e114d++){this['_addPoints']['add']({'position':this['_addPositions'][_0x1e114d],'id':_0x402dac+'_'+_0x1e114d,'image':_0x234757('Assets/Textures/middle-edit.png')});}};function _0x4a20f7(_0x21b278,_0x4472af){var _0x54d1c9=_0x21b278['pick'](_0x4472af['position']);if(Cesium['defined'](_0x54d1c9)){var _0x20a5a6=Cesium['defaultValue'](_0x54d1c9['id'],_0x54d1c9['primitive']['id']);if(Cesium['defined'](_0x54d1c9['primitive']))return _0x54d1c9;}}function _0x14ddfd(_0x2471f5,_0x53b591){var _0x3523ac=_0x53b591;if(_0x3523ac&&_0x3523ac['active']){var _0x22f3dc=_0x4a20f7(_0x3523ac['scene'],_0x2471f5);if(Cesium['defined'](_0x22f3dc)){var _0x3eea78=_0x22f3dc['id'];if(!Cesium['defined'](_0x3eea78))return;var _0x23c78b=[];typeof _0x3eea78==='string'&&(_0x23c78b=_0x3eea78['split']('_'));if(_0x23c78b['length']==0x2){if(_0x23c78b[0x0]===_0x1d9c07)_0x3523ac['_editPointIndex']=parseInt(_0x23c78b[0x1]),_0x3523ac['_editPoint']=_0x22f3dc['primitive'],_0x3523ac['_editPoint']['Color']=_0x3523ac['editPointColor'],_0x3523ac['scene']['_screenSpaceCameraController']['enableRotate']=![],_0x3523ac['scene']['_screenSpaceCameraController']['enableTranslate']=![];else{if(_0x23c78b[0x0]===_0x402dac){var _0x2918f0=parseInt(_0x23c78b[0x1]),_0x4984bf=_0x3523ac['_addPositions'],_0x148299=_0x4984bf[_0x2918f0],_0x87326f=_0x3523ac['_positions'];_0x87326f['splice'](_0x2918f0+0x1,0x0,_0x148299);var _0x4d163e=_0x3523ac['_polyline'];Cesium['defined'](_0x4d163e)&&(_0x4d163e['positions']=new Cesium['CallbackProperty'](function(){return _0x87326f;},![]));var _0x38f58f=_0x3523ac['_polygon'];if(Cesium['defined'](_0x38f58f)){var _0x4130b4=new Cesium['CallbackProperty'](function(){return _0x87326f;},![]),_0x87326f=_0x38f58f['hierarchy']['getValue'](0x0);!Array['isArray'](_0x87326f)?_0x38f58f['hierarchy']['positions']=_0x4130b4:_0x38f58f['hierarchy']=_0x4130b4;}_0x3523ac['refreshReferencePoint'](),_0x3523ac['refreshReferenceAddPoint']();}}}}else _0x53b591['clear']();}}function _0x4a6c72(_0x38dde4,_0x139023){var _0x183fb6=_0x139023;_0x183fb6&&_0x183fb6['active']&&(_0x183fb6['_editPointIndex']=-0x1,Cesium['defined'](_0x183fb6['_editPoint'])&&(_0x183fb6['_editPoint']['Color']=_0x183fb6['referencePointColor'],_0x183fb6['_editPoint']=undefined),_0x183fb6['scene']['_screenSpaceCameraController']['enableRotate']=!![],_0x183fb6['scene']['_screenSpaceCameraController']['enableTranslate']=!![],_0x183fb6['_changedEvt']['raiseEvent'](_0x183fb6['_positions']));}function _0x45069f(_0x48caf2,_0x220028){var _0x537219=_0x220028;if(_0x537219&&_0x537219['active']&&_0x537219['_editPointIndex']>-0x1){if(_0x537219['scene']['_screenSpaceCameraController']['_aggregator']['_isDown'][0x0]){var _0x238d13=new Cesium['Cartesian2'](_0x48caf2['endPosition']['x'],_0x48caf2['endPosition']['y']),_0x2ec83b=_0x537219['_polyline'],_0x28850b=_0x537219['_polygon'],_0x2ae628=!![];Cesium['defined'](_0x2ec83b)&&(_0x2ae628=_0x2ec83b['clampToGround']);Cesium['defined'](_0x28850b)&&(_0x2ae628=!_0x28850b['perPositionHeight']);var _0x23dfb7;if(Cesium['defined'](_0x2ae628)&&_0x2ae628['_value'])_0x23dfb7=_0x537219['scene']['pickPosition'](_0x238d13);else{if(_0x537219['_editZ']){var _0x1019a9=_0x537219['scene']['camera']['getPickRay'](_0x238d13),_0x4e9075=_0x537219['scene']['camera']['getPickRay'](new Cesium['Cartesian2'](_0x238d13['x']+0x5,_0x238d13['y'])),_0x5eea41=Cesium['Cartesian3']['cross'](_0x1019a9['direction'],_0x4e9075['direction'],new Cesium['Cartesian3']()),_0x28d247=Cesium['Cartesian3']['normalize'](_0x5eea41,new Cesium['Cartesian3']());if(_0x537219['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x1df5b0=Cesium['Plane']['fromPointNormal'](_0x537219['scene']['camera']['positionWC'],_0x28d247),_0x34a3cb=Cesium['Transforms']['convertToColumbusCartesian'](_0x537219['_editPoint']['position']);_0x34a3cb['x']=0.1;var _0x137b9f=new Cesium['Ray'](_0x34a3cb,Cesium['Cartesian3']['UNIT_X']),_0x204d67=Cesium['IntersectionTests']['rayPlane'](_0x137b9f,_0x1df5b0);Cesium['defined'](_0x204d67)&&(_0x23dfb7=Cesium['Transforms']['convertTo3DCartesian'](_0x204d67));}else{var _0x1df5b0=Cesium['Plane']['fromPointNormal'](_0x537219['scene']['camera']['position'],_0x28d247),_0x137b9f=new Cesium['Ray'](Cesium['Cartesian3']['ZERO'],_0x537219['_editPoint']['position']);_0x23dfb7=Cesium['IntersectionTests']['rayPlane'](_0x137b9f,_0x1df5b0);}}else{var _0x137b9f=_0x537219['scene']['camera']['getPickRay'](_0x238d13);if(_0x537219['scene']['mode']===Cesium['SceneMode']['COLUMBUS_VIEW']){var _0x1c791d=Cesium['Transforms']['convertToColumbusCartesian'](_0x537219['_editPoint']['position']),_0xdaed1f=Cesium['Plane']['fromPointNormal'](_0x1c791d,Cesium['Cartesian3']['UNIT_X']),_0x204d67=Cesium['IntersectionTests']['rayPlane'](_0x137b9f,_0xdaed1f);_0x23dfb7=Cesium['Transforms']['convertTo3DCartesian'](_0x204d67);}else{var _0x370d9d=new Cesium['BoundingSphere'](Cesium['Cartesian3']['ZERO'],Cesium['Cartesian3']['distance'](_0x537219['_editPoint']['position'],Cesium['Cartesian3']['ZERO'])),_0xd0299d=Cesium['IntersectionTests']['raySphere'](_0x137b9f,_0x370d9d);_0x23dfb7=Cesium['Ray']['getPoint'](_0x137b9f,_0xd0299d['start']);}}}if(!Cesium['defined'](_0x23dfb7))return;;_0x537219['_editPoint']['position']=_0x23dfb7;var _0x15c2bd=_0x537219['_positions'];_0x15c2bd[_0x537219['_editPointIndex']]=_0x23dfb7,Cesium['defined'](_0x2ec83b)&&(_0x2ec83b['positions']=new Cesium['CallbackProperty'](function(){return _0x15c2bd;},![])),Cesium['defined'](_0x28850b)&&(_0x28850b['hierarchy']=new Cesium['CallbackProperty'](function(){return{'positions':_0x15c2bd,'holes':[]};},![])),_0x537219['refreshReferenceAddPoint']();}}};function _0x33a587(_0x1e7997,_0x118637){var _0x4971a7=_0x118637;if(_0x4971a7&&_0x4971a7['active']){var _0x336056=_0x4a20f7(_0x4971a7['scene'],_0x1e7997);if(Cesium['defined'](_0x336056)){var _0x5837b8=_0x336056['id'];if(!Cesium['defined'](_0x5837b8))return;var _0x2862aa=[];typeof _0x5837b8==='string'&&(_0x2862aa=_0x5837b8['split']('_'));if(_0x2862aa['length']==0x2){if(_0x2862aa[0x0]===_0x402dac){var _0x5677f8=parseInt(_0x2862aa[0x1]),_0x3aa624=_0x4971a7['_addPositions'],_0x58f4f9=_0x3aa624[_0x5677f8],_0xe28462=_0x4971a7['_positions'];_0xe28462['splice'](_0x5677f8+0x1,0x0,_0x58f4f9);var _0x255e79=_0x4971a7['_polyline'];Cesium['defined'](_0x255e79)&&(_0x255e79['positions']=new Cesium['CallbackProperty'](function(){return _0xe28462;},![]));var _0x51895d=_0x4971a7['_polygon'];if(Cesium['defined'](_0x51895d)){var _0x3f3a7=new Cesium['CallbackProperty'](function(){return _0xe28462;},![]),_0xe28462=_0x51895d['hierarchy']['getValue'](0x0);!Array['isArray'](_0xe28462)?_0x51895d['hierarchy']['positions']=_0x3f3a7:_0x51895d['hierarchy']=_0x3f3a7;}_0x4971a7['refreshReferencePoint'](),_0x4971a7['refreshReferenceAddPoint']();}}}}};function _0x5dbe9b(_0x42df28,_0x1cff32){var _0x1d3afd=_0x1cff32;if(_0x1d3afd&&_0x1d3afd['active']){var _0x104e8=_0x4a20f7(_0x1d3afd['scene'],_0x42df28);if(Cesium['defined'](_0x104e8)){var _0x114c85=_0x104e8['id'];if(!Cesium['defined'](_0x114c85))return;var _0x4ea6d4=[];typeof _0x114c85==='string'&&(_0x4ea6d4=_0x114c85['split']('_'));if(_0x4ea6d4['length']==0x2){if(_0x4ea6d4[0x0]===_0x1d9c07){var _0x1d858e=parseInt(_0x4ea6d4[0x1]),_0x3635b3=_0x1d3afd['_positions'];_0x3635b3['splice'](_0x1d858e,0x1);var _0x2cea20=_0x1d3afd['_polyline'];Cesium['defined'](_0x2cea20)&&(_0x2cea20['positions']=new Cesium['CallbackProperty'](function(){return _0x3635b3;},![]));var _0x36e807=_0x1d3afd['_polygon'];Cesium['defined'](_0x36e807)&&(_0x36e807['hierarchy']=new Cesium['CallbackProperty'](function(){return _0x3635b3;},![])),_0x1d3afd['refreshReferencePoint'](),_0x1d3afd['refreshReferenceAddPoint']();}}}}}export default _0x531def;