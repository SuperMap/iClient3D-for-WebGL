const _0x5a7c9f=(function(){let _0x48759e=!![];return function(_0x363b45,_0x5502c2){const _0x1e1def=_0x48759e?function(){if(_0x5502c2){const _0x3fc414=_0x5502c2['apply'](_0x363b45,arguments);return _0x5502c2=null,_0x3fc414;}}:function(){};return _0x48759e=![],_0x1e1def;};}()),_0x356a60=_0x5a7c9f(this,function(){return _0x356a60['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x356a60)['search']('(((.+)+)+)+$');});_0x356a60();import _0x15dd42 from'./DrawMode.js';import _0x23a827 from'./ClampMode.js';let _0x3571f6=function(_0x47a6a5,_0x2ba2d5,_0x2f4b58){if(!_0x47a6a5||_0x2ba2d5===undefined)throw new Cesium['DeveloperError']('viewer\x20and\x20mode\x20is\x20required!');this['handler']=new Cesium['ScreenSpaceEventHandler'](_0x47a6a5['scene']['canvas']),this['viewer']=_0x47a6a5,this['mode']=_0x2ba2d5,this['_clampMode']=Cesium['defaultValue'](_0x2f4b58,_0x23a827['Space']),this['isDrawing']=![],this['active']=![],this['_drawEvt']=new Cesium['Event'](),this['_activeEvt']=new Cesium['Event'](),this['movingEvt']=new Cesium['Event'](),this['polylines']=undefined,this['polyline']=undefined,this['polygon']=undefined,this['points']=undefined,this['point']=undefined;};Object['defineProperties'](_0x3571f6['prototype'],{'drawEvt':{'get':function(){return this['_drawEvt'];}},'activeEvt':{'get':function(){return this['_activeEvt'];}}}),_0x3571f6['prototype']['activate']=function(){if(this['active']===!![])return;this['active']=!![];let _0x30c676=this;this['handler']['setInputAction'](function(_0x4b3ff3){_0x4884df(_0x4b3ff3,_0x30c676);},Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this['handler']['setInputAction'](function(_0x5ad3d5){_0x353447(_0x5ad3d5,_0x30c676);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['setInputAction'](function(_0x220cbd){_0x3c9b82(_0x220cbd,_0x30c676);},Cesium['ScreenSpaceEventType']['RIGHT_CLICK']),this['activeEvt']['raiseEvent'](!![]);},_0x3571f6['prototype']['deactivate']=function(){this['active']=![],this['isDrawing']=![],this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']),this['activeEvt']['raiseEvent'](![]);},_0x3571f6['prototype']['clear']=function(){this['deactivate'](),this['polylines']&&(this['polylines']['removeAll'](),this['viewer']['scene']['primitives']['remove'](this['polylines']),this['polylines']=undefined),this['polygon']&&(this['viewer']['entities']['remove'](this['polygon']),this['polygon']=undefined),this['points']&&(this['points']['removeAll'](),this['viewer']['scene']['primitives']['remove'](this['points']),this['points']=undefined);};function _0x4884df(_0xf657b3,_0x58d239){let _0x5374cc=_0x58d239;if(_0x5374cc&&_0x5374cc['active']){let _0x5c98e2=_0x5374cc['viewer']['scene'];if(!_0x5c98e2['pickPositionSupported']){console['log']('your\x20browser\x20not\x20supported\x20pickPosition!');return;}let _0x7e5a53=_0x5c98e2['pickPosition'](_0xf657b3['position']);if(_0x7e5a53){if(!_0x5374cc['isDrawing']){_0x5374cc['isDrawing']=!![];switch(_0x5374cc['mode']){case _0x15dd42['Point']:_0x41e66e(_0x7e5a53,_0x5374cc);break;case _0x15dd42['Line']:_0x295292(_0x7e5a53,_0x5374cc);break;case _0x15dd42['Polygon']:_0x44e62f(_0x7e5a53,_0x5374cc);break;default:break;}}else{let _0x727617=new Cesium['Cartesian2'](_0xf657b3['position']['x'],_0xf657b3['position']['y']);switch(_0x5374cc['mode']){case _0x15dd42['Line']:_0x4c30fc(_0x727617,_0x5374cc,!![]);break;case _0x15dd42['Polygon']:_0x36ba1b(_0x727617,_0x5374cc,!![]);break;default:break;}}}}}function _0x41e66e(_0x4d1d9e,_0x29957f){let _0x38aa62=_0x29957f;!_0x38aa62['points']?(_0x38aa62['points']=new Cesium['PointPrimitiveCollection'](),_0x38aa62['point']=_0x38aa62['points']['add']({'position':_0x4d1d9e,'pixelSize':0xa,'color':Cesium['Color']['WHITE']}),_0x38aa62['viewer']['scene']['primitives']['add'](_0x38aa62['points'])):_0x38aa62['point']['position']=_0x4d1d9e,_0x38aa62['deactivate'](),_0x38aa62['drawEvt']['raiseEvent']({'object':_0x38aa62['point']});}function _0x295292(_0x5b4548,_0x4da121){let _0x28d7c5=_0x4da121;!_0x28d7c5['polylines']?(_0x28d7c5['polylines']=new Cesium['PolylineCollection'](),_0x28d7c5['polyline']=_0x28d7c5['polylines']['add']({'width':0x2,'positions':[_0x5b4548,_0x5b4548],'material':Cesium['Material']['fromType'](Cesium['Material']['ColorType'],{'color':Cesium['Color']['fromCssColorString']('#51ff00')})}),_0x28d7c5['viewer']['scene']['primitives']['add'](_0x28d7c5['polylines'])):(_0x28d7c5['polyline']['show']=!![],_0x28d7c5['polyline']['positions']=[_0x5b4548,_0x5b4548]);}function _0x44e62f(_0x369b85,_0x32e306){let _0x4ca259=_0x32e306;!_0x4ca259['polylines']?(_0x4ca259['polylines']=new Cesium['PolylineCollection'](),_0x4ca259['polyline']=_0x4ca259['polylines']['add']({'id':'polyline-'+Math['random'](),'width':0x2,'positions':[_0x369b85,_0x369b85],'material':Cesium['Material']['fromType'](Cesium['Material']['ColorType'],{'color':Cesium['Color']['fromCssColorString']('#51ff00')}),'loop':!![]}),_0x4ca259['viewer']['scene']['primitives']['add'](_0x4ca259['polylines'])):(_0x4ca259['polyline']['show']=!![],_0x4ca259['polyline']['positions']=[_0x369b85,_0x369b85],_0x4ca259['polygon']&&(_0x4ca259['polygon']['show']=![]));}function _0x353447(_0x155c97,_0x406e27){let _0x36d5cd=_0x406e27;if(_0x36d5cd&&_0x36d5cd['active']&&_0x36d5cd['isDrawing']){let _0x29780f=new Cesium['Cartesian2'](_0x155c97['endPosition']['x'],_0x155c97['endPosition']['y']);switch(_0x36d5cd['mode']){case _0x15dd42['Line']:_0x4c30fc(_0x29780f,_0x36d5cd,![]);break;case _0x15dd42['Polygon']:_0x36ba1b(_0x29780f,_0x36d5cd,![]);break;default:break;}}_0x36d5cd['movingEvt']['raiseEvent'](new Cesium['Cartesian2'](_0x155c97['endPosition']['x'],_0x155c97['endPosition']['y']));}function _0x4c30fc(_0x39e549,_0x46a673,_0x21f90b){let _0x7145bf=_0x46a673,_0x569061=_0x7145bf['viewer']['scene'],_0xd953f3=_0x569061['pickPosition'](_0x39e549);if(!_0xd953f3)return;let _0x3933a8=_0x7145bf['polyline']['positions'],_0x27f642=_0x3933a8['length'];_0x21f90b?_0x3933a8[_0x27f642]=_0xd953f3:_0x3933a8[_0x27f642-0x1]=_0xd953f3,_0x7145bf['polyline']['positions']=_0x3933a8;}function _0x36ba1b(_0x5653e5,_0x2cdc94,_0x24c9e2){let _0x7c7807=_0x2cdc94,_0x30802f=_0x7c7807['viewer']['scene'],_0x1ec7e1=_0x30802f['pickPosition'](_0x5653e5);if(!_0x1ec7e1)return;let _0x1168f7=_0x7c7807['polyline']['positions'],_0x22f246=_0x1168f7['length'];_0x24c9e2?_0x1168f7[_0x22f246]=_0x1ec7e1:_0x1168f7[_0x22f246-0x1]=_0x1ec7e1,_0x7c7807['polyline']['positions']=_0x1168f7;}function _0x3c9b82(_0x5d7daa,_0x37e2a4){let _0x460021=_0x37e2a4;if(_0x460021&&_0x460021['active']&&_0x460021['isDrawing']){_0x460021['deactivate']();if(!_0x460021['polyline'])return;_0x460021['polyline']['positions']=_0x460021['polyline']['positions']['slice'](0x0,_0x460021['polyline']['positions']['length']-0x1);if(_0x460021['mode']===_0x15dd42['Polygon']){if(_0x460021['polyline']['positions']['length']<0x3){_0x460021['polyline']['positions']['length']=0x0;return;}let _0x2515c9=[]['concat'](_0x460021['polyline']['positions']);!_0x460021['polygon']&&(_0x460021['polygon']=_0x460021['viewer']['entities']['add']({'polygon':{'hierarchy':{'positions':_0x2515c9},'material':Cesium['Color']['ORANGE']['withAlpha'](0.5),'perPositionHeight':_0x23a827['Space']===_0x460021['_clampMode']}})),_0x460021['polygon']['polygon']['hierarchy']=_0x2515c9,_0x460021['polygon']['positions']=_0x2515c9,_0x460021['polygon']['show']=!![],_0x460021['drawEvt']['raiseEvent']({'object':_0x460021['polygon']});}else{if(_0x460021['mode']===_0x15dd42['Line']){let _0x397150=[];for(let _0x1b121a=0x0,_0x50d16e=_0x460021['polyline']['positions']['length'];_0x1b121a<_0x50d16e;_0x1b121a++){_0x397150['push'](Cesium['Cartesian3']['clone'](_0x460021['polyline']['positions'][_0x1b121a]));}(_0x460021['_clampMode']===_0x23a827['S3mModel']||_0x460021['_clampMode']===_0x23a827['Ground'])&&(!_0x460021['clampToGroundPolylines']&&(_0x460021['clampToGroundPolylines']=[]),_0x460021['clampToGroundPolylines']['push'](_0x460021['viewer']['entities']['add']({'polyline':{'positions':_0x397150,'width':0x5,'material':Cesium['Color']['fromCssColorString']('#51ff00'),'clampToGround':!![]}})),_0x460021['polyline']['show']=![]),_0x460021['drawEvt']['raiseEvent']({'object':_0x460021['polyline']});}}}}export default _0x3571f6;