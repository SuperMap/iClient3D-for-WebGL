const _0x2319b8=(function(){let _0x35ed62=!![];return function(_0x265f24,_0x36502e){const _0x5e63c4=_0x35ed62?function(){if(_0x36502e){const _0x40d698=_0x36502e['apply'](_0x265f24,arguments);return _0x36502e=null,_0x40d698;}}:function(){};return _0x35ed62=![],_0x5e63c4;};}()),_0x13b4a1=_0x2319b8(this,function(){return _0x13b4a1['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x13b4a1)['search']('(((.+)+)+)+$');});_0x13b4a1();import _0xee544b from'./DrawMode.js';import _0x2d201a from'./ClampMode.js';let _0x38ab92=function(_0x2d3e5a,_0x419f1b,_0x9b850){if(!_0x2d3e5a||_0x419f1b===undefined)throw new Cesium['DeveloperError']('viewer\x20and\x20mode\x20is\x20required!');this['handler']=new Cesium['ScreenSpaceEventHandler'](_0x2d3e5a['scene']['canvas']),this['viewer']=_0x2d3e5a,this['mode']=_0x419f1b,this['_clampMode']=Cesium['defaultValue'](_0x9b850,_0x2d201a['Space']),this['isDrawing']=![],this['active']=![],this['_drawEvt']=new Cesium['Event'](),this['_activeEvt']=new Cesium['Event'](),this['movingEvt']=new Cesium['Event'](),this['polylines']=undefined,this['polyline']=undefined,this['polygon']=undefined,this['points']=undefined,this['point']=undefined;};Object['defineProperties'](_0x38ab92['prototype'],{'drawEvt':{'get':function(){return this['_drawEvt'];}},'activeEvt':{'get':function(){return this['_activeEvt'];}}}),_0x38ab92['prototype']['activate']=function(){if(this['active']===!![])return;this['active']=!![];let _0x4768bf=this;this['handler']['setInputAction'](function(_0x56c494){_0x4c35ca(_0x56c494,_0x4768bf);},Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this['handler']['setInputAction'](function(_0x13d840){_0x44e710(_0x13d840,_0x4768bf);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['setInputAction'](function(_0x41db10){_0x5181b1(_0x41db10,_0x4768bf);},Cesium['ScreenSpaceEventType']['RIGHT_CLICK']),this['activeEvt']['raiseEvent'](!![]);},_0x38ab92['prototype']['deactivate']=function(){this['active']=![],this['isDrawing']=![],this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']),this['activeEvt']['raiseEvent'](![]);},_0x38ab92['prototype']['clear']=function(){this['deactivate'](),this['polylines']&&(this['polylines']['removeAll'](),this['viewer']['scene']['primitives']['remove'](this['polylines']),this['polylines']=undefined),this['polygon']&&(this['viewer']['entities']['remove'](this['polygon']),this['polygon']=undefined),this['points']&&(this['points']['removeAll'](),this['viewer']['scene']['primitives']['remove'](this['points']),this['points']=undefined);};function _0x4c35ca(_0x5aea18,_0x41be8f){let _0xf66944=_0x41be8f;if(_0xf66944&&_0xf66944['active']){let _0x55cf41=_0xf66944['viewer']['scene'];if(!_0x55cf41['pickPositionSupported']){console['log']('your\x20browser\x20not\x20supported\x20pickPosition!');return;}let _0x5d46f3=_0x55cf41['pickPosition'](_0x5aea18['position']);if(_0x5d46f3){if(!_0xf66944['isDrawing']){_0xf66944['isDrawing']=!![];switch(_0xf66944['mode']){case _0xee544b['Point']:_0x40dd46(_0x5d46f3,_0xf66944);break;case _0xee544b['Line']:_0x1b54c5(_0x5d46f3,_0xf66944);break;case _0xee544b['Polygon']:_0x42eb8d(_0x5d46f3,_0xf66944);break;default:break;}}else{let _0x41f428=new Cesium['Cartesian2'](_0x5aea18['position']['x'],_0x5aea18['position']['y']);switch(_0xf66944['mode']){case _0xee544b['Line']:_0x9434b4(_0x41f428,_0xf66944,!![]);break;case _0xee544b['Polygon']:_0x1deb4a(_0x41f428,_0xf66944,!![]);break;default:break;}}}}}function _0x40dd46(_0x2574f4,_0x2500d3){let _0x5987dd=_0x2500d3;!_0x5987dd['points']?(_0x5987dd['points']=new Cesium['PointPrimitiveCollection'](),_0x5987dd['point']=_0x5987dd['points']['add']({'position':_0x2574f4,'pixelSize':0xa,'color':Cesium['Color']['WHITE']}),_0x5987dd['viewer']['scene']['primitives']['add'](_0x5987dd['points'])):_0x5987dd['point']['position']=_0x2574f4,_0x5987dd['deactivate'](),_0x5987dd['drawEvt']['raiseEvent']({'object':_0x5987dd['point']});}function _0x1b54c5(_0x4e7def,_0x4d0071){let _0x5a9479=_0x4d0071;!_0x5a9479['polylines']?(_0x5a9479['polylines']=new Cesium['PolylineCollection'](),_0x5a9479['polyline']=_0x5a9479['polylines']['add']({'width':0x2,'positions':[_0x4e7def,_0x4e7def],'material':Cesium['Material']['fromType'](Cesium['Material']['ColorType'],{'color':Cesium['Color']['fromCssColorString']('#51ff00')})}),_0x5a9479['viewer']['scene']['primitives']['add'](_0x5a9479['polylines'])):(_0x5a9479['polyline']['show']=!![],_0x5a9479['polyline']['positions']=[_0x4e7def,_0x4e7def]);}function _0x42eb8d(_0x5dfe90,_0x3632c5){let _0x287a01=_0x3632c5;!_0x287a01['polylines']?(_0x287a01['polylines']=new Cesium['PolylineCollection'](),_0x287a01['polyline']=_0x287a01['polylines']['add']({'id':'polyline-'+Math['random'](),'width':0x2,'positions':[_0x5dfe90,_0x5dfe90],'material':Cesium['Material']['fromType'](Cesium['Material']['ColorType'],{'color':Cesium['Color']['fromCssColorString']('#51ff00')}),'loop':!![]}),_0x287a01['viewer']['scene']['primitives']['add'](_0x287a01['polylines'])):(_0x287a01['polyline']['show']=!![],_0x287a01['polyline']['positions']=[_0x5dfe90,_0x5dfe90],_0x287a01['polygon']&&(_0x287a01['polygon']['show']=![]));}function _0x44e710(_0x3fcda2,_0x5e4b24){let _0x3cb698=_0x5e4b24;if(_0x3cb698&&_0x3cb698['active']&&_0x3cb698['isDrawing']){let _0x29a8d9=new Cesium['Cartesian2'](_0x3fcda2['endPosition']['x'],_0x3fcda2['endPosition']['y']);switch(_0x3cb698['mode']){case _0xee544b['Line']:_0x9434b4(_0x29a8d9,_0x3cb698,![]);break;case _0xee544b['Polygon']:_0x1deb4a(_0x29a8d9,_0x3cb698,![]);break;default:break;}}_0x3cb698['movingEvt']['raiseEvent'](new Cesium['Cartesian2'](_0x3fcda2['endPosition']['x'],_0x3fcda2['endPosition']['y']));}function _0x9434b4(_0x32e83f,_0x26678d,_0x5e596f){let _0x5c6862=_0x26678d,_0x2fc9fd=_0x5c6862['viewer']['scene'],_0x485373=_0x2fc9fd['pickPosition'](_0x32e83f);if(!_0x485373)return;let _0x55457b=_0x5c6862['polyline']['positions'],_0x3f3362=_0x55457b['length'];_0x5e596f?_0x55457b[_0x3f3362]=_0x485373:_0x55457b[_0x3f3362-0x1]=_0x485373,_0x5c6862['polyline']['positions']=_0x55457b;}function _0x1deb4a(_0x3a0f81,_0x2d3073,_0x3d6d17){let _0x509812=_0x2d3073,_0x2d2837=_0x509812['viewer']['scene'],_0x2a26d8=_0x2d2837['pickPosition'](_0x3a0f81);if(!_0x2a26d8)return;let _0x177ef1=_0x509812['polyline']['positions'],_0x29888a=_0x177ef1['length'];_0x3d6d17?_0x177ef1[_0x29888a]=_0x2a26d8:_0x177ef1[_0x29888a-0x1]=_0x2a26d8,_0x509812['polyline']['positions']=_0x177ef1;}function _0x5181b1(_0x168450,_0x2dc550){let _0x55c78e=_0x2dc550;if(_0x55c78e&&_0x55c78e['active']&&_0x55c78e['isDrawing']){_0x55c78e['deactivate']();if(!_0x55c78e['polyline'])return;_0x55c78e['polyline']['positions']=_0x55c78e['polyline']['positions']['slice'](0x0,_0x55c78e['polyline']['positions']['length']-0x1);if(_0x55c78e['mode']===_0xee544b['Polygon']){if(_0x55c78e['polyline']['positions']['length']<0x3){_0x55c78e['polyline']['positions']['length']=0x0;return;}let _0x1c18c5=[]['concat'](_0x55c78e['polyline']['positions']);!_0x55c78e['polygon']&&(_0x55c78e['polygon']=_0x55c78e['viewer']['entities']['add']({'polygon':{'hierarchy':{'positions':_0x1c18c5},'material':Cesium['Color']['ORANGE']['withAlpha'](0.5),'perPositionHeight':_0x2d201a['Space']===_0x55c78e['_clampMode']}})),_0x55c78e['polygon']['polygon']['hierarchy']=_0x1c18c5,_0x55c78e['polygon']['positions']=_0x1c18c5,_0x55c78e['polygon']['show']=!![],_0x55c78e['drawEvt']['raiseEvent']({'object':_0x55c78e['polygon']});}else{if(_0x55c78e['mode']===_0xee544b['Line']){let _0x54a23d=[];for(let _0x53786f=0x0,_0xbba8cc=_0x55c78e['polyline']['positions']['length'];_0x53786f<_0xbba8cc;_0x53786f++){_0x54a23d['push'](Cesium['Cartesian3']['clone'](_0x55c78e['polyline']['positions'][_0x53786f]));}(_0x55c78e['_clampMode']===_0x2d201a['S3mModel']||_0x55c78e['_clampMode']===_0x2d201a['Ground'])&&(!_0x55c78e['clampToGroundPolylines']&&(_0x55c78e['clampToGroundPolylines']=[]),_0x55c78e['clampToGroundPolylines']['push'](_0x55c78e['viewer']['entities']['add']({'polyline':{'positions':_0x54a23d,'width':0x5,'material':Cesium['Color']['fromCssColorString']('#51ff00'),'clampToGround':!![]}})),_0x55c78e['polyline']['show']=![]),_0x55c78e['drawEvt']['raiseEvent']({'object':_0x55c78e['polyline']});}}}}export default _0x38ab92;