const _0x34efa9=(function(){let _0x1370df=!![];return function(_0x1df849,_0x3cd796){const _0x34770f=_0x1370df?function(){if(_0x3cd796){const _0x2b96c8=_0x3cd796['apply'](_0x1df849,arguments);return _0x3cd796=null,_0x2b96c8;}}:function(){};return _0x1370df=![],_0x34770f;};}()),_0x4e3050=_0x34efa9(this,function(){return _0x4e3050['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x4e3050)['search']('(((.+)+)+)+$');});_0x4e3050();import _0x557f94 from'./StopPlayMode.js';import _0x38bc29 from'./RouteStop.js';import _0x385b5b from'./FlyTurningMode.js';import _0x4dc333 from'./FlyInterpolationMode.js';const _0x48fd2b=Cesium['DeveloperError'],_0x3f1871=Cesium['EasingFunction'],_0x24a3f4=Cesium['defined'],_0x564b85=Cesium['defaultValue'],_0x315c80=Cesium['Cartesian3'],_0x4afda6={'Playing':0x0,'Pause':0x1,'Stop':0x2,'Wait':0x3};function _0xebc06f(_0x3a1657){const _0x303ece=_0x3a1657['scene'],_0x5dc978=_0x3a1657['routes'];if(!_0x303ece)throw new _0x48fd2b('scene\x20is\x20required!');if(!_0x5dc978)throw new _0x48fd2b('routes\x20is\x20required!');this['_routes']=_0x5dc978,this['_scene']=_0x303ece,this['_currentStopIndex']=0x0,this['_dynamicCurrentStopIndex']=0x0,this['_currentTween']=undefined,this['_stopArrived']=new Cesium['Event'](),this['_playRate']=0x1,this['_flyStatus']=_0x4afda6['Stop'],this['_turningMode']=_0x385b5b['Smoothly'],this['_interpolationMode']=_0x4dc333['NONE'];}Object['defineProperties'](_0xebc06f['prototype'],{'routes':{'get':function(){return this['_routes'];},'set':function(_0x24fd48){_0x24fd48&&(this['_routes']=_0x24fd48);}},'stopArrived':{'get':function(){return this['_stopArrived'];}},'currentStopIndex':{'get':function(){const _0x46a031=this['_routes']['routes'][0x0]['_stopCollection']['get'](this['_currentStopIndex']);return!_0x24a3f4(_0x46a031)&&(this['_dynamicCurrentStopIndex']=this['_currentStopIndex']=this['_routes']['routes'][0x0]['_stopCollection']['_array'][0x0]['index']),this['_currentStopIndex'];},'set':function(_0xcdcf58){if(_0x24a3f4(_0xcdcf58)&&this['_routes']['ready']==!![]){const _0x1e98d8=this['_routes']['routes'][0x0]['stopCollection']['length']-0x1;_0xcdcf58=_0xcdcf58>_0x1e98d8?_0x1e98d8:_0xcdcf58,_0xcdcf58=_0xcdcf58<0x0?0x0:_0xcdcf58,this['_currentStopIndex']=_0xcdcf58;}}},'currentRoute':{'get':function(){if(!this['_routes']['ready'])return undefined;return this['_routes']['routes'][0x0];}},'readyPromise':{'get':function(){return this['_routes']['readyPromise'];}},'playRate':{'get':function(){return this['_playRate'];},'set':function(_0x338e6a){if(!_0x338e6a||_0x338e6a===0x0)return;if(this['_playRate']!==_0x338e6a){this['_playRate']=_0x338e6a;if(this['_flyStatus']===_0x4afda6['Playing']){this['_scene']['camera']['cancelFlight']();const _0x3573bb=this['_routes']['routes'][0x0],_0x2f2d4c=_0x3573bb['get'](this['_dynamicCurrentStopIndex']),_0x2d07b6=new _0x38bc29({});for(let _0x15f423 in _0x2f2d4c){_0x2d07b6[_0x15f423]=_0x2f2d4c[_0x15f423];}_0x2d07b6['point']=this['_scene']['camera']['_position'],_0xecfbe5(this,this['_dynamicCurrentStopIndex']+0x1,_0x2d07b6);}}}},'turningMode':{'get':function(){return this['_turningMode'];},'set':function(_0xa7d64d){this['_turningMode']=_0xa7d64d;}},'interpolationMode':{'get':function(){return this['_interpolationMode'];},'set':function(_0x3ad8ea){this['_interpolationMode']=_0x3ad8ea;}}}),_0xebc06f['prototype']['play']=function(){if(!this['currentRoute']||this['_flyStatus']===_0x4afda6['Playing'])return;if(this['_flyStatus']===_0x4afda6['Pause']||this['_flyStatus']===_0x4afda6['Wait'])this['_currentTween']&&this['_scene']['camera']['_currentFlight']?(this['_currentTween']['_tweenjs']['endPause'](),this['_flyStatus']=_0x4afda6['Playing']):_0xecfbe5(this,this['_dynamicCurrentStopIndex']+0x1);else{if(this['currentStopIndex']>=this['_routes']['routes'][0x0]['stopCollection'][this['_routes']['routes'][0x0]['stopCollection']['length']-0x1]['index']){this['_flyStatus']=_0x4afda6['Stop'];return;}_0xecfbe5(this,this['currentStopIndex']);}},_0xebc06f['prototype']['pause']=function(){if(this['_flyStatus']===_0x4afda6['Playing'])this['_currentTween']=this['_scene']['camera']['_currentFlight'],this['_currentTween']&&this['_currentTween']['_tweenjs']&&this['_currentTween']['_tweenjs']['pause'](),this['_flyStatus']=_0x4afda6['Pause'];else this['_flyStatus']===_0x4afda6['Wait']&&(this['_flyStatus']=_0x4afda6['Pause']);},_0xebc06f['prototype']['stop']=function(){this['_currentTween']=this['_scene']['tweens']['get'](0x0);if(this['_currentTween']&&this['_flyStatus']!==_0x4afda6['Stop'])this['_currentTween']['cancelTween'](),this['_flyStatus']=_0x4afda6['Stop'],this['_currentTween']=undefined;else this['_flyStatus']===_0x4afda6['Wait']&&(this['_flyStatus']=_0x4afda6['Stop']);this['_dynamicCurrentStopIndex']=this['_currentStopIndex'];},_0xebc06f['prototype']['viewToStop']=function(_0x4fdf2a){if(_0x4fdf2a&&!(this['_flyStatus']===_0x4afda6['Playing'])){const _0x3d62df=this['_scene']['camera'],_0x5e80e3=_0x24a3f4(_0x4fdf2a['direction'])?{'direction':_0x4fdf2a['direction'],'up':_0x4fdf2a['up']}:{'heading':_0x4fdf2a['heading'],'pitch':_0x4fdf2a['tilt'],'roll':0x0};_0x3d62df['setView']({'destination':_0x4fdf2a['point'],'orientation':_0x5e80e3,'convert':_0x4fdf2a['_isConvert']}),this['_dynamicCurrentStopIndex']=_0x4fdf2a['index'];}},_0xebc06f['prototype']['getAllRouteStops']=function(){if(this['currentRoute'])return this['currentRoute']['stopCollection'];return[];};function _0xecfbe5(_0x553f6f,_0x20c22b,_0x5c2e37){_0x553f6f['_flyStatus']=_0x4afda6['Playing'];const _0x28b1e6=_0x553f6f['_scene']['camera'],_0x38773b=_0x553f6f['_routes']['routes'][0x0],_0x324b8c=_0x38773b['_catmullRomSpline'],_0x503640=_0x553f6f['_interpolationMode'],_0x3aa6bc=_0x38773b['isFlyLoop'],_0x1d5dbd=_0x38773b['isHeadingFree'],_0x244586=_0x38773b['isTiltFree'],_0x4afc38=_0x38773b['isAltitudeFree'],_0xfdce78=_0x564b85(_0x38773b['_stopCollection']['get'](_0x20c22b),_0x38773b['_stopCollection']['_array'][_0x20c22b]);if(!_0xfdce78){if(_0x3aa6bc===!![]){_0x20c22b=_0x38773b['_stopCollection']['_array'][0x0]['index'];_0x24a3f4(_0x324b8c)&&(_0x324b8c['_lastTimeIndex']=0x0);_0x553f6f['_dynamicCurrentStopIndex']=_0x20c22b,_0x553f6f['currentStopIndex']=_0x20c22b,_0xecfbe5(_0x553f6f,_0x20c22b);return;}else{_0x553f6f['_flyStatus']=_0x4afda6['Stop'];return;}}if(_0x20c22b===_0x553f6f['currentStopIndex']){const _0x26c833=_0x24a3f4(_0xfdce78['direction'])&&!_0x244586?{'direction':_0xfdce78['direction'],'up':_0xfdce78['up']}:{'heading':_0xfdce78['heading'],'pitch':_0xfdce78['tilt'],'roll':0x0};_0x28b1e6['setView']({'destination':_0xfdce78['point'],'orientation':_0x26c833,'convert':_0xfdce78['_isConvert']}),_0x20c22b++,_0xecfbe5(_0x553f6f,_0x20c22b);}else{if(_0xfdce78['_bImmediately']){const _0xf26055=_0x24a3f4(_0xfdce78['direction'])&&!_0x244586?{'direction':_0xfdce78['direction'],'up':_0xfdce78['up']}:{'heading':_0xfdce78['heading'],'pitch':_0xfdce78['tilt'],'roll':0x0};_0x28b1e6['setView']({'destination':_0xfdce78['point'],'orientation':_0xf26055,'convert':_0xfdce78['_isConvert']}),_0x25376c(_0x553f6f,_0xfdce78,_0x20c22b);return;}const _0x486040=_0x564b85(_0x38773b['_stopCollection']['get'](_0x20c22b-0x1),_0x38773b['_stopCollection']['get'](_0xfdce78['_preStopIndex']));_0x24a3f4(_0x5c2e37)&&(_0x486040=_0x5c2e37);const _0x4c64a3=_0x486040['altitude']<_0xfdce78['altitude']?_0x486040['altitude']:_0xfdce78['altitude'];let _0x2138d9;if(_0x486040['stopPlayMode']===_0x557f94['StopAround'])_0x2138d9=_0x486040['surroundDuration'];else{if(_0x24a3f4(_0x5c2e37)){const _0x13ddad=_0x315c80['distance'](_0x5c2e37['point'],_0xfdce78['point']);_0x486040['duration']=_0x13ddad/_0x486040['speed'];}_0x2138d9=_0x486040['duration'];}_0x2138d9/=_0x553f6f['_playRate'];const _0x177e52=_0x24a3f4(_0xfdce78['direction'])&&!_0x244586?{'direction':_0xfdce78['direction'],'up':_0xfdce78['up']}:{'heading':_0xfdce78['heading'],'pitch':_0xfdce78['tilt'],'roll':0x0},_0x52ab36=![];if(_0x553f6f['_turningMode']===_0x385b5b['Directly']&&_0x24a3f4(_0x486040['direction'])){const _0x206ba4={'direction':_0x486040['direction'],'up':_0x486040['up']};_0x52ab36=!![];}_0x28b1e6['flyTo']({'convert':_0xfdce78['_isConvert'],'destination':_0xfdce78['point'],'orientation':_0x177e52,'maximumHeight':_0x4c64a3,'duration':_0x2138d9,'headingFree':_0x1d5dbd,'pitchFree':_0x244586,'altitudeFree':_0x4afc38,'directTurning':_0x52ab36,'catmullRomSpline':_0x324b8c,'preStopIndex':_0x20c22b-0x1,'interpolationMode':_0x503640,'easingFunction':_0x3f1871['LINEAR_NONE'],'complete':function(){_0x25376c(_0x553f6f,_0xfdce78,_0x20c22b);}});}}let _0x21cc0d;function _0x25376c(_0x2bd8cd,_0x286550,_0x2e157b){if(_0x21cc0d)clearTimeout(_0x21cc0d);_0x2bd8cd['_dynamicCurrentStopIndex']=_0x286550['_index'],_0x2e157b=_0x564b85(_0x286550['_nextStopIndex'],_0x286550['_index']+0x1),_0x2bd8cd['_stopArrived']['raiseEvent'](_0x286550);if(!_0x286550['promise']){let _0x56fc4a=_0x286550['waitTime'];_0x56fc4a>0x0?(_0x2bd8cd['_flyStatus']=_0x4afda6['Wait'],_0x21cc0d=setTimeout(function(){_0x2bd8cd['_flyStatus']===_0x4afda6['Wait']&&(_0x2bd8cd['_flyStatus']=_0x4afda6['Playing'],_0xecfbe5(_0x2bd8cd,_0x2e157b));},_0x56fc4a*0x3e8)):_0xecfbe5(_0x2bd8cd,_0x2e157b);}else _0x286550['promise']['then'](function(){let _0x98fdca=_0x286550['waitTime'];_0x98fdca>0x0?setTimeout(function(){_0xecfbe5(_0x2bd8cd,_0x2e157b);},_0x98fdca*0x3e8):_0xecfbe5(_0x2bd8cd,_0x2e157b);});}export default _0xebc06f;