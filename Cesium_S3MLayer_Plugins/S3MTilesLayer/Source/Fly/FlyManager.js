const _0x180adf=(function(){let _0x451548=!![];return function(_0xeadbf9,_0x41aec3){const _0x35db54=_0x451548?function(){if(_0x41aec3){const _0x4c7d26=_0x41aec3['apply'](_0xeadbf9,arguments);return _0x41aec3=null,_0x4c7d26;}}:function(){};return _0x451548=![],_0x35db54;};}()),_0x2acad3=_0x180adf(this,function(){return _0x2acad3['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x2acad3)['search']('(((.+)+)+)+$');});_0x2acad3();import _0x193bbc from'./StopPlayMode.js';import _0x5f33d7 from'./RouteStop.js';import _0x375d67 from'./FlyTurningMode.js';import _0x8fff52 from'./FlyInterpolationMode.js';const _0x5ebcb2=Cesium['DeveloperError'],_0x5a9456=Cesium['EasingFunction'],_0x3d6c89=Cesium['defined'],_0x6c56f=Cesium['defaultValue'],_0x288bff=Cesium['Cartesian3'],_0x38fd38={'Playing':0x0,'Pause':0x1,'Stop':0x2,'Wait':0x3};function _0x10c574(_0x4b7b37){const _0x1ea63c=_0x4b7b37['scene'],_0x5cbf86=_0x4b7b37['routes'];if(!_0x1ea63c)throw new _0x5ebcb2('scene\x20is\x20required!');if(!_0x5cbf86)throw new _0x5ebcb2('routes\x20is\x20required!');this['_routes']=_0x5cbf86,this['_scene']=_0x1ea63c,this['_currentStopIndex']=0x0,this['_dynamicCurrentStopIndex']=0x0,this['_currentTween']=undefined,this['_stopArrived']=new Cesium['Event'](),this['_playRate']=0x1,this['_flyStatus']=_0x38fd38['Stop'],this['_turningMode']=_0x375d67['Smoothly'],this['_interpolationMode']=_0x8fff52['NONE'];}Object['defineProperties'](_0x10c574['prototype'],{'routes':{'get':function(){return this['_routes'];},'set':function(_0x2d2ae9){_0x2d2ae9&&(this['_routes']=_0x2d2ae9);}},'stopArrived':{'get':function(){return this['_stopArrived'];}},'currentStopIndex':{'get':function(){const _0x1f6671=this['_routes']['routes'][0x0]['_stopCollection']['get'](this['_currentStopIndex']);return!_0x3d6c89(_0x1f6671)&&(this['_dynamicCurrentStopIndex']=this['_currentStopIndex']=this['_routes']['routes'][0x0]['_stopCollection']['_array'][0x0]['index']),this['_currentStopIndex'];},'set':function(_0x4cac4d){if(_0x3d6c89(_0x4cac4d)&&this['_routes']['ready']==!![]){const _0x41f224=this['_routes']['routes'][0x0]['stopCollection']['length']-0x1;_0x4cac4d=_0x4cac4d>_0x41f224?_0x41f224:_0x4cac4d,_0x4cac4d=_0x4cac4d<0x0?0x0:_0x4cac4d,this['_currentStopIndex']=_0x4cac4d;}}},'currentRoute':{'get':function(){if(!this['_routes']['ready'])return undefined;return this['_routes']['routes'][0x0];}},'readyPromise':{'get':function(){return this['_routes']['readyPromise'];}},'playRate':{'get':function(){return this['_playRate'];},'set':function(_0x11e305){if(!_0x11e305||_0x11e305===0x0)return;if(this['_playRate']!==_0x11e305){this['_playRate']=_0x11e305;if(this['_flyStatus']===_0x38fd38['Playing']){this['_scene']['camera']['cancelFlight']();const _0x51e581=this['_routes']['routes'][0x0],_0x156d7e=_0x51e581['get'](this['_dynamicCurrentStopIndex']),_0x2c1ba3=new _0x5f33d7({});for(let _0x5f3064 in _0x156d7e){_0x2c1ba3[_0x5f3064]=_0x156d7e[_0x5f3064];}_0x2c1ba3['point']=this['_scene']['camera']['_position'],_0x3abcf5(this,this['_dynamicCurrentStopIndex']+0x1,_0x2c1ba3);}}}},'turningMode':{'get':function(){return this['_turningMode'];},'set':function(_0x5cfcf5){this['_turningMode']=_0x5cfcf5;}},'interpolationMode':{'get':function(){return this['_interpolationMode'];},'set':function(_0x2b7477){this['_interpolationMode']=_0x2b7477;}}}),_0x10c574['prototype']['play']=function(){if(!this['currentRoute']||this['_flyStatus']===_0x38fd38['Playing'])return;if(this['_flyStatus']===_0x38fd38['Pause']||this['_flyStatus']===_0x38fd38['Wait'])this['_currentTween']&&this['_scene']['camera']['_currentFlight']?(this['_currentTween']['_tweenjs']['endPause'](),this['_flyStatus']=_0x38fd38['Playing']):_0x3abcf5(this,this['_dynamicCurrentStopIndex']+0x1);else{if(this['currentStopIndex']>=this['_routes']['routes'][0x0]['stopCollection'][this['_routes']['routes'][0x0]['stopCollection']['length']-0x1]['index']){this['_flyStatus']=_0x38fd38['Stop'];return;}_0x3abcf5(this,this['currentStopIndex']);}},_0x10c574['prototype']['pause']=function(){if(this['_flyStatus']===_0x38fd38['Playing'])this['_currentTween']=this['_scene']['camera']['_currentFlight'],this['_currentTween']&&this['_currentTween']['_tweenjs']&&this['_currentTween']['_tweenjs']['pause'](),this['_flyStatus']=_0x38fd38['Pause'];else this['_flyStatus']===_0x38fd38['Wait']&&(this['_flyStatus']=_0x38fd38['Pause']);},_0x10c574['prototype']['stop']=function(){this['_currentTween']=this['_scene']['tweens']['get'](0x0);if(this['_currentTween']&&this['_flyStatus']!==_0x38fd38['Stop'])this['_currentTween']['cancelTween'](),this['_flyStatus']=_0x38fd38['Stop'],this['_currentTween']=undefined;else this['_flyStatus']===_0x38fd38['Wait']&&(this['_flyStatus']=_0x38fd38['Stop']);this['_dynamicCurrentStopIndex']=this['_currentStopIndex'];},_0x10c574['prototype']['viewToStop']=function(_0x3372ab){if(_0x3372ab&&!(this['_flyStatus']===_0x38fd38['Playing'])){const _0x10e2ef=this['_scene']['camera'],_0x4c0023=_0x3d6c89(_0x3372ab['direction'])?{'direction':_0x3372ab['direction'],'up':_0x3372ab['up']}:{'heading':_0x3372ab['heading'],'pitch':_0x3372ab['tilt'],'roll':0x0};_0x10e2ef['setView']({'destination':_0x3372ab['point'],'orientation':_0x4c0023,'convert':_0x3372ab['_isConvert']}),this['_dynamicCurrentStopIndex']=_0x3372ab['index'];}},_0x10c574['prototype']['getAllRouteStops']=function(){if(this['currentRoute'])return this['currentRoute']['stopCollection'];return[];};function _0x3abcf5(_0x3675ab,_0x2d37bd,_0x8f5ce){_0x3675ab['_flyStatus']=_0x38fd38['Playing'];const _0x2e9ea2=_0x3675ab['_scene']['camera'],_0x5b7d6e=_0x3675ab['_routes']['routes'][0x0],_0x211f2c=_0x5b7d6e['_catmullRomSpline'],_0x23b238=_0x3675ab['_interpolationMode'],_0x210fad=_0x5b7d6e['isFlyLoop'],_0x54fa57=_0x5b7d6e['isHeadingFree'],_0x59d37c=_0x5b7d6e['isTiltFree'],_0x5a0d74=_0x5b7d6e['isAltitudeFree'],_0x12893d=_0x6c56f(_0x5b7d6e['_stopCollection']['get'](_0x2d37bd),_0x5b7d6e['_stopCollection']['_array'][_0x2d37bd]);if(!_0x12893d){if(_0x210fad===!![]){_0x2d37bd=_0x5b7d6e['_stopCollection']['_array'][0x0]['index'];_0x3d6c89(_0x211f2c)&&(_0x211f2c['_lastTimeIndex']=0x0);_0x3675ab['_dynamicCurrentStopIndex']=_0x2d37bd,_0x3675ab['currentStopIndex']=_0x2d37bd,_0x3abcf5(_0x3675ab,_0x2d37bd);return;}else{_0x3675ab['_flyStatus']=_0x38fd38['Stop'];return;}}if(_0x2d37bd===_0x3675ab['currentStopIndex']){const _0x4e2297=_0x3d6c89(_0x12893d['direction'])&&!_0x59d37c?{'direction':_0x12893d['direction'],'up':_0x12893d['up']}:{'heading':_0x12893d['heading'],'pitch':_0x12893d['tilt'],'roll':0x0};_0x2e9ea2['setView']({'destination':_0x12893d['point'],'orientation':_0x4e2297,'convert':_0x12893d['_isConvert']}),_0x2d37bd++,_0x3abcf5(_0x3675ab,_0x2d37bd);}else{if(_0x12893d['_bImmediately']){const _0x2ce353=_0x3d6c89(_0x12893d['direction'])&&!_0x59d37c?{'direction':_0x12893d['direction'],'up':_0x12893d['up']}:{'heading':_0x12893d['heading'],'pitch':_0x12893d['tilt'],'roll':0x0};_0x2e9ea2['setView']({'destination':_0x12893d['point'],'orientation':_0x2ce353,'convert':_0x12893d['_isConvert']}),_0x18aa6e(_0x3675ab,_0x12893d,_0x2d37bd);return;}const _0x3f4692=_0x6c56f(_0x5b7d6e['_stopCollection']['get'](_0x2d37bd-0x1),_0x5b7d6e['_stopCollection']['get'](_0x12893d['_preStopIndex']));_0x3d6c89(_0x8f5ce)&&(_0x3f4692=_0x8f5ce);const _0x2ec8ef=_0x3f4692['altitude']<_0x12893d['altitude']?_0x3f4692['altitude']:_0x12893d['altitude'];let _0xd53264;if(_0x3f4692['stopPlayMode']===_0x193bbc['StopAround'])_0xd53264=_0x3f4692['surroundDuration'];else{if(_0x3d6c89(_0x8f5ce)){const _0x298b2d=_0x288bff['distance'](_0x8f5ce['point'],_0x12893d['point']);_0x3f4692['duration']=_0x298b2d/_0x3f4692['speed'];}_0xd53264=_0x3f4692['duration'];}_0xd53264/=_0x3675ab['_playRate'];const _0x56abf7=_0x3d6c89(_0x12893d['direction'])&&!_0x59d37c?{'direction':_0x12893d['direction'],'up':_0x12893d['up']}:{'heading':_0x12893d['heading'],'pitch':_0x12893d['tilt'],'roll':0x0},_0x387287=![];if(_0x3675ab['_turningMode']===_0x375d67['Directly']&&_0x3d6c89(_0x3f4692['direction'])){const _0x149e64={'direction':_0x3f4692['direction'],'up':_0x3f4692['up']};_0x387287=!![];}_0x2e9ea2['flyTo']({'convert':_0x12893d['_isConvert'],'destination':_0x12893d['point'],'orientation':_0x56abf7,'maximumHeight':_0x2ec8ef,'duration':_0xd53264,'headingFree':_0x54fa57,'pitchFree':_0x59d37c,'altitudeFree':_0x5a0d74,'directTurning':_0x387287,'catmullRomSpline':_0x211f2c,'preStopIndex':_0x2d37bd-0x1,'interpolationMode':_0x23b238,'easingFunction':_0x5a9456['LINEAR_NONE'],'complete':function(){_0x18aa6e(_0x3675ab,_0x12893d,_0x2d37bd);}});}}let _0x5cd0ec;function _0x18aa6e(_0x5584e3,_0x439433,_0x2933f9){if(_0x5cd0ec)clearTimeout(_0x5cd0ec);_0x5584e3['_dynamicCurrentStopIndex']=_0x439433['_index'],_0x2933f9=_0x6c56f(_0x439433['_nextStopIndex'],_0x439433['_index']+0x1),_0x5584e3['_stopArrived']['raiseEvent'](_0x439433);if(!_0x439433['promise']){let _0x5671f0=_0x439433['waitTime'];_0x5671f0>0x0?(_0x5584e3['_flyStatus']=_0x38fd38['Wait'],_0x5cd0ec=setTimeout(function(){_0x5584e3['_flyStatus']===_0x38fd38['Wait']&&(_0x5584e3['_flyStatus']=_0x38fd38['Playing'],_0x3abcf5(_0x5584e3,_0x2933f9));},_0x5671f0*0x3e8)):_0x3abcf5(_0x5584e3,_0x2933f9);}else _0x439433['promise']['then'](function(){let _0x557e22=_0x439433['waitTime'];_0x557e22>0x0?setTimeout(function(){_0x3abcf5(_0x5584e3,_0x2933f9);},_0x557e22*0x3e8):_0x3abcf5(_0x5584e3,_0x2933f9);});}export default _0x10c574;