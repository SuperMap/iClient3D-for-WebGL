const _0x6d7edf=(function(){let _0x315c81=!![];return function(_0x3cada1,_0x330c8f){const _0x27d0f6=_0x315c81?function(){if(_0x330c8f){const _0x14597b=_0x330c8f['apply'](_0x3cada1,arguments);return _0x330c8f=null,_0x14597b;}}:function(){};return _0x315c81=![],_0x27d0f6;};}()),_0xf635bb=_0x6d7edf(this,function(){return _0xf635bb['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0xf635bb)['search']('(((.+)+)+)+$');});_0xf635bb();import _0xcd9ecb from'./StopPlayMode.js';import _0x169328 from'./RouteStop.js';import _0x4e86e5 from'./FlyTurningMode.js';import _0x443a5e from'./FlyInterpolationMode.js';const _0x5b6270=Cesium['DeveloperError'],_0x1d0a3b=Cesium['EasingFunction'],_0x2fb539=Cesium['defined'],_0x4a89a3=Cesium['defaultValue'],_0x453933=Cesium['Cartesian3'],_0x585d4c={'Playing':0x0,'Pause':0x1,'Stop':0x2,'Wait':0x3};function _0x150ea9(_0x56f7f8){const _0x4ff494=_0x56f7f8['scene'],_0x232f99=_0x56f7f8['routes'];if(!_0x4ff494)throw new _0x5b6270('scene\x20is\x20required!');if(!_0x232f99)throw new _0x5b6270('routes\x20is\x20required!');this['_routes']=_0x232f99,this['_scene']=_0x4ff494,this['_currentStopIndex']=0x0,this['_dynamicCurrentStopIndex']=0x0,this['_currentTween']=undefined,this['_stopArrived']=new Cesium['Event'](),this['_playRate']=0x1,this['_flyStatus']=_0x585d4c['Stop'],this['_turningMode']=_0x4e86e5['Smoothly'],this['_interpolationMode']=_0x443a5e['NONE'];}Object['defineProperties'](_0x150ea9['prototype'],{'routes':{'get':function(){return this['_routes'];},'set':function(_0x463931){_0x463931&&(this['_routes']=_0x463931);}},'stopArrived':{'get':function(){return this['_stopArrived'];}},'currentStopIndex':{'get':function(){const _0x4f2a00=this['_routes']['routes'][0x0]['_stopCollection']['get'](this['_currentStopIndex']);return!_0x2fb539(_0x4f2a00)&&(this['_dynamicCurrentStopIndex']=this['_currentStopIndex']=this['_routes']['routes'][0x0]['_stopCollection']['_array'][0x0]['index']),this['_currentStopIndex'];},'set':function(_0x5457c3){if(_0x2fb539(_0x5457c3)&&this['_routes']['ready']==!![]){const _0x33b41e=this['_routes']['routes'][0x0]['stopCollection']['length']-0x1;_0x5457c3=_0x5457c3>_0x33b41e?_0x33b41e:_0x5457c3,_0x5457c3=_0x5457c3<0x0?0x0:_0x5457c3,this['_currentStopIndex']=_0x5457c3;}}},'currentRoute':{'get':function(){if(!this['_routes']['ready'])return undefined;return this['_routes']['routes'][0x0];}},'readyPromise':{'get':function(){return this['_routes']['readyPromise'];}},'playRate':{'get':function(){return this['_playRate'];},'set':function(_0x36b09a){if(!_0x36b09a||_0x36b09a===0x0)return;if(this['_playRate']!==_0x36b09a){this['_playRate']=_0x36b09a;if(this['_flyStatus']===_0x585d4c['Playing']){this['_scene']['camera']['cancelFlight']();const _0x58c8eb=this['_routes']['routes'][0x0],_0x1ddc3f=_0x58c8eb['get'](this['_dynamicCurrentStopIndex']),_0x34f16b=new _0x169328({});for(let _0x2f5646 in _0x1ddc3f){_0x34f16b[_0x2f5646]=_0x1ddc3f[_0x2f5646];}_0x34f16b['point']=this['_scene']['camera']['_position'],_0x392aeb(this,this['_dynamicCurrentStopIndex']+0x1,_0x34f16b);}}}},'turningMode':{'get':function(){return this['_turningMode'];},'set':function(_0x248337){this['_turningMode']=_0x248337;}},'interpolationMode':{'get':function(){return this['_interpolationMode'];},'set':function(_0x599340){this['_interpolationMode']=_0x599340;}}}),_0x150ea9['prototype']['play']=function(){if(!this['currentRoute']||this['_flyStatus']===_0x585d4c['Playing'])return;if(this['_flyStatus']===_0x585d4c['Pause']||this['_flyStatus']===_0x585d4c['Wait'])this['_currentTween']&&this['_scene']['camera']['_currentFlight']?(this['_currentTween']['_tweenjs']['endPause'](),this['_flyStatus']=_0x585d4c['Playing']):_0x392aeb(this,this['_dynamicCurrentStopIndex']+0x1);else{if(this['currentStopIndex']>=this['_routes']['routes'][0x0]['stopCollection'][this['_routes']['routes'][0x0]['stopCollection']['length']-0x1]['index']){this['_flyStatus']=_0x585d4c['Stop'];return;}_0x392aeb(this,this['currentStopIndex']);}},_0x150ea9['prototype']['pause']=function(){if(this['_flyStatus']===_0x585d4c['Playing'])this['_currentTween']=this['_scene']['camera']['_currentFlight'],this['_currentTween']&&this['_currentTween']['_tweenjs']&&this['_currentTween']['_tweenjs']['pause'](),this['_flyStatus']=_0x585d4c['Pause'];else this['_flyStatus']===_0x585d4c['Wait']&&(this['_flyStatus']=_0x585d4c['Pause']);},_0x150ea9['prototype']['stop']=function(){this['_currentTween']=this['_scene']['tweens']['get'](0x0);if(this['_currentTween']&&this['_flyStatus']!==_0x585d4c['Stop'])this['_currentTween']['cancelTween'](),this['_flyStatus']=_0x585d4c['Stop'],this['_currentTween']=undefined;else this['_flyStatus']===_0x585d4c['Wait']&&(this['_flyStatus']=_0x585d4c['Stop']);this['_dynamicCurrentStopIndex']=this['_currentStopIndex'];},_0x150ea9['prototype']['viewToStop']=function(_0x24be93){if(_0x24be93&&!(this['_flyStatus']===_0x585d4c['Playing'])){const _0x3edfd0=this['_scene']['camera'],_0x538395=_0x2fb539(_0x24be93['direction'])?{'direction':_0x24be93['direction'],'up':_0x24be93['up']}:{'heading':_0x24be93['heading'],'pitch':_0x24be93['tilt'],'roll':0x0};_0x3edfd0['setView']({'destination':_0x24be93['point'],'orientation':_0x538395,'convert':_0x24be93['_isConvert']}),this['_dynamicCurrentStopIndex']=_0x24be93['index'];}},_0x150ea9['prototype']['getAllRouteStops']=function(){if(this['currentRoute'])return this['currentRoute']['stopCollection'];return[];};function _0x392aeb(_0x43e05a,_0x187eeb,_0x153b1d){_0x43e05a['_flyStatus']=_0x585d4c['Playing'];const _0x2a39b5=_0x43e05a['_scene']['camera'],_0x4dce7c=_0x43e05a['_routes']['routes'][0x0],_0xf3059e=_0x4dce7c['_catmullRomSpline'],_0x1aad87=_0x43e05a['_interpolationMode'],_0x16f7e4=_0x4dce7c['isFlyLoop'],_0x3039d6=_0x4dce7c['isHeadingFree'],_0x33da33=_0x4dce7c['isTiltFree'],_0xb49cc1=_0x4dce7c['isAltitudeFree'],_0x3b16f7=_0x4a89a3(_0x4dce7c['_stopCollection']['get'](_0x187eeb),_0x4dce7c['_stopCollection']['_array'][_0x187eeb]);if(!_0x3b16f7){if(_0x16f7e4===!![]){_0x187eeb=_0x4dce7c['_stopCollection']['_array'][0x0]['index'];_0x2fb539(_0xf3059e)&&(_0xf3059e['_lastTimeIndex']=0x0);_0x43e05a['_dynamicCurrentStopIndex']=_0x187eeb,_0x43e05a['currentStopIndex']=_0x187eeb,_0x392aeb(_0x43e05a,_0x187eeb);return;}else{_0x43e05a['_flyStatus']=_0x585d4c['Stop'];return;}}if(_0x187eeb===_0x43e05a['currentStopIndex']){const _0x2d7f56=_0x2fb539(_0x3b16f7['direction'])&&!_0x33da33?{'direction':_0x3b16f7['direction'],'up':_0x3b16f7['up']}:{'heading':_0x3b16f7['heading'],'pitch':_0x3b16f7['tilt'],'roll':0x0};_0x2a39b5['setView']({'destination':_0x3b16f7['point'],'orientation':_0x2d7f56,'convert':_0x3b16f7['_isConvert']}),_0x187eeb++,_0x392aeb(_0x43e05a,_0x187eeb);}else{if(_0x3b16f7['_bImmediately']){const _0x14669e=_0x2fb539(_0x3b16f7['direction'])&&!_0x33da33?{'direction':_0x3b16f7['direction'],'up':_0x3b16f7['up']}:{'heading':_0x3b16f7['heading'],'pitch':_0x3b16f7['tilt'],'roll':0x0};_0x2a39b5['setView']({'destination':_0x3b16f7['point'],'orientation':_0x14669e,'convert':_0x3b16f7['_isConvert']}),_0x27d72e(_0x43e05a,_0x3b16f7,_0x187eeb);return;}const _0x574efe=_0x4a89a3(_0x4dce7c['_stopCollection']['get'](_0x187eeb-0x1),_0x4dce7c['_stopCollection']['get'](_0x3b16f7['_preStopIndex']));_0x2fb539(_0x153b1d)&&(_0x574efe=_0x153b1d);const _0x24f691=_0x574efe['altitude']<_0x3b16f7['altitude']?_0x574efe['altitude']:_0x3b16f7['altitude'];let _0x251133;if(_0x574efe['stopPlayMode']===_0xcd9ecb['StopAround'])_0x251133=_0x574efe['surroundDuration'];else{if(_0x2fb539(_0x153b1d)){const _0x3a97cd=_0x453933['distance'](_0x153b1d['point'],_0x3b16f7['point']);_0x574efe['duration']=_0x3a97cd/_0x574efe['speed'];}_0x251133=_0x574efe['duration'];}_0x251133/=_0x43e05a['_playRate'];const _0x47381a=_0x2fb539(_0x3b16f7['direction'])&&!_0x33da33?{'direction':_0x3b16f7['direction'],'up':_0x3b16f7['up']}:{'heading':_0x3b16f7['heading'],'pitch':_0x3b16f7['tilt'],'roll':0x0},_0x472209=![];if(_0x43e05a['_turningMode']===_0x4e86e5['Directly']&&_0x2fb539(_0x574efe['direction'])){const _0x423d4a={'direction':_0x574efe['direction'],'up':_0x574efe['up']};_0x472209=!![];}_0x2a39b5['flyTo']({'convert':_0x3b16f7['_isConvert'],'destination':_0x3b16f7['point'],'orientation':_0x47381a,'maximumHeight':_0x24f691,'duration':_0x251133,'headingFree':_0x3039d6,'pitchFree':_0x33da33,'altitudeFree':_0xb49cc1,'directTurning':_0x472209,'catmullRomSpline':_0xf3059e,'preStopIndex':_0x187eeb-0x1,'interpolationMode':_0x1aad87,'easingFunction':_0x1d0a3b['LINEAR_NONE'],'complete':function(){_0x27d72e(_0x43e05a,_0x3b16f7,_0x187eeb);}});}}let _0x49afdb;function _0x27d72e(_0x52d37c,_0x43e954,_0x543489){if(_0x49afdb)clearTimeout(_0x49afdb);_0x52d37c['_dynamicCurrentStopIndex']=_0x43e954['_index'],_0x543489=_0x4a89a3(_0x43e954['_nextStopIndex'],_0x43e954['_index']+0x1),_0x52d37c['_stopArrived']['raiseEvent'](_0x43e954);if(!_0x43e954['promise']){let _0xa26c35=_0x43e954['waitTime'];_0xa26c35>0x0?(_0x52d37c['_flyStatus']=_0x585d4c['Wait'],_0x49afdb=setTimeout(function(){_0x52d37c['_flyStatus']===_0x585d4c['Wait']&&(_0x52d37c['_flyStatus']=_0x585d4c['Playing'],_0x392aeb(_0x52d37c,_0x543489));},_0xa26c35*0x3e8)):_0x392aeb(_0x52d37c,_0x543489);}else _0x43e954['promise']['then'](function(){let _0x13ab7d=_0x43e954['waitTime'];_0x13ab7d>0x0?setTimeout(function(){_0x392aeb(_0x52d37c,_0x543489);},_0x13ab7d*0x3e8):_0x392aeb(_0x52d37c,_0x543489);});}export default _0x150ea9;