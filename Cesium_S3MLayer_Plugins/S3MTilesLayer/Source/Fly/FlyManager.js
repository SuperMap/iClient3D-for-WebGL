const _0x197788=(function(){let _0x5b43eb=!![];return function(_0x57aec7,_0x4efe4c){const _0x1c66a4=_0x5b43eb?function(){if(_0x4efe4c){const _0x471e6f=_0x4efe4c['apply'](_0x57aec7,arguments);return _0x4efe4c=null,_0x471e6f;}}:function(){};return _0x5b43eb=![],_0x1c66a4;};}()),_0x4ecda0=_0x197788(this,function(){return _0x4ecda0['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x4ecda0)['search']('(((.+)+)+)+$');});_0x4ecda0();import _0x3f860c from'./StopPlayMode.js';import _0x2f72b7 from'./RouteStop.js';import _0x3e27ee from'./FlyTurningMode.js';import _0x3af877 from'./FlyInterpolationMode.js';const _0x18fc2f=Cesium['DeveloperError'],_0x1fe14a=Cesium['EasingFunction'],_0x293903=Cesium['defined'],_0x41a500=Cesium['defaultValue'],_0x358485=Cesium['Cartesian3'],_0x145e26={'Playing':0x0,'Pause':0x1,'Stop':0x2,'Wait':0x3};function _0x5a2b9d(_0x436821){const _0x2fa065=_0x436821['scene'],_0x358eb2=_0x436821['routes'];if(!_0x2fa065)throw new _0x18fc2f('scene\x20is\x20required!');if(!_0x358eb2)throw new _0x18fc2f('routes\x20is\x20required!');this['_routes']=_0x358eb2,this['_scene']=_0x2fa065,this['_currentStopIndex']=0x0,this['_dynamicCurrentStopIndex']=0x0,this['_currentTween']=undefined,this['_stopArrived']=new Cesium['Event'](),this['_playRate']=0x1,this['_flyStatus']=_0x145e26['Stop'],this['_turningMode']=_0x3e27ee['Smoothly'],this['_interpolationMode']=_0x3af877['NONE'];}Object['defineProperties'](_0x5a2b9d['prototype'],{'routes':{'get':function(){return this['_routes'];},'set':function(_0x7ad1bc){_0x7ad1bc&&(this['_routes']=_0x7ad1bc);}},'stopArrived':{'get':function(){return this['_stopArrived'];}},'currentStopIndex':{'get':function(){const _0x5a168e=this['_routes']['routes'][0x0]['_stopCollection']['get'](this['_currentStopIndex']);return!_0x293903(_0x5a168e)&&(this['_dynamicCurrentStopIndex']=this['_currentStopIndex']=this['_routes']['routes'][0x0]['_stopCollection']['_array'][0x0]['index']),this['_currentStopIndex'];},'set':function(_0x4be7b3){if(_0x293903(_0x4be7b3)&&this['_routes']['ready']==!![]){const _0x40b2c0=this['_routes']['routes'][0x0]['stopCollection']['length']-0x1;_0x4be7b3=_0x4be7b3>_0x40b2c0?_0x40b2c0:_0x4be7b3,_0x4be7b3=_0x4be7b3<0x0?0x0:_0x4be7b3,this['_currentStopIndex']=_0x4be7b3;}}},'currentRoute':{'get':function(){if(!this['_routes']['ready'])return undefined;return this['_routes']['routes'][0x0];}},'readyPromise':{'get':function(){return this['_routes']['readyPromise'];}},'playRate':{'get':function(){return this['_playRate'];},'set':function(_0x134912){if(!_0x134912||_0x134912===0x0)return;if(this['_playRate']!==_0x134912){this['_playRate']=_0x134912;if(this['_flyStatus']===_0x145e26['Playing']){this['_scene']['camera']['cancelFlight']();const _0x3aa377=this['_routes']['routes'][0x0],_0x52dcfa=_0x3aa377['get'](this['_dynamicCurrentStopIndex']),_0x2d9016=new _0x2f72b7({});for(let _0x28269f in _0x52dcfa){_0x2d9016[_0x28269f]=_0x52dcfa[_0x28269f];}_0x2d9016['point']=this['_scene']['camera']['_position'],_0x58d601(this,this['_dynamicCurrentStopIndex']+0x1,_0x2d9016);}}}},'turningMode':{'get':function(){return this['_turningMode'];},'set':function(_0x21ac4c){this['_turningMode']=_0x21ac4c;}},'interpolationMode':{'get':function(){return this['_interpolationMode'];},'set':function(_0xa75b88){this['_interpolationMode']=_0xa75b88;}}}),_0x5a2b9d['prototype']['play']=function(){if(!this['currentRoute']||this['_flyStatus']===_0x145e26['Playing'])return;if(this['_flyStatus']===_0x145e26['Pause']||this['_flyStatus']===_0x145e26['Wait'])this['_currentTween']&&this['_scene']['camera']['_currentFlight']?(this['_currentTween']['_tweenjs']['endPause'](),this['_flyStatus']=_0x145e26['Playing']):_0x58d601(this,this['_dynamicCurrentStopIndex']+0x1);else{if(this['currentStopIndex']>=this['_routes']['routes'][0x0]['stopCollection'][this['_routes']['routes'][0x0]['stopCollection']['length']-0x1]['index']){this['_flyStatus']=_0x145e26['Stop'];return;}_0x58d601(this,this['currentStopIndex']);}},_0x5a2b9d['prototype']['pause']=function(){if(this['_flyStatus']===_0x145e26['Playing'])this['_currentTween']=this['_scene']['camera']['_currentFlight'],this['_currentTween']&&this['_currentTween']['_tweenjs']&&this['_currentTween']['_tweenjs']['pause'](),this['_flyStatus']=_0x145e26['Pause'];else this['_flyStatus']===_0x145e26['Wait']&&(this['_flyStatus']=_0x145e26['Pause']);},_0x5a2b9d['prototype']['stop']=function(){this['_currentTween']=this['_scene']['tweens']['get'](0x0);if(this['_currentTween']&&this['_flyStatus']!==_0x145e26['Stop'])this['_currentTween']['cancelTween'](),this['_flyStatus']=_0x145e26['Stop'],this['_currentTween']=undefined;else this['_flyStatus']===_0x145e26['Wait']&&(this['_flyStatus']=_0x145e26['Stop']);this['_dynamicCurrentStopIndex']=this['_currentStopIndex'];},_0x5a2b9d['prototype']['viewToStop']=function(_0x1995d4){if(_0x1995d4&&!(this['_flyStatus']===_0x145e26['Playing'])){const _0x22f1b0=this['_scene']['camera'],_0x3c809e=_0x293903(_0x1995d4['direction'])?{'direction':_0x1995d4['direction'],'up':_0x1995d4['up']}:{'heading':_0x1995d4['heading'],'pitch':_0x1995d4['tilt'],'roll':0x0};_0x22f1b0['setView']({'destination':_0x1995d4['point'],'orientation':_0x3c809e,'convert':_0x1995d4['_isConvert']}),this['_dynamicCurrentStopIndex']=_0x1995d4['index'];}},_0x5a2b9d['prototype']['getAllRouteStops']=function(){if(this['currentRoute'])return this['currentRoute']['stopCollection'];return[];};function _0x58d601(_0x4d9f9,_0x370e98,_0x4fa634){_0x4d9f9['_flyStatus']=_0x145e26['Playing'];const _0x1d3f27=_0x4d9f9['_scene']['camera'],_0x552606=_0x4d9f9['_routes']['routes'][0x0],_0x2a06dd=_0x552606['_catmullRomSpline'],_0x1d1dc4=_0x4d9f9['_interpolationMode'],_0x129fe8=_0x552606['isFlyLoop'],_0x9c6dd9=_0x552606['isHeadingFree'],_0x527a50=_0x552606['isTiltFree'],_0x2af49b=_0x552606['isAltitudeFree'],_0x71f203=_0x41a500(_0x552606['_stopCollection']['get'](_0x370e98),_0x552606['_stopCollection']['_array'][_0x370e98]);if(!_0x71f203){if(_0x129fe8===!![]){_0x370e98=_0x552606['_stopCollection']['_array'][0x0]['index'];_0x293903(_0x2a06dd)&&(_0x2a06dd['_lastTimeIndex']=0x0);_0x4d9f9['_dynamicCurrentStopIndex']=_0x370e98,_0x4d9f9['currentStopIndex']=_0x370e98,_0x58d601(_0x4d9f9,_0x370e98);return;}else{_0x4d9f9['_flyStatus']=_0x145e26['Stop'];return;}}if(_0x370e98===_0x4d9f9['currentStopIndex']){const _0x33a7d1=_0x293903(_0x71f203['direction'])&&!_0x527a50?{'direction':_0x71f203['direction'],'up':_0x71f203['up']}:{'heading':_0x71f203['heading'],'pitch':_0x71f203['tilt'],'roll':0x0};_0x1d3f27['setView']({'destination':_0x71f203['point'],'orientation':_0x33a7d1,'convert':_0x71f203['_isConvert']}),_0x370e98++,_0x58d601(_0x4d9f9,_0x370e98);}else{if(_0x71f203['_bImmediately']){const _0x403fa3=_0x293903(_0x71f203['direction'])&&!_0x527a50?{'direction':_0x71f203['direction'],'up':_0x71f203['up']}:{'heading':_0x71f203['heading'],'pitch':_0x71f203['tilt'],'roll':0x0};_0x1d3f27['setView']({'destination':_0x71f203['point'],'orientation':_0x403fa3,'convert':_0x71f203['_isConvert']}),_0x1fc4ca(_0x4d9f9,_0x71f203,_0x370e98);return;}const _0x2ee776=_0x41a500(_0x552606['_stopCollection']['get'](_0x370e98-0x1),_0x552606['_stopCollection']['get'](_0x71f203['_preStopIndex']));_0x293903(_0x4fa634)&&(_0x2ee776=_0x4fa634);const _0xa77d6e=_0x2ee776['altitude']<_0x71f203['altitude']?_0x2ee776['altitude']:_0x71f203['altitude'];let _0x44c6ce;if(_0x2ee776['stopPlayMode']===_0x3f860c['StopAround'])_0x44c6ce=_0x2ee776['surroundDuration'];else{if(_0x293903(_0x4fa634)){const _0x56ab5a=_0x358485['distance'](_0x4fa634['point'],_0x71f203['point']);_0x2ee776['duration']=_0x56ab5a/_0x2ee776['speed'];}_0x44c6ce=_0x2ee776['duration'];}_0x44c6ce/=_0x4d9f9['_playRate'];const _0x4c89f0=_0x293903(_0x71f203['direction'])&&!_0x527a50?{'direction':_0x71f203['direction'],'up':_0x71f203['up']}:{'heading':_0x71f203['heading'],'pitch':_0x71f203['tilt'],'roll':0x0},_0x3fe349=![];if(_0x4d9f9['_turningMode']===_0x3e27ee['Directly']&&_0x293903(_0x2ee776['direction'])){const _0x97a051={'direction':_0x2ee776['direction'],'up':_0x2ee776['up']};_0x3fe349=!![];}_0x1d3f27['flyTo']({'convert':_0x71f203['_isConvert'],'destination':_0x71f203['point'],'orientation':_0x4c89f0,'maximumHeight':_0xa77d6e,'duration':_0x44c6ce,'headingFree':_0x9c6dd9,'pitchFree':_0x527a50,'altitudeFree':_0x2af49b,'directTurning':_0x3fe349,'catmullRomSpline':_0x2a06dd,'preStopIndex':_0x370e98-0x1,'interpolationMode':_0x1d1dc4,'easingFunction':_0x1fe14a['LINEAR_NONE'],'complete':function(){_0x1fc4ca(_0x4d9f9,_0x71f203,_0x370e98);}});}}let _0x57d9be;function _0x1fc4ca(_0x4f3eba,_0x9b32a5,_0x50d4e4){if(_0x57d9be)clearTimeout(_0x57d9be);_0x4f3eba['_dynamicCurrentStopIndex']=_0x9b32a5['_index'],_0x50d4e4=_0x41a500(_0x9b32a5['_nextStopIndex'],_0x9b32a5['_index']+0x1),_0x4f3eba['_stopArrived']['raiseEvent'](_0x9b32a5);if(!_0x9b32a5['promise']){let _0x34c027=_0x9b32a5['waitTime'];_0x34c027>0x0?(_0x4f3eba['_flyStatus']=_0x145e26['Wait'],_0x57d9be=setTimeout(function(){_0x4f3eba['_flyStatus']===_0x145e26['Wait']&&(_0x4f3eba['_flyStatus']=_0x145e26['Playing'],_0x58d601(_0x4f3eba,_0x50d4e4));},_0x34c027*0x3e8)):_0x58d601(_0x4f3eba,_0x50d4e4);}else _0x9b32a5['promise']['then'](function(){let _0x589ba5=_0x9b32a5['waitTime'];_0x589ba5>0x0?setTimeout(function(){_0x58d601(_0x4f3eba,_0x50d4e4);},_0x589ba5*0x3e8):_0x58d601(_0x4f3eba,_0x50d4e4);});}export default _0x5a2b9d;